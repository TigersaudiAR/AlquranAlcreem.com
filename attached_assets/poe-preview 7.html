<!DOCTYPE html><html lang="ar" dir="rtl"><head><meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval' data: blob: https://cdnjs.cloudflare.com https://cdn.jsdelivr.net https://code.jquery.com https://unpkg.com https://d3js.org https://threejs.org https://cdn.plot.ly https://stackpath.bootstrapcdn.com https://maps.googleapis.com https://cdn.tailwindcss.com https://ajax.googleapis.com https://kit.fontawesome.com https://cdn.datatables.net https://maxcdn.bootstrapcdn.com https://code.highcharts.com https://tako-static-assets-production.s3.amazonaws.com https://www.youtube.com https://fonts.googleapis.com https://fonts.gstatic.com https://pfst.cf2.poecdn.net https://puc.poecdn.net https://i.imgur.com https://wikimedia.org https://*.icons8.com https://*.giphy.com https://picsum.photos https://images.unsplash.com; frame-src 'self' https://www.youtube.com https://trytako.com; child-src 'self'; manifest-src 'self'; worker-src 'self'; upgrade-insecure-requests; block-all-mixed-content;">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ… Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠ</title>
  
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Amiri&amp;family=Scheherazade+New&amp;family=Tajawal:wght@400;500;700&amp;display=swap" rel="stylesheet">
  
  <!-- React and ReactDOM -->
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  
  <!-- Babel -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  
  <!-- Lucide Icons -->
  <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
  
  <!-- Marked for Markdown parsing -->
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  
  <style>
    body {
      font-family: 'Tajawal', sans-serif;
    }
    
    .arabic-text {
      font-family: 'Amiri', 'Scheherazade New', serif;
      line-height: 1.8;
    }
    
    /* Custom scrollbar */
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }
    
    ::-webkit-scrollbar-track {
      background: #f1f1f1;
    }
    
    ::-webkit-scrollbar-thumb {
      background: #5D5CDE;
      border-radius: 4px;
    }
    
    .dark ::-webkit-scrollbar-track {
      background: #2d2d2d;
    }
    
    /* Quran pages styling */
    .quran-page {
      background-color: #FAF6E9;
      background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1IiBoZWlnaHQ9IjUiPgo8cmVjdCB3aWR0aD0iNSIgaGVpZ2h0PSI1IiBmaWxsPSIjZmFmNmU5Ij48L3JlY3Q+CjxyZWN0IHdpZHRoPSIxIiBoZWlnaHQ9IjEiIGZpbGw9IiNlZmVhZDQiPjwvcmVjdD4KPC9zdmc+');
      border: 1px solid #E6DFC8;
      border-radius: 5px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }
    
    .dark .quran-page {
      background-color: #2D2D2D;
      background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1IiBoZWlnaHQ9IjUiPgo8cmVjdCB3aWR0aD0iNSIgaGVpZ2h0PSI1IiBmaWxsPSIjMmQyZDJkIj48L3JlY3Q+CjxyZWN0IHdpZHRoPSIxIiBoZWlnaHQ9IjEiIGZpbGw9IiMzYTNhM2EiPjwvcmVjdD4KPC9zdmc+');
      border-color: #444;
    }
    
    /* Mushaf view frame */
    .mushaf-frame {
      background-color: #8B5A2B;
      background-image: linear-gradient(45deg, #8B5A2B 25%, #A67C52 25%, #A67C52 50%, #8B5A2B 50%, #8B5A2B 75%, #A67C52 75%, #A67C52 100%);
      background-size: 10px 10px;
      padding: 10px;
      border-radius: 8px;
    }
    
    .dark .mushaf-frame {
      background-color: #3D2914;
      background-image: linear-gradient(45deg, #3D2914 25%, #53381D 25%, #53381D 50%, #3D2914 50%, #3D2914 75%, #53381D 75%, #53381D 100%);
    }

    /* Prayer time display animation */
    @keyframes prayerPulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }
    
    .prayer-active {
      animation: prayerPulse 2s infinite;
    }
    
    /* Dream interpretation input focus effect */
    .dream-input:focus {
      box-shadow: 0 0 0 3px rgba(93, 92, 222, 0.3);
    }
    
    /* Hajj map container */
    .hajj-map-container {
      position: relative;
      width: 100%;
      height: 300px;
      background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8ZGVmcz4KICA8cGF0dGVybiBpZD0ic21hbGwtZ3JpZCIgd2lkdGg9IjEwIiBoZWlnaHQ9IjEwIiBwYXR0ZXJuVW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KICAgIDxwYXRoIGQ9Ik0gMTAgMCBMIDAgMCAwIDEwIiBmaWxsPSJub25lIiBzdHJva2U9IiNlMGUwZTAiIHN0cm9rZS13aWR0aD0iMC41Ii8+CiAgPC9wYXR0ZXJuPgogIDxwYXR0ZXJuIGlkPSJncmlkIiB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CiAgICA8cmVjdCB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0idXJsKCNzbWFsbC1ncmlkKSIvPgogICAgPHBhdGggZD0iTSAxMDAgMCBMIDAgMCAwIDEwMCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjY2NjY2NjIiBzdHJva2Utd2lkdGg9IjEiLz4KICA8L3BhdHRlcm4+CjwvZGVmcz4KPHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0idXJsKCNncmlkKSIgLz4KPC9zdmc+');
      border: 1px solid #ddd;
      border-radius: 5px;
    }
    
    .dark .hajj-map-container {
      background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8ZGVmcz4KICA8cGF0dGVybiBpZD0ic21hbGwtZ3JpZCIgd2lkdGg9IjEwIiBoZWlnaHQ9IjEwIiBwYXR0ZXJuVW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KICAgIDxwYXRoIGQ9Ik0gMTAgMCBMIDAgMCAwIDEwIiBmaWxsPSJub25lIiBzdHJva2U9IiMzMzMzMzMiIHN0cm9rZS13aWR0aD0iMC41Ii8+CiAgPC9wYXR0ZXJuPgogIDxwYXR0ZXJuIGlkPSJncmlkIiB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CiAgICA8cmVjdCB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0idXJsKCNzbWFsbC1ncmlkKSIvPgogICAgPHBhdGggZD0iTSAxMDAgMCBMIDAgMCAwIDEwMCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNDQ0NDQ0IiBzdHJva2Utd2lkdGg9IjEiLz4KICA8L3BhdHRlcm4+CjwvZGVmcz4KPHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0idXJsKCNncmlkKSIgLz4KPC9zdmc+');
      border-color: #444;
    }
    
    /* Memory circles UI */
    .memory-circle {
      transition: all 0.3s ease;
    }
    
    .memory-circle:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
    }
    
    /* Audio player custom styling */
    .custom-audio-player {
      --player-bg: #10B981;
      --player-text: white;
      --player-bg-hover: #059669;
      --progress-bg: rgba(255,255,255,0.2);
      --progress-fill: white;
      border-radius: 12px;
      overflow: hidden;
    }
    
    .dark .custom-audio-player {
      --player-bg: #065F46;
      --player-text: #E2E8F0;
      --player-bg-hover: #047857;
      --progress-bg: rgba(255,255,255,0.1);
      --progress-fill: #E2E8F0;
    }
    
    .circle-progress {
      stroke-dasharray: 140;
      stroke-dashoffset: 140;
      transform: rotate(-90deg);
      transform-origin: center;
      transition: stroke-dashoffset 0.3s ease;
    }
  </style>
  
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            primary: '#5D5CDE',
            secondary: '#10B981',
          },
          fontFamily: {
            arabic: ['Amiri', 'Scheherazade New', 'serif'],
          }
        }
      }
    }
    
    // Check for dark mode preference
    if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
      document.documentElement.classList.add('dark');
    }
    
    // Listen for changes in color scheme preference
    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
      if (event.matches) {
        document.documentElement.classList.add('dark');
      } else {
        document.documentElement.classList.remove('dark');
      }
    });
  </script>
</head>
<body class="bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-white">
  <div id="app"></div>
  
  <script type="text/babel">
    const { useState, useEffect, useRef, useCallback } = React;
    
    // Initialize lucide icons
    lucide.createIcons();
    
    // ØªÙƒÙˆÙŠÙ† Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
    const APP_CONFIG = {
      version: '1.4.0',
      name: 'ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ… Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠ',
      developer: 'Ø¹Ø¨Ø¯Ø§Ù„Ø±Ø­Ù…Ù† Ø¹ÙˆØ¶ ØµØ§Ù„Ø­ Ø§Ù„Ø±Ø´ÙŠØ¯ÙŠ Ù„Ù„Ø¨Ø±Ù…Ø¬Ø© ÙˆØªØ·ÙˆÙŠØ±',
      // API URLs Ø­ÙŠØ© ÙˆÙØ¹Ø§Ù„Ø©
      quranAPI: 'https://api.alquran.cloud/v1/',
      quranTranslationAPI: 'https://api.alquran.cloud/v1/quran/',
      tafsirAPI: 'https://api.quran.com/api/v4/',
      prayerAPI: 'https://api.aladhan.com/v1/',
      hadithAPI: 'https://api.hadith.gading.dev/books/',
      audioBaseURL: 'https://cdn.islamic.network/quran/audio/128/',
      copyright: {
        year: new Date().getFullYear(),
        owner: "Ø¹Ø¨Ø¯Ø§Ù„Ø±Ø­Ù…Ù† Ø¹ÙˆØ¶ ØµØ§Ù„Ø­ Ø§Ù„Ø±Ø´ÙŠØ¯ÙŠ Ù„Ù„Ø¨Ø±Ù…Ø¬Ø© ÙˆØªØ·ÙˆÙŠØ±",
        phone: "+966 599900121",
        email: "Tiger3Saudi@gmail.com",
        location: "Ø§Ù„Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©ØŒ Ø§Ù„Ø±ÙŠØ§Ø¶",
        rights: "Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©"
      }
    };

    // Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù‚Ø±Ø§Ø¡ Ù…Ø¹ Ø±ÙˆØ§Ø¨Ø· Ø§Ù„ØµÙˆØª Ø§Ù„Ø­ÙŠØ©
    const RECITERS = [
      { id: 'ar.alafasy', name: 'Ù…Ø´Ø§Ø±ÙŠ Ø±Ø§Ø´Ø¯ Ø§Ù„Ø¹ÙØ§Ø³ÙŠ', language: 'ar' },
      { id: 'ar.abdulbasitmurattal', name: 'Ø¹Ø¨Ø¯ Ø§Ù„Ø¨Ø§Ø³Ø· Ø¹Ø¨Ø¯ Ø§Ù„ØµÙ…Ø¯', language: 'ar' },
      { id: 'ar.abdurrahmaansudais', name: 'Ø¹Ø¨Ø¯ Ø§Ù„Ø±Ø­Ù…Ù† Ø§Ù„Ø³Ø¯ÙŠØ³', language: 'ar' },
      { id: 'ar.hanirifai', name: 'Ù‡Ø§Ù†ÙŠ Ø§Ù„Ø±ÙØ§Ø¹ÙŠ', language: 'ar' },
      { id: 'ar.husary', name: 'Ù…Ø­Ù…ÙˆØ¯ Ø®Ù„ÙŠÙ„ Ø§Ù„Ø­ØµØ±ÙŠ', language: 'ar' },
      { id: 'ar.mahermuaiqly', name: 'Ù…Ø§Ù‡Ø± Ø§Ù„Ù…Ø¹ÙŠÙ‚Ù„ÙŠ', language: 'ar' },
      { id: 'ar.minshawi', name: 'Ù…Ø­Ù…Ø¯ ØµØ¯ÙŠÙ‚ Ø§Ù„Ù…Ù†Ø´Ø§ÙˆÙŠ', language: 'ar' },
      { id: 'ar.muhammadayyoub', name: 'Ù…Ø­Ù…Ø¯ Ø£ÙŠÙˆØ¨', language: 'ar' },
    ];

    // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù„ØºØ§Øª ÙˆØ§Ù„ØªØ±Ø¬Ù…Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø©
    const LANGUAGES = [
      { code: 'ar', name: 'Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©', direction: 'rtl', translation: 'ar.asad' },
      { code: 'en', name: 'English', direction: 'ltr', translation: 'en.sahih' },
      { code: 'fr', name: 'FranÃ§ais', direction: 'ltr', translation: 'fr.hamidullah' },
      { code: 'ur', name: 'Ø§Ø±Ø¯Ùˆ', direction: 'rtl', translation: 'ur.jalandhry' },
      { code: 'id', name: 'Bahasa Indonesia', direction: 'ltr', translation: 'id.indonesian' },
    ];
    
    // Ù…ÙƒÙˆÙ‘Ù† Ø¹Ø§Ø±Ø¶ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡
    const ErrorDisplay = ({ error, onRetry, retryText = "Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©" }) => (
      <div className="bg-red-100 dark:bg-red-900 p-6 rounded-lg text-center">
        <lucide-alert-triangle className="w-12 h-12 text-red-600 dark:text-red-400 mx-auto mb-3" />
        <div className="text-red-600 dark:text-red-400 font-bold text-lg mb-2">Ø­Ø¯Ø« Ø®Ø·Ø£!</div>
        <div className="text-red-700 dark:text-red-300 mb-4">{error}</div>
        {onRetry && (
          <button 
            onClick={onRetry}
            className="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg"
          >
            {retryText}
          </button>
        )}
      </div>
    );
    
    // Ù…ÙƒÙˆÙ‘Ù† Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
    const Toast = ({ message, type = 'success', onClose }) => {
      useEffect(() => {
        const timer = setTimeout(() => {
          onClose();
        }, 3000);
        
        return () => clearTimeout(timer);
      }, [onClose]);
      
      return (
        <div className={`fixed bottom-4 right-4 z-50 p-3 rounded-lg shadow-lg flex items-center gap-2 ${
          type === 'success' ? 'bg-emerald-600 text-white' :
          type === 'error' ? 'bg-red-600 text-white' :
          'bg-amber-600 text-white'
        }`}>
          {type === 'success' ? <lucide-check className="w-5 h-5" /> :
           type === 'error' ? <lucide-x className="w-5 h-5" /> :
           <lucide-alert-triangle className="w-5 h-5" />}
          <span>{message}</span>
          <button onClick={onClose} className="ml-2 p-1 hover:bg-white hover:bg-opacity-20 rounded-full">
            <lucide-x className="w-4 h-4" />
          </button>
        </div>
      );
    };

    // Ù…ÙƒÙˆÙ† ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
    const LoadingSpinner = ({ text = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...' }) => (
      <div className="flex flex-col items-center justify-center p-8">
        <div className="w-12 h-12 border-4 border-emerald-200 border-t-emerald-600 rounded-full animate-spin mb-4"></div>
        <div className="text-emerald-700 dark:text-emerald-400 font-bold">{text}</div>
      </div>
    );

    // Ù…ÙƒÙˆÙ† Ù…ÙˆØ§Ù‚ÙŠØª Ø§Ù„ØµÙ„Ø§Ø© - ØªÙ… ØªØ­Ø³ÙŠÙ†Ù‡ Ù„Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠØ© Ø§Ù„Ø­ÙŠØ©
    const PrayerTimes = () => {
      const [prayerTimes, setPrayerTimes] = useState({
        fajr: '--:--',
        dhuhr: '--:--',
        asr: '--:--',
        maghrib: '--:--',
        isha: '--:--',
        nextPrayer: null,
        countdown: '--:--'
      });
      
      const [location, setLocation] = useState({
        latitude: 24.7136,
        longitude: 46.6753,
        cityName: 'Ø¬Ø§Ø±ÙŠ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹...',
        countryCode: 'SA'
      });
      
      const [qiblaDirection, setQiblaDirection] = useState(0);
      const [isLoading, setIsLoading] = useState(true);
      const [error, setError] = useState(null);
      const countdownIntervalRef = useRef(null);
      
      useEffect(() => {
        // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…
        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(
            (position) => {
              const lat = position.coords.latitude;
              const lng = position.coords.longitude;
              setLocation(prev => ({ ...prev, latitude: lat, longitude: lng }));
              fetchLocationName(lat, lng);
              calculateQiblaDirection(lat, lng);
              fetchPrayerTimes(lat, lng);
            },
            (error) => {
              console.error("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙˆÙ‚Ø¹:", error);
              // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ (Ø§Ù„Ø±ÙŠØ§Ø¶)
              setError("ØªØ¹Ø°Ø± Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…ÙˆÙ‚Ø¹Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠ. ØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ (Ø§Ù„Ø±ÙŠØ§Ø¶).");
              fetchPrayerTimes(location.latitude, location.longitude);
              calculateQiblaDirection(location.latitude, location.longitude);
            },
            { enableHighAccuracy: true, timeout: 5000, maximumAge: 0 }
          );
        } else {
          setError("Ø§Ù„Ù…ØªØµÙØ­ Ù„Ø§ ÙŠØ¯Ø¹Ù… ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹. ØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ (Ø§Ù„Ø±ÙŠØ§Ø¶).");
          fetchPrayerTimes(location.latitude, location.longitude);
          calculateQiblaDirection(location.latitude, location.longitude);
        }
        
        return () => {
          if (countdownIntervalRef.current) {
            clearInterval(countdownIntervalRef.current);
          }
        };
      }, []);
      
      // Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ø³Ù… Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ù…Ù† Ø§Ù„Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª
      const fetchLocationName = async (lat, lng) => {
        try {
          const response = await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lng}&accept-language=ar`);
          
          if (!response.ok) {
            throw new Error(`ÙØ´Ù„ Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù…: ${response.status}`);
          }
          
          const data = await response.json();
          
          // Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ø³Ù… Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ø£Ùˆ Ø§Ù„Ø¨Ù„Ø¯Ø© Ø£Ùˆ Ø§Ù„Ù‚Ø±ÙŠØ© Ø£Ùˆ Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©
          const city = data.address.city || data.address.town || data.address.village || data.address.state || data.address.county;
          const country_code = data.address.country_code;
          
          if (city) {
            setLocation(prev => ({ ...prev, cityName: city, countryCode: country_code }));
          } else {
            setLocation(prev => ({ ...prev, cityName: data.display_name.split(',')[0] }));
          }
        } catch (error) {
          console.error("Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ø³Ù… Ø§Ù„Ù…ÙˆÙ‚Ø¹:", error);
          setError("ØªØ¹Ø°Ø± Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ø³Ù… Ù…ÙˆÙ‚Ø¹Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠ.");
        }
      };
      
      // Ø­Ø³Ø§Ø¨ Ø§ØªØ¬Ø§Ù‡ Ø§Ù„Ù‚Ø¨Ù„Ø© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… ØµÙŠØºØ© Ø§Ù„Ø§ØªØ¬Ø§Ù‡ Ø§Ù„Ø¹Ø¸Ù…Ù‰
      const calculateQiblaDirection = (lat, lng) => {
        try {
          // Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª Ø§Ù„ÙƒØ¹Ø¨Ø© Ø§Ù„Ù…Ø´Ø±ÙØ© (Ù…ÙƒØ© Ø§Ù„Ù…ÙƒØ±Ù…Ø©)
          const kaabaLat = 21.4225; // Ø®Ø· Ø¹Ø±Ø¶ Ø§Ù„ÙƒØ¹Ø¨Ø© (Ø¨Ø§Ù„Ø¯Ø±Ø¬Ø§Øª)
          const kaabaLng = 39.8262; // Ø®Ø· Ø·ÙˆÙ„ Ø§Ù„ÙƒØ¹Ø¨Ø© (Ø¨Ø§Ù„Ø¯Ø±Ø¬Ø§Øª)
          
          // ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª Ù…Ù† Ø¯Ø±Ø¬Ø§Øª Ø¥Ù„Ù‰ Ø±Ø§Ø¯ÙŠØ§Ù†
          const latRad = lat * (Math.PI / 180);
          const lngRad = lng * (Math.PI / 180);
          const kaabaLatRad = kaabaLat * (Math.PI / 180);
          const kaabaLngRad = kaabaLng * (Math.PI / 180);
          
          // Ø­Ø³Ø§Ø¨ Ø§ØªØ¬Ø§Ù‡ Ø§Ù„Ù‚Ø¨Ù„Ø© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… ØµÙŠØºØ© Ø§Ù„Ø§ØªØ¬Ø§Ù‡ Ø§Ù„Ø¹Ø¸Ù…Ù‰ (Great Circle Formula)
          const y = Math.sin(kaabaLngRad - lngRad);
          const x = (Math.cos(latRad) * Math.tan(kaabaLatRad)) - 
                    (Math.sin(latRad) * Math.cos(kaabaLngRad - lngRad));
          
          // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø§ØªØ¬Ø§Ù‡ Ø¨Ø§Ù„Ø±Ø§Ø¯ÙŠØ§Ù† Ø«Ù… ØªØ­ÙˆÙŠÙ„Ù‡ Ø¥Ù„Ù‰ Ø¯Ø±Ø¬Ø§Øª
          let qiblaAngle = Math.atan2(y, x) * (180 / Math.PI);
          
          // ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù‚ÙŠÙ…Ø© Ø¥Ù„Ù‰ Ø§Ù„Ù†Ø·Ø§Ù‚ 0-360 Ø¯Ø±Ø¬Ø©
          qiblaAngle = (qiblaAngle + 360) % 360;
          
          setQiblaDirection(qiblaAngle);
        } catch (error) {
          console.error("Ø®Ø·Ø£ ÙÙŠ Ø­Ø³Ø§Ø¨ Ø§ØªØ¬Ø§Ù‡ Ø§Ù„Ù‚Ø¨Ù„Ø©:", error);
          setError("ØªØ¹Ø°Ø± Ø­Ø³Ø§Ø¨ Ø§ØªØ¬Ø§Ù‡ Ø§Ù„Ù‚Ø¨Ù„Ø© Ø¨Ø¯Ù‚Ø©.");
          // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù‚ÙŠÙ…Ø© Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ù„Ø§ØªØ¬Ø§Ù‡ Ø§Ù„Ù‚Ø¨Ù„Ø© ÙÙŠ Ø§Ù„Ø±ÙŠØ§Ø¶
          setQiblaDirection(245.1);
        }
      };
      
      // Ø¬Ù„Ø¨ Ù…ÙˆØ§Ù‚ÙŠØª Ø§Ù„ØµÙ„Ø§Ø© Ù…Ù† API ÙˆÙ‚Øª Ø§Ù„ØµÙ„Ø§Ø©
      const fetchPrayerTimes = async (lat, lng) => {
        setIsLoading(true);
        try {
          const today = new Date();
          const formattedDate = `${today.getDate()}-${today.getMonth() + 1}-${today.getFullYear()}`;
          
          // Ø§Ø³ØªØ®Ø¯Ø§Ù… API Ù…ÙˆØ§Ù‚ÙŠØª Ø§Ù„ØµÙ„Ø§Ø© Ø§Ù„Ø­ÙŠ
          const url = `${APP_CONFIG.prayerAPI}timings/${formattedDate}?latitude=${lat}&longitude=${lng}&method=4`;
          const response = await fetch(url);
          
          if (!response.ok) {
            throw new Error(`ÙØ´Ù„ Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù…: ${response.status}`);
          }
          
          const data = await response.json();
          
          if (data.code === 200 && data.data && data.data.timings) {
            const timings = data.data.timings;
            
            // ØªØ®Ø²ÙŠÙ† Ø£ÙˆÙ‚Ø§Øª Ø§Ù„ØµÙ„ÙˆØ§Øª
            setPrayerTimes(prev => ({
              ...prev,
              fajr: timings.Fajr,
              dhuhr: timings.Dhuhr,
              asr: timings.Asr,
              maghrib: timings.Maghrib,
              isha: timings.Isha
            }));
            
            // Ø­Ø³Ø§Ø¨ Ø§Ù„ØµÙ„Ø§Ø© Ø§Ù„ØªØ§Ù„ÙŠØ© ÙˆØ§Ù„Ø¹Ø¯ Ø§Ù„ØªÙ†Ø§Ø²Ù„ÙŠ
            calculateNextPrayer(timings);
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø¯ Ø§Ù„ØªÙ†Ø§Ø²Ù„ÙŠ ÙƒÙ„ Ø¯Ù‚ÙŠÙ‚Ø©
            if (countdownIntervalRef.current) {
              clearInterval(countdownIntervalRef.current);
            }
            
            countdownIntervalRef.current = setInterval(() => {
              updateCountdown(timings);
            }, 60000);
          } else {
            throw new Error("Ø¨ÙŠØ§Ù†Ø§Øª ØºÙŠØ± ØµØ§Ù„Ø­Ø© Ù…Ù† API");
          }
        } catch (error) {
          console.error("Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ù…ÙˆØ§Ù‚ÙŠØª Ø§Ù„ØµÙ„Ø§Ø©:", error);
          setError("ØªØ¹Ø°Ø± Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…ÙˆØ§Ù‚ÙŠØª Ø§Ù„ØµÙ„Ø§Ø©. ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§ØªØµØ§Ù„Ùƒ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª.");
          
          // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø¨ÙŠØ§Ù†Ø§Øª Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
          setPrayerTimes({
            fajr: '04:30',
            dhuhr: '12:10',
            asr: '15:45',
            maghrib: '19:20',
            isha: '20:50',
            nextPrayer: 'asr',
            countdown: '--:--'
          });
        } finally {
          setIsLoading(false);
        }
      };
      
      // ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ØµÙ„Ø§Ø© Ø§Ù„ØªØ§Ù„ÙŠØ© ÙˆØ­Ø³Ø§Ø¨ Ø§Ù„Ø¹Ø¯ Ø§Ù„ØªÙ†Ø§Ø²Ù„ÙŠ
      const calculateNextPrayer = (timings) => {
        try {
          const now = new Date();
          const currentHour = now.getHours();
          const currentMinute = now.getMinutes();
          const currentTime = currentHour * 60 + currentMinute; // Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø­Ø§Ù„ÙŠ Ø¨Ø§Ù„Ø¯Ù‚Ø§Ø¦Ù‚
          
          const prayers = [
            { name: 'fajr', arabicName: 'Ø§Ù„ÙØ¬Ø±', time: timings.Fajr },
            { name: 'dhuhr', arabicName: 'Ø§Ù„Ø¸Ù‡Ø±', time: timings.Dhuhr },
            { name: 'asr', arabicName: 'Ø§Ù„Ø¹ØµØ±', time: timings.Asr },
            { name: 'maghrib', arabicName: 'Ø§Ù„Ù…ØºØ±Ø¨', time: timings.Maghrib },
            { name: 'isha', arabicName: 'Ø§Ù„Ø¹Ø´Ø§Ø¡', time: timings.Isha }
          ];
          
          // ØªØ­ÙˆÙŠÙ„ Ø£ÙˆÙ‚Ø§Øª Ø§Ù„ØµÙ„Ø§Ø© Ø¥Ù„Ù‰ Ø¯Ù‚Ø§Ø¦Ù‚
          const prayerMinutes = prayers.map(prayer => {
            const [hour, minute] = prayer.time.split(':');
            return {
              name: prayer.name,
              arabicName: prayer.arabicName,
              minutes: parseInt(hour) * 60 + parseInt(minute)
            };
          });
          
          // ØªØ±ØªÙŠØ¨ Ø§Ù„ØµÙ„ÙˆØ§Øª Ø­Ø³Ø¨ Ø§Ù„ÙˆÙ‚Øª
          prayerMinutes.sort((a, b) => a.minutes - b.minutes);
          
          // ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ØµÙ„Ø§Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©
          let nextPrayer = null;
          for (let prayer of prayerMinutes) {
            if (prayer.minutes > currentTime) {
              nextPrayer = prayer;
              break;
            }
          }
          
          // Ø¥Ø°Ø§ ØªØ¬Ø§ÙˆØ²Ù†Ø§ Ø¢Ø®Ø± ØµÙ„Ø§Ø© ÙÙŠ Ø§Ù„ÙŠÙˆÙ…ØŒ ÙØ§Ù„ØµÙ„Ø§Ø© Ø§Ù„ØªØ§Ù„ÙŠØ© Ù‡ÙŠ Ø§Ù„ÙØ¬Ø± ØºØ¯Ù‹Ø§
          if (!nextPrayer) {
            nextPrayer = prayerMinutes[0]; // Ø§Ù„ÙØ¬Ø±
            // Ø¥Ø¶Ø§ÙØ© 24 Ø³Ø§Ø¹Ø© Ù„Ù„ÙˆÙ‚Øª
            nextPrayer.minutes += 24 * 60;
          }
          
          // Ø­Ø³Ø§Ø¨ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ
          const remainingMinutes = nextPrayer.minutes - currentTime;
          const hours = Math.floor(remainingMinutes / 60);
          const minutes = remainingMinutes % 60;
          
          setPrayerTimes(prev => ({
            ...prev,
            nextPrayer: nextPrayer.name,
            nextPrayerArabic: nextPrayer.arabicName,
            countdown: `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}`
          }));
        } catch (error) {
          console.error("Ø®Ø·Ø£ ÙÙŠ Ø­Ø³Ø§Ø¨ Ø§Ù„ØµÙ„Ø§Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©:", error);
          setError("ØªØ¹Ø°Ø± Ø­Ø³Ø§Ø¨ ÙˆÙ‚Øª Ø§Ù„ØµÙ„Ø§Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©.");
        }
      };
      
      // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø¯ Ø§Ù„ØªÙ†Ø§Ø²Ù„ÙŠ
      const updateCountdown = (timings) => {
        calculateNextPrayer(timings);
      };
      
      if (isLoading) {
        return <LoadingSpinner text="Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ù…ÙˆØ§Ù‚ÙŠØª Ø§Ù„ØµÙ„Ø§Ø©..." />;
      }
      
      return (
        <div className="rounded-lg p-4 mb-6 bg-gradient-to-r from-emerald-700 to-emerald-900 text-white">
          <div className="flex justify-between items-center mb-3">
            <h2 className="text-lg font-bold">Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„ØµÙ„Ø§Ø©</h2>
            <div className="flex items-center">
              <div className="bg-white bg-opacity-20 rounded-full px-3 py-1 text-sm ml-2">
                <lucide-clock className="w-4 h-4 inline ml-1" />
                <span>{prayerTimes.countdown}</span> Ù„ØµÙ„Ø§Ø© {prayerTimes.nextPrayerArabic}
              </div>
            </div>
          </div>
          
          <div className="flex flex-wrap justify-between">
            <div className="w-full md:w-8/12">
              <div className="flex flex-wrap justify-between">
                <div className={`rounded-lg px-3 py-2 text-center mb-2 w-1/5 ${prayerTimes.nextPrayer === 'fajr' ? 'bg-amber-500 text-emerald-900 prayer-active' : 'bg-white bg-opacity-10'}`}>
                  <div className="text-xs md:text-sm">Ø§Ù„ÙØ¬Ø±</div>
                  <div className="text-sm md:text-base">{prayerTimes.fajr}</div>
                </div>
                <div className={`rounded-lg px-3 py-2 text-center mb-2 w-1/5 ${prayerTimes.nextPrayer === 'dhuhr' ? 'bg-amber-500 text-emerald-900 prayer-active' : 'bg-white bg-opacity-10'}`}>
                  <div className="text-xs md:text-sm">Ø§Ù„Ø¸Ù‡Ø±</div>
                  <div className="text-sm md:text-base">{prayerTimes.dhuhr}</div>
                </div>
                <div className={`rounded-lg px-3 py-2 text-center mb-2 w-1/5 ${prayerTimes.nextPrayer === 'asr' ? 'bg-amber-500 text-emerald-900 prayer-active' : 'bg-white bg-opacity-10'}`}>
                  <div className="text-xs md:text-sm">Ø§Ù„Ø¹ØµØ±</div>
                  <div className="text-sm md:text-base">{prayerTimes.asr}</div>
                </div>
                <div className={`rounded-lg px-3 py-2 text-center mb-2 w-1/5 ${prayerTimes.nextPrayer === 'maghrib' ? 'bg-amber-500 text-emerald-900 prayer-active' : 'bg-white bg-opacity-10'}`}>
                  <div className="text-xs md:text-sm">Ø§Ù„Ù…ØºØ±Ø¨</div>
                  <div className="text-sm md:text-base">{prayerTimes.maghrib}</div>
                </div>
                <div className={`rounded-lg px-3 py-2 text-center mb-2 w-1/5 ${prayerTimes.nextPrayer === 'isha' ? 'bg-amber-500 text-emerald-900 prayer-active' : 'bg-white bg-opacity-10'}`}>
                  <div className="text-xs md:text-sm">Ø§Ù„Ø¹Ø´Ø§Ø¡</div>
                  <div className="text-sm md:text-base">{prayerTimes.isha}</div>
                </div>
              </div>
              <div className="mt-2 text-center text-sm text-white text-opacity-80">
                <lucide-map-pin className="w-4 h-4 inline ml-1" />
                {location.cityName}
              </div>
            </div>
            
            <div className="w-full md:w-4/12 flex justify-center">
              <div className="text-center">
                <h2 className="text-lg font-bold mb-2">Ø§ØªØ¬Ø§Ù‡ Ø§Ù„Ù‚Ø¨Ù„Ø©</h2>
                <div className="relative w-24 h-24 mx-auto rounded-full bg-gradient-to-r from-emerald-700 to-emerald-900 border-4 border-amber-500">
                  <div 
                    className="absolute w-2 h-12 bg-amber-500 top-2 left-1/2 origin-bottom" 
                    style={{ transform: `translateX(-50%) rotate(${qiblaDirection}deg)` }}
                  ></div>
                  <div className="absolute w-4 h-4 bg-amber-500 rounded-full top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"></div>
                </div>
                <div className="mt-1 text-sm">{Math.round(qiblaDirection)}Â° Ù…Ù† Ø§Ù„Ø´Ù…Ø§Ù„</div>
              </div>
            </div>
          </div>
          
          {error && (
            <div className="mt-3 text-amber-200 text-sm text-center">
              <lucide-alert-triangle className="w-4 h-4 inline ml-1" />
              {error}
            </div>
          )}
        </div>
      );
    };

    // Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø³ÙˆØ± Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© - Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙÙŠ Ø­Ø§Ù„Ø© ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠØ©
    const FALLBACK_SURAHS = [
      {number: 1, name: "Ø§Ù„ÙØ§ØªØ­Ø©", englishName: "Al-Fatiha", numberOfAyahs: 7, revelationType: "Meccan"},
      {number: 2, name: "Ø§Ù„Ø¨Ù‚Ø±Ø©", englishName: "Al-Baqara", numberOfAyahs: 286, revelationType: "Medinan"},
      {number: 3, name: "Ø¢Ù„ Ø¹Ù…Ø±Ø§Ù†", englishName: "Aal-Imran", numberOfAyahs: 200, revelationType: "Medinan"},
      {number: 4, name: "Ø§Ù„Ù†Ø³Ø§Ø¡", englishName: "An-Nisa", numberOfAyahs: 176, revelationType: "Medinan"},
      {number: 5, name: "Ø§Ù„Ù…Ø§Ø¦Ø¯Ø©", englishName: "Al-Ma'ida", numberOfAyahs: 120, revelationType: "Medinan"},
      {number: 6, name: "Ø§Ù„Ø£Ù†Ø¹Ø§Ù…", englishName: "Al-An'am", numberOfAyahs: 165, revelationType: "Meccan"},
      {number: 7, name: "Ø§Ù„Ø£Ø¹Ø±Ø§Ù", englishName: "Al-A'raf", numberOfAyahs: 206, revelationType: "Meccan"},
      {number: 8, name: "Ø§Ù„Ø£Ù†ÙØ§Ù„", englishName: "Al-Anfal", numberOfAyahs: 75, revelationType: "Medinan"},
      {number: 9, name: "Ø§Ù„ØªÙˆØ¨Ø©", englishName: "At-Tawba", numberOfAyahs: 129, revelationType: "Medinan"},
      {number: 10, name: "ÙŠÙˆÙ†Ø³", englishName: "Yunus", numberOfAyahs: 109, revelationType: "Meccan"},
      {number: 11, name: "Ù‡ÙˆØ¯", englishName: "Hud", numberOfAyahs: 123, revelationType: "Meccan"},
      {number: 12, name: "ÙŠÙˆØ³Ù", englishName: "Yusuf", numberOfAyahs: 111, revelationType: "Meccan"},
      {number: 13, name: "Ø§Ù„Ø±Ø¹Ø¯", englishName: "Ar-Ra'd", numberOfAyahs: 43, revelationType: "Medinan"},
      {number: 14, name: "Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ…", englishName: "Ibrahim", numberOfAyahs: 52, revelationType: "Meccan"},
      {number: 15, name: "Ø§Ù„Ø­Ø¬Ø±", englishName: "Al-Hijr", numberOfAyahs: 99, revelationType: "Meccan"},
      // ÙˆÙ‡ÙƒØ°Ø§ Ù…Ø¹ Ø¨Ù‚ÙŠØ© Ø§Ù„Ø³ÙˆØ± - ØªÙ… Ø§Ø®ØªØµØ§Ø±Ù‡Ø§ Ù‡Ù†Ø§
    ];

    // Ø§Ù„Ù†Øµ Ø§Ù„Ù‚Ø±Ø¢Ù†ÙŠ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ Ù„Ù„Ø³ÙˆØ± Ø§Ù„Ø£ÙƒØ«Ø± Ø´ÙŠÙˆØ¹Ø§Ù‹ - Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙÙŠ Ø­Ø§Ù„Ø© ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠØ©
    const FALLBACK_AYAHS = {
      // Ø³ÙˆØ±Ø© Ø§Ù„ÙØ§ØªØ­Ø©
      1: [
        { number: 1, numberInSurah: 1, text: "Ø¨ÙØ³Ù’Ù…Ù Ù±Ù„Ù„ÙÙ‘Ù‡Ù Ù±Ù„Ø±ÙÙ‘Ø­Ù’Ù…ÙÙ°Ù†Ù Ù±Ù„Ø±ÙÙ‘Ø­ÙÙŠÙ…Ù" },
        { number: 2, numberInSurah: 2, text: "Ù±Ù„Ù’Ø­ÙÙ…Ù’Ø¯Ù Ù„ÙÙ„ÙÙ‘Ù‡Ù Ø±ÙØ¨ÙÙ‘ Ù±Ù„Ù’Ø¹ÙÙ°Ù„ÙÙ…ÙÙŠÙ†Ù" },
        { number: 3, numberInSurah: 3, text: "Ù±Ù„Ø±ÙÙ‘Ø­Ù’Ù…ÙÙ°Ù†Ù Ù±Ù„Ø±ÙÙ‘Ø­ÙÙŠÙ…Ù" },
        { number: 4, numberInSurah: 4, text: "Ù…ÙÙ°Ù„ÙÙƒÙ ÙŠÙÙˆÙ’Ù…Ù Ù±Ù„Ø¯ÙÙ‘ÙŠÙ†Ù" },
        { number: 5, numberInSurah: 5, text: "Ø¥ÙÙŠÙÙ‘Ø§ÙƒÙ Ù†ÙØ¹Ù’Ø¨ÙØ¯Ù ÙˆÙØ¥ÙÙŠÙÙ‘Ø§ÙƒÙ Ù†ÙØ³Ù’ØªÙØ¹ÙÙŠÙ†Ù" },
        { number: 6, numberInSurah: 6, text: "Ù±Ù‡Ù’Ø¯ÙÙ†ÙØ§ Ù±Ù„ØµÙÙ‘Ø±ÙÙ°Ø·Ù Ù±Ù„Ù’Ù…ÙØ³Ù’ØªÙÙ‚ÙÙŠÙ…Ù" },
        { number: 7, numberInSurah: 7, text: "ØµÙØ±ÙÙ°Ø·Ù Ù±Ù„ÙÙ‘Ø°ÙÙŠÙ†Ù Ø£ÙÙ†Ù’Ø¹ÙÙ…Ù’ØªÙ Ø¹ÙÙ„ÙÙŠÙ’Ù‡ÙÙ…Ù’ ØºÙÙŠÙ’Ø±Ù Ù±Ù„Ù’Ù…ÙØºÙ’Ø¶ÙÙˆØ¨Ù Ø¹ÙÙ„ÙÙŠÙ’Ù‡ÙÙ…Ù’ ÙˆÙÙ„ÙØ§ Ù±Ù„Ø¶ÙÙ‘Ø¢Ù„ÙÙ‘ÙŠÙ†Ù" }
      ],
      // ÙˆÙ‡ÙƒØ°Ø§ Ù…Ø¹ Ø¨Ù‚ÙŠØ© Ø§Ù„Ø³ÙˆØ± - ØªÙ… Ø§Ø®ØªØµØ§Ø±Ù‡Ø§ Ù‡Ù†Ø§
    };

    // Ù…ÙƒÙˆÙ† Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø³ÙˆØ± Ù…Ø¹ Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠØ© Ø§Ù„Ø­ÙŠØ©
    const SurahList = ({ onSelectSurah }) => {
      const [surahs, setSurahs] = useState(FALLBACK_SURAHS); // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© ÙƒÙ‚ÙŠÙ…Ø© Ù…Ø¨Ø¯Ø¦ÙŠØ©
      const [loading, setLoading] = useState(true);
      const [error, setError] = useState(null);
      const [searchQuery, setSearchQuery] = useState('');
      const [useFallback, setUseFallback] = useState(false);
      
      useEffect(() => {
        fetchSurahList();
      }, []);
      
      const fetchSurahList = async () => {
        setLoading(true);
        setError(null);
        try {
          // Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙˆØ§Ø¬Ù‡Ø© Ø¨Ø±Ù…Ø¬ÙŠØ© Ø­ÙŠØ© Ù„Ø¬Ù„Ø¨ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø³ÙˆØ±
          const response = await fetch(`${APP_CONFIG.quranAPI}surah`);
          
          if (!response.ok) {
            throw new Error(`ÙØ´Ù„ Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù…: ${response.status}`);
          }
          
          const data = await response.json();
          
          if (data.code === 200 && data.data) {
            setSurahs(data.data);
            setUseFallback(false);
          } else {
            throw new Error("Ø¨ÙŠØ§Ù†Ø§Øª ØºÙŠØ± ØµØ§Ù„Ø­Ø© Ù…Ù† API");
          }
        } catch (error) {
          console.error("Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø³ÙˆØ±:", error);
          // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© ÙÙŠ Ø­Ø§Ù„Ø© ÙØ´Ù„ Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù…
          setSurahs(FALLBACK_SURAHS);
          setUseFallback(true);
          setError("ØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø³ÙˆØ± Ø§Ù„Ù…Ø®Ø²Ù†Ø© Ù…Ø­Ù„ÙŠØ§Ù‹ Ø¨Ø³Ø¨Ø¨ Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª.");
        } finally {
          setLoading(false);
        }
      };
      
      const filteredSurahs = surahs.filter(surah => 
        surah.name.includes(searchQuery) || 
        surah.englishName.toLowerCase().includes(searchQuery.toLowerCase()) ||
        surah.number.toString().includes(searchQuery)
      );
      
      if (loading) {
        return <LoadingSpinner text="Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø³ÙˆØ±..." />;
      }
      
      return (
        <div className="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4">
          {error && (
            <div className="mb-4 bg-yellow-100 dark:bg-yellow-900 p-3 rounded-lg text-yellow-800 dark:text-yellow-200 text-sm">
              <lucide-alert-triangle className="w-4 h-4 inline ml-1" />
              {error}
              {useFallback && (
                <button 
                  onClick={fetchSurahList}
                  className="mr-2 underline text-blue-600 dark:text-blue-400 hover:text-blue-800"
                >
                  Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø§ØªØµØ§Ù„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰
                </button>
              )}
            </div>
          )}
        
          <div className="mb-4">
            <input
              type="text"
              value={searchQuery}
              onChange={(e) => setSearchQuery(e.target.value)}
              placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø³ÙˆØ±Ø©..."
              className="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 dark:bg-gray-700 dark:text-white text-base"
            />
          </div>
          
          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3">
            {filteredSurahs.length > 0 ? (
              filteredSurahs.map((surah) => (
                <div 
                  key={surah.number}
                  onClick={() => onSelectSurah(surah.number)}
                  className="bg-emerald-50 dark:bg-emerald-900 p-3 rounded-lg flex justify-between items-center cursor-pointer hover:bg-emerald-100 dark:hover:bg-emerald-800 transition-colors"
                >
                  <div className="flex items-center">
                    <div className="w-8 h-8 bg-emerald-600 text-white rounded-full flex items-center justify-center ml-2">
                      {surah.number}
                    </div>
                    <div>
                      <div className="font-bold">{surah.name}</div>
                      <div className="text-gray-600 dark:text-gray-400 text-sm">{surah.englishName}</div>
                    </div>
                  </div>
                  <div className="text-gray-600 dark:text-gray-400 text-sm">
                    {surah.numberOfAyahs} Ø¢ÙŠØ©
                    <lucide-chevron-right className="w-4 h-4 inline mr-1" />
                  </div>
                </div>
              ))
            ) : (
              <div className="col-span-3 text-center p-8 text-gray-500 dark:text-gray-400">
                Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬ ØªØ·Ø§Ø¨Ù‚ Ø¨Ø­Ø«Ùƒ. Ø­Ø§ÙˆÙ„ Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙƒÙ„Ù…Ø§Øª Ø¨Ø­Ø« Ø£Ø®Ø±Ù‰.
              </div>
            )}
          </div>
        </div>
      );
    };

    // Ù…ÙƒÙˆÙ† Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ù‚Ø±Ø¢Ù† Ù…Ø¹ Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠØ© Ø§Ù„Ø­ÙŠØ©
    const QuranSearch = ({ onResults }) => {
      const [query, setQuery] = useState('');
      const [loading, setLoading] = useState(false);
      const [error, setError] = useState(null);
      
      const handleSearch = async (e) => {
        e.preventDefault();
        
        if (!query.trim()) {
          return;
        }
        
        setLoading(true);
        setError(null);
        
        try {
          // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø¢ÙŠØ§Øª Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… API Ø­ÙŠ
          const response = await fetch(`${APP_CONFIG.tafsirAPI}search?q=${encodeURIComponent(query)}&language=ar&size=20`);
          
          if (!response.ok) {
            throw new Error(`ÙØ´Ù„ Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù…: ${response.status}`);
          }
          
          const data = await response.json();
          
          if (data.search && data.search.results) {
            onResults(data.search.results);
          } else {
            onResults([]);
          }
        } catch (error) {
          console.error("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¨Ø­Ø«:", error);
          setError("ØªØ¹Ø°Ø± Ø¥Ø¬Ø±Ø§Ø¡ Ø§Ù„Ø¨Ø­Ø«. ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§ØªØµØ§Ù„Ùƒ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª ÙˆØ§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.");
        } finally {
          setLoading(false);
        }
      };
      
      return (
        <div className="bg-white dark:bg-gray-800 rounded-lg shadow-md p-3 mb-6">
          <form onSubmit={handleSearch}>
            <div className="flex">
              <input
                type="text"
                value={query}
                onChange={(e) => setQuery(e.target.value)}
                placeholder="Ø§Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…..."
                className="flex-grow p-2 border border-gray-300 dark:border-gray-600 rounded-r-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 dark:bg-gray-700 dark:text-white text-base"
                disabled={loading}
              />
              <button
                type="submit"
                className={`${loading ? 'bg-gray-500' : 'bg-emerald-600 hover:bg-emerald-700'} text-white px-4 py-2 rounded-l-lg`}
                disabled={loading}
              >
                {loading ? 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¨Ø­Ø«...' : 'ğŸ” Ø¨Ø­Ø«'}
              </button>
            </div>
          </form>
          
          {error && (
            <div className="mt-3 text-red-600 dark:text-red-400 text-sm">
              <lucide-alert-triangle className="w-4 h-4 inline ml-1" />
              {error}
            </div>
          )}
        </div>
      );
    };

    // Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¨Ø­Ø«
    const SearchResults = ({ results, onSelectAyah }) => {
      if (!results || results.length === 0) {
        return (
          <div className="bg-amber-50 dark:bg-amber-900 rounded-lg p-4 mb-6 text-center">
            <div className="text-amber-700 dark:text-amber-300 font-bold mb-2">Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù†ØªØ§Ø¦Ø¬</div>
            <div className="text-amber-800 dark:text-amber-200">
              Ø­Ø§ÙˆÙ„ Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙƒÙ„Ù…Ø§Øª Ø¨Ø­Ø« Ø£Ø®Ø±Ù‰ Ø£Ùˆ ØªØ£ÙƒØ¯ Ù…Ù† ØµØ­Ø© Ù…Ø§ ØªØ¨Ø­Ø« Ø¹Ù†Ù‡.
            </div>
          </div>
        );
      }
      
      return (
        <div className="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 mb-6">
          <h3 className="text-xl font-bold mb-4 text-emerald-700 dark:text-emerald-400">Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¨Ø­Ø«</h3>
          <div className="text-gray-600 dark:text-gray-400 mb-4">
            ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ {results.length} Ù†ØªÙŠØ¬Ø©
          </div>
          
          <div className="space-y-4">
            {results.map((result, index) => (
              <div 
                key={index}
                className="p-3 border-r-4 border-emerald-500 bg-emerald-50 dark:bg-emerald-900 hover:bg-emerald-100 dark:hover:bg-emerald-800 rounded-lg cursor-pointer"
                onClick={() => onSelectAyah(result.verse_key)}
              >
                <div className="flex justify-between mb-2">
                  <div className="font-bold text-emerald-700 dark:text-emerald-400">
                    Ø³ÙˆØ±Ø© {result.verse.translations[0]?.surah_name || result.verse_key.split(':')[0]} | Ø§Ù„Ø¢ÙŠØ© {result.verse_key.split(':')[1]}
                  </div>
                </div>
                <div className="text-gray-800 dark:text-gray-200 mb-2 arabic-text">
                  {result.text}
                </div>
                <div className="text-sm text-gray-600 dark:text-gray-400">
                  Ø§Ù†Ù‚Ø± Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø¢ÙŠØ© ÙÙŠ Ø³ÙŠØ§Ù‚Ù‡Ø§
                </div>
              </div>
            ))}
          </div>
        </div>
      );
    };

    // Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
    const MainSections = ({ onSectionSelect }) => {
      const sections = [
        { id: 'quran', name: 'Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…', icon: 'ğŸ“–' },
        { id: 'memorization', name: 'Ø­Ù„Ù‚Ø§Øª Ø§Ù„ØªØ­ÙÙŠØ¸', icon: 'ğŸ‘¥' },
        { id: 'learn-reading', name: 'ØªØ¹Ù„Ù… Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©', icon: 'ğŸ“š' },
        { id: 'virtual-classes', name: 'Ø§Ù„ÙØµÙˆÙ„ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©', icon: 'ğŸ–¥ï¸' },
        { id: 'hajj-umrah', name: 'Ø§Ù„Ø­Ø¬ ÙˆØ§Ù„Ø¹Ù…Ø±Ø©', icon: 'ğŸ•‹' },
        { id: 'educational', name: 'Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ©', icon: 'ğŸ“' },
        { id: 'ask-scholars', name: 'ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø¹Ù„Ù…Ø§Ø¡', icon: 'ğŸ‘¨â€ğŸ«' },
        { id: 'dream-interpretation', name: 'ØªÙØ³ÙŠØ± Ø§Ù„Ø£Ø­Ù„Ø§Ù…', icon: 'ğŸ’­' },
      ];
      
      return (
        <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
          {sections.map(section => (
            <div
              key={section.id}
              onClick={() => onSectionSelect(section.id)}
              className="bg-gradient-to-r from-emerald-700 to-emerald-900 text-white rounded-lg p-6 text-center cursor-pointer shadow-md hover:shadow-lg transform hover:-translate-y-1 transition-all"
            >
              <div className="text-3xl mb-3">{section.icon}</div>
              <h3 className="text-lg font-bold">{section.name}</h3>
            </div>
          ))}
        </div>
      );
    };

    // Ù…ÙƒÙˆÙ† Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ… (Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ) Ù…Ø¹ ÙƒØ§ÙØ© ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„ÙˆØ§Ø¬Ù‡Ø§Øª Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠØ©
    const QuranSection = () => {
      const [view, setView] = useState('surah-list'); // surah-list, surah-view, search, mushaf
      const [viewMode, setViewMode] = useState('reading'); // reading, translation, tafsir, mushaf
      const [currentSurah, setCurrentSurah] = useState(1);
      const [currentPage, setCurrentPage] = useState(1);
      const [currentAyah, setCurrentAyah] = useState(1);
      const [currentReciter, setCurrentReciter] = useState(RECITERS[0].id);
      const [translationEdition, setTranslationEdition] = useState('en.sahih'); // Default translation
      const [searchResults, setSearchResults] = useState(null);
      const [toast, setToast] = useState(null);
      
      const handleSelectSurah = (surahNumber) => {
        setCurrentSurah(surahNumber);
        setCurrentAyah(1);
        setView('surah-view');
        setViewMode('reading');
      };
      
      const handleSelectAyahFromSearch = (verseKey) => {
        const [surahNumber, ayahNumber] = verseKey.split(':');
        setCurrentSurah(parseInt(surahNumber));
        setCurrentAyah(parseInt(ayahNumber));
        setView('surah-view');
        setViewMode('reading');
      };
      
      const handleBackToList = () => {
        setView('surah-list');
        setSearchResults(null);
      };
      
      const handleSearch = () => {
        setView('search');
      };
      
      const handleSearchResults = (results) => {
        setSearchResults(results);
      };
      
      const handleReciterChange = (reciterId) => {
        setCurrentReciter(reciterId);
        setToast({
          message: `ØªÙ… ØªØºÙŠÙŠØ± Ø§Ù„Ù‚Ø§Ø±Ø¦ Ø¥Ù„Ù‰ ${RECITERS.find(r => r.id === reciterId).name}`,
          type: 'success'
        });
      };
      
      const handleViewModeChange = (mode) => {
        setViewMode(mode);
        if (mode === 'mushaf' && view !== 'mushaf') {
          setView('mushaf');
        } else if (mode !== 'mushaf' && view === 'mushaf') {
          setView('surah-view');
        }
      };
      
      const handleTranslationChange = (edition) => {
        setTranslationEdition(edition);
        setToast({
          message: `ØªÙ… ØªØºÙŠÙŠØ± Ø§Ù„ØªØ±Ø¬Ù…Ø©`,
          type: 'success'
        });
      };
      
      const clearToast = () => {
        setToast(null);
      };
      
      return (
        <div>
          <div className="flex flex-wrap justify-between items-center mb-4 gap-2">
            {view !== 'surah-list' && (
              <button 
                onClick={handleBackToList}
                className="flex items-center text-emerald-600 dark:text-emerald-400 hover:underline"
              >
                <lucide-arrow-left className="w-4 h-4 ml-1" />
                {view === 'search' ? 'Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©' : 'Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø³ÙˆØ±'}
              </button>
            )}
            
            {/* Viewing modes */}
            {(view === 'surah-view' || view === 'mushaf') && (
              <div className="flex flex-wrap items-center justify-center gap-2">
                <div className="bg-gray-100 dark:bg-gray-700 rounded-lg p-1 flex">
                  <button 
                    onClick={() => handleViewModeChange('reading')}
                    className={`px-2 py-1 rounded-md text-sm ${viewMode === 'reading' ? 'bg-emerald-600 text-white' : 'text-gray-700 dark:text-gray-300'}`}
                  >
                    Ù‚Ø±Ø§Ø¡Ø©
                  </button>
                  <button 
                    onClick={() => handleViewModeChange('translation')}
                    className={`px-2 py-1 rounded-md text-sm ${viewMode === 'translation' ? 'bg-emerald-600 text-white' : 'text-gray-700 dark:text-gray-300'}`}
                  >
                    ØªØ±Ø¬Ù…Ø©
                  </button>
                  <button 
                    onClick={() => handleViewModeChange('tafsir')}
                    className={`px-2 py-1 rounded-md text-sm ${viewMode === 'tafsir' ? 'bg-emerald-600 text-white' : 'text-gray-700 dark:text-gray-300'}`}
                  >
                    ØªÙØ³ÙŠØ±
                  </button>
                  <button 
                    onClick={() => handleViewModeChange('mushaf')}
                    className={`px-2 py-1 rounded-md text-sm ${viewMode === 'mushaf' ? 'bg-emerald-600 text-white' : 'text-gray-700 dark:text-gray-300'}`}
                  >
                    Ù…ØµØ­Ù
                  </button>
                </div>
                
                {viewMode === 'translation' && (
                  <select
                    value={translationEdition}
                    onChange={(e) => handleTranslationChange(e.target.value)}
                    className="bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded text-sm py-1"
                  >
                    <option value="en.sahih">English - Sahih International</option>
                    <option value="fr.hamidullah">FranÃ§ais - Hamidullah</option>
                    <option value="ur.jalandhry">Ø§Ø±Ø¯Ùˆ - Ø¬Ø§Ù„Ù†Ø¯ÛØ±ÛŒ</option>
                    <option value="id.indonesian">Bahasa Indonesia</option>
                    <option value="tr.ates">TÃ¼rkÃ§e - SÃ¼leyman AteÅŸ</option>
                    <option value="ru.kuliev">Ğ ÑƒÑÑĞºĞ¸Ğ¹ - ĞšÑƒĞ»Ğ¸ĞµĞ²</option>
                  </select>
                )}
              </div>
            )}
            
            {view === 'surah-view' && (
              <div className="flex items-center">
                <label htmlFor="reciter" className="text-sm font-medium ml-2">Ø§Ù„Ù‚Ø§Ø±Ø¦:</label>
                <select
                  id="reciter"
                  value={currentReciter}
                  onChange={(e) => handleReciterChange(e.target.value)}
                  className="bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded text-sm py-1"
                >
                  {RECITERS.map(reciter => (
                    <option key={reciter.id} value={reciter.id}>
                      {reciter.name}
                    </option>
                  ))}
                </select>
              </div>
            )}
            
            {view === 'surah-list' && (
              <button 
                onClick={handleSearch}
                className="flex items-center text-emerald-600 dark:text-emerald-400 hover:underline"
              >
                <span className="ml-1">ğŸ”</span>
                Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ù‚Ø±Ø¢Ù†
              </button>
            )}
          </div>
          
          {view === 'search' && (
            <>
              <QuranSearch onResults={handleSearchResults} />
              {searchResults && <SearchResults results={searchResults} onSelectAyah={handleSelectAyahFromSearch} />}
            </>
          )}
          
          {view === 'surah-list' && <SurahList onSelectSurah={handleSelectSurah} />}
          
          {view === 'surah-view' && (
            <SurahView 
              surahNumber={currentSurah} 
              initialAyah={currentAyah}
              reciterId={currentReciter}
              viewMode={viewMode}
              translationEdition={translationEdition}
            />
          )}
          
          {view === 'mushaf' && (
            <MushafView
              initialPage={currentPage}
              onPageChange={setCurrentPage}
            />
          )}
          
          {toast && (
            <Toast 
              message={toast.message} 
              type={toast.type} 
              onClose={clearToast} 
            />
          )}
        </div>
      );
    };

    // Ù…ÙƒÙˆÙ† Ø§Ù„Ù…Ø´ØºÙ„ Ø§Ù„ØµÙˆØªÙŠ Ø§Ù„Ù…Ø®ØµØµ
    const CustomAudioPlayer = ({ audioSrc, onEnd }) => {
      const [isPlaying, setIsPlaying] = useState(false);
      const [currentTime, setCurrentTime] = useState(0);
      const [duration, setDuration] = useState(0);
      const [error, setError] = useState(null);
      const audioRef = useRef(null);
      
      useEffect(() => {
        if (audioSrc) {
          setCurrentTime(0);
          setDuration(0);
          
          // Reset player before loading new source
          if (audioRef.current) {
            audioRef.current.pause();
            audioRef.current.currentTime = 0;
            audioRef.current.src = audioSrc;
            audioRef.current.load();
          }
        }
      }, [audioSrc]);
      
      const togglePlay = () => {
        if (isPlaying) {
          audioRef.current.pause();
        } else {
          audioRef.current.play()
            .catch(err => {
              console.error("Error playing audio:", err);
              setError("ØªØ¹Ø°Ø± ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª. ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§ØªØµØ§Ù„Ùƒ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª.");
            });
        }
      };
      
      const handleTimeUpdate = () => {
        setCurrentTime(audioRef.current.currentTime);
      };
      
      const handleDurationChange = () => {
        setDuration(audioRef.current.duration);
      };
      
      const handlePlayingStateChange = () => {
        setIsPlaying(!audioRef.current.paused);
      };
      
      const handleEnded = () => {
        setIsPlaying(false);
        if (onEnd) onEnd();
      };
      
      const handleSeek = (e) => {
        const seekPosition = e.target.value;
        audioRef.current.currentTime = seekPosition;
        setCurrentTime(seekPosition);
      };
      
      const formatTime = (seconds) => {
        if (isNaN(seconds)) return "00:00";
        const minutes = Math.floor(seconds / 60);
        const remainingSeconds = Math.floor(seconds % 60);
        return `${minutes.toString().padStart(2, '0')}:${remainingSeconds.toString().padStart(2, '0')}`;
      };
      
      // Calculate progress percentage for circle progress
      const progressPercentage = duration ? (currentTime / duration) * 100 : 0;
      const circumference = 2 * Math.PI * 22; // Circle with radius 22
      const strokeDashoffset = circumference - (progressPercentage / 100) * circumference;
      
      return (
        <div className="custom-audio-player bg-gradient-to-r from-emerald-600 to-emerald-700 dark:from-emerald-700 dark:to-emerald-800 p-3 rounded-lg text-white mb-4">
          <audio
            ref={audioRef}
            src={audioSrc}
            onTimeUpdate={handleTimeUpdate}
            onDurationChange={handleDurationChange}
            onPlay={handlePlayingStateChange}
            onPause={handlePlayingStateChange}
            onEnded={handleEnded}
          />
          
          <div className="flex items-center gap-3">
            {/* Play/Pause Button with Circle Progress */}
            <div className="relative">
              <svg width="48" height="48" viewBox="0 0 48 48" className="transform -rotate-90">
                <circle 
                  cx="24" cy="24" r="22"
                  fill="transparent" 
                  stroke="rgba(255,255,255,0.2)" 
                  strokeWidth="3"
                />
                <circle 
                  cx="24" cy="24" r="22"
                  fill="transparent" 
                  stroke="white" 
                  strokeWidth="3"
                  strokeDasharray={`${circumference} ${circumference}`}
                  strokeDashoffset={strokeDashoffset}
                  className="transition-all duration-300 ease-linear"
                />
              </svg>
              <button
                onClick={togglePlay}
                className="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-12 h-12 rounded-full flex items-center justify-center text-white"
              >
                {isPlaying ? (
                  <lucide-pause className="w-8 h-8" />
                ) : (
                  <lucide-play className="w-8 h-8 ml-1" />
                )}
              </button>
            </div>
            
            {/* Progress and Time Display */}
            <div className="flex-grow flex flex-col justify-center">
              <div className="flex justify-between text-xs mb-1">
                <span>{formatTime(currentTime)}</span>
                <span>{formatTime(duration)}</span>
              </div>
              <input
                type="range"
                min="0"
                max={duration || 100}
                value={currentTime}
                onChange={handleSeek}
                className="w-full h-2 bg-white bg-opacity-20 rounded-full appearance-none cursor-pointer"
                style={{
                  backgroundImage: `linear-gradient(to right, white ${progressPercentage}%, transparent ${progressPercentage}%)`,
                }}
              />
            </div>
          </div>
          
          {error && (
            <div className="mt-2 text-xs text-red-200">
              <lucide-alert-triangle className="w-3 h-3 inline ml-1" />
              {error}
            </div>
          )}
        </div>
      );
    };

    // Ù…ÙƒÙˆÙ† Ø¹Ø±Ø¶ Ø§Ù„Ù…ØµØ­Ù - Ù…Ø­Ø³Ù† Ù…Ø¹ Ø¯Ø¹Ù… Ø§Ù„ØµÙˆØ± Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©
    const MushafView = ({ initialPage = 1, onPageChange }) => {
      const [currentPage, setCurrentPage] = useState(initialPage);
      const [totalPages] = useState(604); // Standard Quran has 604 pages
      const [loading, setLoading] = useState(false);
      const [error, setError] = useState(null);
      const [zoomLevel, setZoomLevel] = useState(1);
      
      // Ù…ØµØ¯Ø± ØµÙˆØ± Ø§Ù„Ù…ØµØ­Ù - API Ø­Ù‚ÙŠÙ‚ÙŠ Ù„Ù„ØµÙˆØ±
      const getPageImageUrl = (page) => {
        return `https://www.islamicnet.com/Quran/QuranImage/${page}.jpg`;
      };
      
      useEffect(() => {
        setCurrentPage(initialPage);
      }, [initialPage]);
      
      // Go to next page
      const nextPage = () => {
        if (currentPage < totalPages) {
          setCurrentPage(currentPage + 1);
          onPageChange(currentPage + 1);
        }
      };
      
      // Go to previous page
      const prevPage = () => {
        if (currentPage > 1) {
          setCurrentPage(currentPage - 1);
          onPageChange(currentPage - 1);
        }
      };
      
      // Handle page input
      const handlePageInput = (e) => {
        const page = parseInt(e.target.value);
        if (!isNaN(page) && page >= 1 && page <= totalPages) {
          setCurrentPage(page);
          onPageChange(page);
        }
      };
      
      // Zoom in
      const zoomIn = () => {
        if (zoomLevel < 2) {
          setZoomLevel(zoomLevel + 0.1);
        }
      };
      
      // Zoom out
      const zoomOut = () => {
        if (zoomLevel > 0.5) {
          setZoomLevel(zoomLevel - 0.1);
        }
      };
      
      const loadPage = () => {
        setLoading(true);
        const img = new Image();
        img.src = getPageImageUrl(currentPage);
        
        img.onload = () => {
          setLoading(false);
          setError(null);
        };
        
        img.onerror = () => {
          setLoading(false);
          setError("ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ ØµÙˆØ±Ø© Ø§Ù„ØµÙØ­Ø©. ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§ØªØµØ§Ù„Ùƒ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª.");
        };
      };
      
      useEffect(() => {
        loadPage();
      }, [currentPage]);
      
      return (
        <div className="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4">
          <div className="border-b border-gray-300 dark:border-gray-700 pb-3 mb-4">
            <h2 className="text-2xl font-bold text-center text-emerald-800 dark:text-emerald-500">
              Ø§Ù„Ù…ØµØ­Ù Ø§Ù„Ø´Ø±ÙŠÙ - ØµÙØ­Ø© {currentPage}
            </h2>
          </div>
          
          <div className="mb-4 flex flex-wrap items-center justify-between gap-2">
            <div className="flex items-center gap-2">
              <button 
                onClick={prevPage}
                disabled={currentPage <= 1}
                className={`p-2 rounded-lg ${currentPage <= 1 ? 'bg-gray-300 dark:bg-gray-700 cursor-not-allowed' : 'bg-emerald-600 hover:bg-emerald-700 text-white'}`}
              >
                <lucide-chevron-right className="w-5 h-5" />
              </button>
              
              <div className="flex items-center border border-gray-300 dark:border-gray-600 rounded-lg overflow-hidden">
                <input 
                  type="number" 
                  min="1" 
                  max={totalPages}
                  value={currentPage}
                  onChange={handlePageInput}
                  className="w-16 p-2 text-center focus:outline-none focus:ring-2 focus:ring-emerald-500 dark:bg-gray-700 dark:text-white text-base"
                />
                <span className="px-2 bg-gray-100 dark:bg-gray-600 text-gray-700 dark:text-gray-300 text-sm">
                  Ù…Ù† {totalPages}
                </span>
              </div>
              
              <button 
                onClick={nextPage}
                disabled={currentPage >= totalPages}
                className={`p-2 rounded-lg ${currentPage >= totalPages ? 'bg-gray-300 dark:bg-gray-700 cursor-not-allowed' : 'bg-emerald-600 hover:bg-emerald-700 text-white'}`}
              >
                <lucide-chevron-left className="w-5 h-5" />
              </button>
            </div>
            
            <div className="flex items-center gap-2">
              <button 
                onClick={zoomOut}
                className="p-2 rounded-lg bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600"
              >
                <lucide-zoom-out className="w-5 h-5" />
              </button>
              <span className="text-sm text-gray-700 dark:text-gray-300">
                {Math.round(zoomLevel * 100)}%
              </span>
              <button 
                onClick={zoomIn}
                className="p-2 rounded-lg bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600"
              >
                <lucide-zoom-in className="w-5 h-5" />
              </button>
            </div>
          </div>
          
          <div className="mushaf-frame mb-4">
            <div 
              className="quran-page p-4 min-h-[600px] flex items-center justify-center"
              style={{ 
                transform: `scale(${zoomLevel})`, 
                transformOrigin: 'top center',
                transition: 'transform 0.3s ease'
              }}
            >
              {loading ? (
                <LoadingSpinner text="Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©..." />
              ) : error ? (
                <div className="text-center text-red-600 dark:text-red-400 p-4">
                  <lucide-alert-triangle className="w-8 h-8 mx-auto mb-2" />
                  <p>{error}</p>
                  <button 
                    onClick={loadPage}
                    className="mt-4 bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-lg"
                  >
                    Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©
                  </button>
                </div>
              ) : (
                <img 
                  src={getPageImageUrl(currentPage)} 
                  alt={`ØµÙØ­Ø© ${currentPage} Ù…Ù† Ø§Ù„Ù…ØµØ­Ù Ø§Ù„Ø´Ø±ÙŠÙ`}
                  className="max-w-full max-h-[600px] object-contain"
                  onError={(e) => {
                    setError("ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ ØµÙˆØ±Ø© Ø§Ù„ØµÙØ­Ø©. ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§ØªØµØ§Ù„Ùƒ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª.");
                    // Use a fallback image or placeholder
                    e.target.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjYwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjFmMWYxIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtc2l6ZT0iMjAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGFsaWdubWVudC1iYXNlbGluZT0ibWlkZGxlIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiI+2LXZgdit2Kkg2KfZhNmF2LXYrdmBINmE2YXYqtiq2YjZgdix2Kk8L3RleHQ+PC9zdmc+';
                  }}
                />
              )}
            </div>
          </div>
          
          <div className="flex justify-center space-x-4 rtl:space-x-reverse">
            <button 
              onClick={prevPage}
              disabled={currentPage <= 1}
              className={`px-4 py-2 rounded-lg ${currentPage <= 1 ? 'bg-gray-300 dark:bg-gray-700 cursor-not-allowed' : 'bg-emerald-600 hover:bg-emerald-700 text-white'}`}
            >
              Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©
            </button>
            <button 
              onClick={nextPage}
              disabled={currentPage >= totalPages}
              className={`px-4 py-2 rounded-lg ${currentPage >= totalPages ? 'bg-gray-300 dark:bg-gray-700 cursor-not-allowed' : 'bg-emerald-600 hover:bg-emerald-700 text-white'}`}
            >
              Ø§Ù„ØµÙØ­Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©
            </button>
          </div>
        </div>
      );
    };

    // Ù…ÙƒÙˆÙ† Ø¹Ø±Ø¶ Ø§Ù„Ø³ÙˆØ±Ø© - Ù…Ø¹ ÙƒØ§ÙØ© Ø§Ù„Ø§ØªØµØ§Ù„Ø§Øª Ø¨Ø§Ù„ÙˆØ§Ø¬Ù‡Ø§Øª Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠØ©
    const SurahView = ({ surahNumber = 1, initialAyah = 1, reciterId = 'ar.alafasy', viewMode = 'reading', translationEdition = 'en.sahih' }) => {
      const [surah, setSurah] = useState(null);
      const [translation, setTranslation] = useState(null);
      const [loading, setLoading] = useState(true);
      const [error, setError] = useState(null);
      const [currentAyah, setCurrentAyah] = useState(initialAyah);
      const [showTafsir, setShowTafsir] = useState(viewMode === 'tafsir');
      const [tafsirText, setTafsirText] = useState('');
      const [tafsirLoading, setTafsirLoading] = useState(false);
      const [tafsirError, setTafsirError] = useState(null);
      const [isPlaying, setIsPlaying] = useState(false);
      const [currentAudioSrc, setCurrentAudioSrc] = useState('');
      const [bookmark, setBookmark] = useState(null);
      const [toast, setToast] = useState(null);
      const [useFallback, setUseFallback] = useState(false);
      const audioRef = useRef(null);
      const ayahRefs = useRef({});
      
      // Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø³ÙˆØ±Ø© ÙˆØ§Ù„ØªØ±Ø¬Ù…Ø© Ø¹Ù†Ø¯ ØªØºÙŠÙŠØ± Ø±Ù‚Ù… Ø§Ù„Ø³ÙˆØ±Ø© Ø£Ùˆ Ø§Ù„Ù†Ù…Ø·
      useEffect(() => {
        fetchSurah();
        if (viewMode === 'translation') {
          fetchTranslation();
        }
        if (viewMode === 'tafsir' && initialAyah > 0) {
          fetchTafsir(initialAyah);
        }
        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø¹Ù„Ø§Ù…Ø§Øª Ù…Ø±Ø¬Ø¹ÙŠØ© Ù…Ø­ÙÙˆØ¸Ø©
        checkBookmarks();
      }, [surahNumber, viewMode, translationEdition]);
      
      // Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø¥Ù„Ù‰ Ø§Ù„Ø¢ÙŠØ© Ø§Ù„Ù…Ø­Ø¯Ø¯Ø©
      useEffect(() => {
        if (surah && !loading && currentAyah) {
          const ayahElement = ayahRefs.current[currentAyah];
          if (ayahElement) {
            setTimeout(() => {
              ayahElement.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }, 500);
          }
        }
      }, [surah, loading, currentAyah]);
      
      // Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø³ÙˆØ±Ø© Ù…Ù† API
      const fetchSurah = async () => {
        setLoading(true);
        setError(null);
        
        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØªÙˆÙØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ù„Ù‡Ø°Ù‡ Ø§Ù„Ø³ÙˆØ±Ø©
        const hasFallbackData = !!FALLBACK_AYAHS[surahNumber];
        
        try {
          // Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙˆØ§Ø¬Ù‡Ø© Ø¨Ø±Ù…Ø¬ÙŠØ© Ø­ÙŠØ© Ù„Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø³ÙˆØ±Ø©
          const response = await fetch(`${APP_CONFIG.quranAPI}surah/${surahNumber}`);
          
          if (!response.ok) {
            throw new Error(`ÙØ´Ù„ Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù…: ${response.status}`);
          }
          
          const data = await response.json();
          
          if (data.code === 200 && data.data) {
            setSurah(data.data);
            setUseFallback(false);
            
            // Ø¥Ø°Ø§ ÙƒØ§Ù† Ù‡Ù†Ø§Ùƒ Ø¢ÙŠØ© Ù…Ø­Ø¯Ø¯Ø©ØŒ Ù‚Ù… Ø¨Ø¬Ù„Ø¨ ØªÙØ³ÙŠØ±Ù‡Ø§ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§
            if (initialAyah > 1) {
              setCurrentAyah(initialAyah);
              if (viewMode === 'tafsir') {
                fetchTafsir(initialAyah);
              }
            }
          } else {
            throw new Error("Ø¨ÙŠØ§Ù†Ø§Øª ØºÙŠØ± ØµØ§Ù„Ø­Ø© Ù…Ù† API");
          }
        } catch (error) {
          console.error("Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø³ÙˆØ±Ø©:", error);
          
          // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ù…ØªÙˆÙØ±Ø©
          if (hasFallbackData) {
            // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø³ÙˆØ±Ø© Ù…Ù† FALLBACK_SURAHS
            const fallbackSurah = FALLBACK_SURAHS.find(s => s.number === surahNumber);
            
            if (fallbackSurah) {
              setSurah({
                ...fallbackSurah,
                ayahs: FALLBACK_AYAHS[surahNumber]
              });
              setUseFallback(true);
              
              // Ø¥Ø¸Ù‡Ø§Ø± ØªÙ†Ø¨ÙŠÙ‡ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©
              setError("ØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ© Ù„Ù„Ø³ÙˆØ±Ø© Ø¨Ø³Ø¨Ø¨ Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª.");
              
              if (initialAyah > 1) {
                setCurrentAyah(initialAyah);
              }
            } else {
              setError("ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³ÙˆØ±Ø©. ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§ØªØµØ§Ù„Ùƒ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª ÙˆØ§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.");
            }
          } else {
            setError("ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³ÙˆØ±Ø©. ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§ØªØµØ§Ù„Ùƒ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª ÙˆØ§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.");
          }
        } finally {
          setLoading(false);
        }
      };
      
      // Ø¬Ù„Ø¨ ØªØ±Ø¬Ù…Ø© Ø§Ù„Ø³ÙˆØ±Ø© Ù…Ù† API
      const fetchTranslation = async () => {
        setLoading(true);
        try {
          // Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙˆØ§Ø¬Ù‡Ø© Ø¨Ø±Ù…Ø¬ÙŠØ© Ø­ÙŠØ© Ù„Ø¬Ù„Ø¨ Ø§Ù„ØªØ±Ø¬Ù…Ø©
          const response = await fetch(`${APP_CONFIG.quranTranslationAPI}${translationEdition}/surah/${surahNumber}`);
          
          if (!response.ok) {
            throw new Error(`ÙØ´Ù„ Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù…: ${response.status}`);
          }
          
          const data = await response.json();
          
          if (data.code === 200 && data.data) {
            setTranslation(data.data);
          } else {
            throw new Error("Ø¨ÙŠØ§Ù†Ø§Øª ØºÙŠØ± ØµØ§Ù„Ø­Ø© Ù…Ù† API");
          }
        } catch (error) {
          console.error("Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„ØªØ±Ø¬Ù…Ø©:", error);
          setError("ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªØ±Ø¬Ù…Ø©. Ø³ÙŠØªÙ… Ø¹Ø±Ø¶ Ø§Ù„Ù†Øµ Ø§Ù„Ø¹Ø±Ø¨ÙŠ ÙÙ‚Ø·.");
          setTranslation(null);
        } finally {
          setLoading(false);
        }
      };
      
      // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø¹Ù„Ø§Ù…Ø§Øª Ù…Ø±Ø¬Ø¹ÙŠØ©
      const checkBookmarks = () => {
        try {
          const bookmarks = JSON.parse(localStorage.getItem('quran-bookmarks')) || {};
          if (bookmarks[surahNumber]) {
            setBookmark(bookmarks[surahNumber]);
          } else {
            setBookmark(null);
          }
        } catch (error) {
          console.error("Ø®Ø·Ø£ ÙÙŠ Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ø¹Ù„Ø§Ù…Ø§Øª Ø§Ù„Ù…Ø±Ø¬Ø¹ÙŠØ©:", error);
        }
      };
      
      // Ø­ÙØ¸ Ø¹Ù„Ø§Ù…Ø© Ù…Ø±Ø¬Ø¹ÙŠØ©
      const saveBookmark = (ayahNumber) => {
        try {
          const bookmarks = JSON.parse(localStorage.getItem('quran-bookmarks')) || {};
          bookmarks[surahNumber] = ayahNumber;
          localStorage.setItem('quran-bookmarks', JSON.stringify(bookmarks));
          setBookmark(ayahNumber);
          
          // Ø¥Ø¸Ù‡Ø§Ø± Ø±Ø³Ø§Ù„Ø© ØªØ£ÙƒÙŠØ¯
          setToast({
            message: `ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¹Ù„Ø§Ù…Ø© Ø§Ù„Ù…Ø±Ø¬Ø¹ÙŠØ© Ù„Ù„Ø¢ÙŠØ© ${ayahNumber} Ù…Ù† Ø³ÙˆØ±Ø© ${surah.name}`,
            type: 'success'
          });
        } catch (error) {
          console.error("Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ø¹Ù„Ø§Ù…Ø© Ø§Ù„Ù…Ø±Ø¬Ø¹ÙŠØ©:", error);
          setToast({
            message: "ØªØ¹Ø°Ø± Ø­ÙØ¸ Ø§Ù„Ø¹Ù„Ø§Ù…Ø© Ø§Ù„Ù…Ø±Ø¬Ø¹ÙŠØ©",
            type: 'error'
          });
        }
      };
      
      // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø¢ÙŠØ©
      const handleAyahClick = (ayahNumber) => {
        setCurrentAyah(ayahNumber);
        if (viewMode === 'tafsir') {
          fetchTafsir(ayahNumber);
        }
      };
      
      // Ø§Ø³ØªØ±Ø¬Ø§Ø¹ ØªÙØ³ÙŠØ± Ø§Ù„Ø¢ÙŠØ© Ù…Ù† API
      const fetchTafsir = async (ayahNumber) => {
        setTafsirLoading(true);
        setTafsirText('');
        setTafsirError(null);
        
        try {
          // Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙˆØ§Ø¬Ù‡Ø© Ø¨Ø±Ù…Ø¬ÙŠØ© Ø­ÙŠØ© Ù„Ù„ØªÙØ³ÙŠØ±
          const response = await fetch(`${APP_CONFIG.tafsirAPI}tafsirs/ar.muyassar/by_ayah/${surahNumber}:${ayahNumber}`);
          
          if (!response.ok) {
            throw new Error(`ÙØ´Ù„ Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù…: ${response.status}`);
          }
          
          const data = await response.json();
          
          if (data && data.tafsirs && data.tafsirs.length > 0) {
            setTafsirText(data.tafsirs[0].text);
          } else {
            try {
              // Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ø³ØªØ®Ø¯Ø§Ù… ØªÙØ³ÙŠØ± Ø¨Ø¯ÙŠÙ„ Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù‡Ù†Ø§Ùƒ ØªÙØ³ÙŠØ± Ù…ÙŠØ³Ø±
              const altResponse = await fetch(`${APP_CONFIG.tafsirAPI}tafsirs/ar.jalalayn/by_ayah/${surahNumber}:${ayahNumber}`);
              
              if (!altResponse.ok) {
                throw new Error(`ÙØ´Ù„ Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù…: ${altResponse.status}`);
              }
              
              const altData = await altResponse.json();
              
              if (altData && altData.tafsirs && altData.tafsirs.length > 0) {
                setTafsirText(altData.tafsirs[0].text);
              } else {
                setTafsirText("Ù„Ø§ ÙŠÙˆØ¬Ø¯ ØªÙØ³ÙŠØ± Ù…ØªØ§Ø­ Ù„Ù‡Ø°Ù‡ Ø§Ù„Ø¢ÙŠØ©.");
              }
            } catch (error) {
              console.error("Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„ØªÙØ³ÙŠØ± Ø§Ù„Ø¨Ø¯ÙŠÙ„:", error);
              setTafsirText("Ù„Ø§ ÙŠÙˆØ¬Ø¯ ØªÙØ³ÙŠØ± Ù…ØªØ§Ø­ Ù„Ù‡Ø°Ù‡ Ø§Ù„Ø¢ÙŠØ©.");
            }
          }
        } catch (error) {
          console.error("Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„ØªÙØ³ÙŠØ±:", error);
          setTafsirError("ØªØ¹Ø°Ø± Ø¬Ù„Ø¨ Ø§Ù„ØªÙØ³ÙŠØ±. ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§ØªØµØ§Ù„Ùƒ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª.");
        } finally {
          setTafsirLoading(false);
        }
      };
      
      // ØªØ­Ø¶ÙŠØ± Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØª Ù„Ù„Ø¢ÙŠØ©
      const getAudioUrl = (ayahNumber) => {
        // ØªÙ†Ø³ÙŠÙ‚ Ø±Ù‚Ù… Ø§Ù„Ø³ÙˆØ±Ø© ÙˆØ§Ù„Ø¢ÙŠØ© Ø¨Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© Ù„Ù„Ù€ API
        const formattedSurah = surahNumber.toString().padStart(3, '0');
        const formattedAyah = ayahNumber.toString().padStart(3, '0');
        
        // ØªÙƒÙˆÙŠÙ† Ù…Ø³Ø§Ø± Ø§Ù„ØµÙˆØª Ø­Ø³Ø¨ Ø¨Ù†ÙŠØ© API Ø§Ù„Ù‚Ø±Ø¢Ù†
        const audioPath = `${reciterId}/${formattedSurah}${formattedAyah}.mp3`;
        
        return `${APP_CONFIG.audioBaseURL}${audioPath}`;
      };
      
      // ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª Ù„Ù„Ø¢ÙŠØ© Ø§Ù„Ù…Ø­Ø¯Ø¯Ø©
      const playAudio = (ayahNumber) => {
        const audioUrl = getAudioUrl(ayahNumber);
        setCurrentAudioSrc(audioUrl);
        setCurrentAyah(ayahNumber);
        setIsPlaying(true);
      };
      
      // Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø§Ù†ØªÙ‡Ø§Ø¡ ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª
      const handleAudioEnd = () => {
        if (currentAyah < surah.numberOfAyahs) {
          playAudio(currentAyah + 1);
        } else {
          setIsPlaying(false);
          setToast({
            message: "Ø§Ù†ØªÙ‡Ù‰ ØªØ´ØºÙŠÙ„ Ø§Ù„Ø³ÙˆØ±Ø©",
            type: 'success'
          });
        }
      };
      
      // ØªØ´ØºÙŠÙ„ ÙƒØ§Ù…Ù„ Ø§Ù„Ø³ÙˆØ±Ø©
      const playFullSurah = () => {
        if (surah && surah.ayahs && surah.ayahs.length > 0) {
          playAudio(1);
        }
      };
      
      // Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ø¢ÙŠØ©
      const shareAyah = (ayahNumber) => {
        if (surah && surah.ayahs) {
          const ayah = surah.ayahs.find(a => a.numberInSurah === ayahNumber);
          if (ayah) {
            const shareText = `${ayah.text}\n\n[Ø³ÙˆØ±Ø© ${surah.name} - Ø§Ù„Ø¢ÙŠØ© ${ayahNumber}]\nØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ… Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠ`;
            
            if (navigator.share) {
              navigator.share({
                title: `Ø§Ù„Ø¢ÙŠØ© ${ayahNumber} Ù…Ù† Ø³ÙˆØ±Ø© ${surah.name}`,
                text: shareText
              }).catch(error => {
                console.error("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©:", error);
                // Ù†Ø³Ø® Ø§Ù„Ù†Øµ Ø¥Ù„Ù‰ Ø§Ù„Ø­Ø§ÙØ¸Ø© ÙƒØ¨Ø¯ÙŠÙ„
                copyToClipboard(shareText);
              });
            } else {
              // Ù†Ø³Ø® Ø§Ù„Ù†Øµ Ø¥Ù„Ù‰ Ø§Ù„Ø­Ø§ÙØ¸Ø© Ù„Ù„Ù…ØªØµÙØ­Ø§Øª Ø§Ù„ØªÙŠ Ù„Ø§ ØªØ¯Ø¹Ù… ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©
              copyToClipboard(shareText);
            }
          }
        }
      };
      
      // Ù†Ø³Ø® Ø§Ù„Ù†Øµ Ø¥Ù„Ù‰ Ø§Ù„Ø­Ø§ÙØ¸Ø©
      const copyToClipboard = (text) => {
        navigator.clipboard.writeText(text)
          .then(() => {
            setToast({
              message: "ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø¢ÙŠØ© Ø¥Ù„Ù‰ Ø§Ù„Ø­Ø§ÙØ¸Ø©",
              type: 'success'
            });
          })
          .catch(error => {
            console.error("Ø®Ø·Ø£ ÙÙŠ Ù†Ø³Ø® Ø§Ù„Ù†Øµ:", error);
            setToast({
              message: "ØªØ¹Ø°Ø± Ù†Ø³Ø® Ø§Ù„Ù†Øµ",
              type: 'error'
            });
          });
      };
      
      const clearToast = () => {
        setToast(null);
      };
      
      // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ØªØ±Ø¬Ù…Ø© Ø§Ù„Ø¢ÙŠØ©
      const getTranslation = (ayahNumber) => {
        if (!translation || !translation.ayahs) return null;
        
        const translatedAyah = translation.ayahs.find(a => a.numberInSurah === ayahNumber);
        return translatedAyah ? translatedAyah.text : null;
      };
      
      if (loading) {
        return <LoadingSpinner text="Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³ÙˆØ±Ø©..." />;
      }
      
      if (error && !surah) {
        return <ErrorDisplay error={error} onRetry={fetchSurah} />;
      }
      
      if (!surah) {
        return (
          <div className="text-center p-6 bg-red-100 dark:bg-red-900 rounded-lg">
            <div className="text-red-600 dark:text-red-300 font-bold">Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³ÙˆØ±Ø©</div>
          </div>
        );
      }
      
      return (
        <div className="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4">
          {error && (
            <div className="mb-4 bg-yellow-100 dark:bg-yellow-900 p-3 rounded-lg text-yellow-800 dark:text-yellow-200 text-sm">
              <lucide-alert-triangle className="w-4 h-4 inline ml-1" />
              {error}
              {useFallback && (
                <button 
                  onClick={fetchSurah}
                  className="mr-2 underline text-blue-600 dark:text-blue-400 hover:text-blue-800"
                >
                  Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø§ØªØµØ§Ù„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰
                </button>
              )}
            </div>
          )}
        
          <div className="border-b border-gray-300 dark:border-gray-700 pb-3 mb-4">
            <h2 className="text-2xl font-bold text-center text-emerald-800 dark:text-emerald-500">
              Ø³ÙˆØ±Ø© {surah.name} ({surah.englishName})
            </h2>
            <div className="text-center text-gray-600 dark:text-gray-400">
              {surah.revelationType === 'Meccan' ? 'Ù…ÙƒÙŠØ©' : 'Ù…Ø¯Ù†ÙŠØ©'} - {surah.numberOfAyahs} Ø¢ÙŠØ©
            </div>
          </div>
          
          {/* Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… */}
          <div className="flex flex-wrap justify-center gap-4 mb-6">
            <button 
              onClick={playFullSurah}
              className="bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-lg flex items-center"
            >
              <lucide-volume-2 className="w-5 h-5 ml-2" />
              Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ù„Ù„Ø³ÙˆØ±Ø©
            </button>
            
            {viewMode === 'reading' && (
              <button 
                onClick={() => setShowTafsir(!showTafsir)}
                className="bg-amber-600 hover:bg-amber-700 text-white px-4 py-2 rounded-lg flex items-center"
              >
                <lucide-book className="w-5 h-5 ml-2" />
                {showTafsir ? 'Ø¥Ø®ÙØ§Ø¡ Ø§Ù„ØªÙØ³ÙŠØ±' : 'Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ³ÙŠØ±'}
              </button>
            )}
            
            {bookmark && (
              <button 
                onClick={() => {
                  setCurrentAyah(bookmark);
                  const element = ayahRefs.current[bookmark];
                  if (element) element.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }}
                className="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center"
              >
                <lucide-bookmark className="w-5 h-5 ml-2" />
                Ø§Ø³ØªØ¦Ù†Ø§Ù Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© (Ø§Ù„Ø¢ÙŠØ© {bookmark})
              </button>
            )}
          </div>
          
          {/* Ù…Ø´ØºÙ„ Ø§Ù„ØµÙˆØª */}
          {currentAudioSrc && (
            <CustomAudioPlayer 
              audioSrc={currentAudioSrc}
              onEnd={handleAudioEnd}
            />
          )}
          
          {/* Ø¹Ø±Ø¶ Ø§Ù„Ø¨Ø³Ù…Ù„Ø© Ø¨Ø§Ø³ØªØ«Ù†Ø§Ø¡ Ø³ÙˆØ±Ø© Ø§Ù„ØªÙˆØ¨Ø© */}
          {surahNumber !== 9 && viewMode !== 'tafsir' && (
            <div className="mb-6 p-4 bg-emerald-50 dark:bg-emerald-900 rounded-lg text-center">
              <p className="text-2xl arabic-text">
                ï´¿Ø¨ÙØ³Ù’Ù…Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ø§Ù„Ø±ÙÙ‘Ø­Ù’Ù…ÙÙ†Ù Ø§Ù„Ø±ÙÙ‘Ø­ÙÙŠÙ…Ùï´¾
              </p>
            </div>
          )}
          
          {/* Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ³ÙŠØ± */}
          {(showTafsir || viewMode === 'tafsir') && (
            <div className="mb-6 p-4 bg-amber-50 dark:bg-amber-900 rounded-lg">
              <h3 className="text-lg font-bold mb-2 text-amber-800 dark:text-amber-400">
                ØªÙØ³ÙŠØ± Ø§Ù„Ø¢ÙŠØ© {currentAyah}
              </h3>
              
              {tafsirLoading ? (
                <div className="flex justify-center items-center p-4">
                  <div className="w-8 h-8 border-4 border-amber-200 border-t-amber-600 rounded-full animate-spin mr-2"></div>
                  <div>Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙØ³ÙŠØ±...</div>
                </div>
              ) : tafsirError ? (
                <div className="text-red-600 dark:text-red-400">
                  <lucide-alert-triangle className="w-5 h-5 inline ml-1" />
                  {tafsirError}
                </div>
              ) : (
                <p className="text-gray-800 dark:text-gray-200" dir="rtl">{tafsirText}</p>
              )}
            </div>
          )}
          
          {/* Ø¹Ø±Ø¶ Ø§Ù„Ø¢ÙŠØ§Øª */}
          <div className="space-y-4">
            {surah.ayahs && surah.ayahs.map((ayah) => (
              <div 
                key={ayah.number}
                ref={el => ayahRefs.current[ayah.numberInSurah] = el}
                onClick={() => handleAyahClick(ayah.numberInSurah)}
                className={`p-4 rounded-lg cursor-pointer transition-all ${
                  currentAyah === ayah.numberInSurah
                    ? 'bg-emerald-100 dark:bg-emerald-900 border-r-4 border-emerald-600'
                    : 'bg-gray-50 dark:bg-gray-900 hover:bg-emerald-50 dark:hover:bg-emerald-950'
                }`}
              >
                <div className="flex justify-between mb-2">
                  <span className="inline-block bg-emerald-600 text-white w-8 h-8 rounded-full flex items-center justify-center">
                    {ayah.numberInSurah}
                  </span>
                  
                  <div className="flex gap-2">
                    <button 
                      onClick={(e) => {
                        e.stopPropagation();
                        playAudio(ayah.numberInSurah);
                      }}
                      className="bg-emerald-600 text-white rounded-full w-8 h-8 flex items-center justify-center"
                      title="Ø§Ø³ØªÙ…Ø§Ø¹ Ù„Ù„Ø¢ÙŠØ©"
                    >
                      <lucide-volume-2 className="w-4 h-4" />
                    </button>
                    <button 
                      onClick={(e) => {
                        e.stopPropagation();
                        saveBookmark(ayah.numberInSurah);
                      }}
                      className={`${bookmark === ayah.numberInSurah ? 'bg-yellow-500' : 'bg-amber-600'} text-white rounded-full w-8 h-8 flex items-center justify-center`}
                      title="Ø¥Ø¶Ø§ÙØ© Ø¹Ù„Ø§Ù…Ø© Ù…Ø±Ø¬Ø¹ÙŠØ©"
                    >
                      <lucide-bookmark className="w-4 h-4" />
                    </button>
                    <button 
                      onClick={(e) => {
                        e.stopPropagation();
                        shareAyah(ayah.numberInSurah);
                      }}
                      className="bg-blue-600 text-white rounded-full w-8 h-8 flex items-center justify-center"
                      title="Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ø¢ÙŠØ©"
                    >
                      <lucide-share-2 className="w-4 h-4" />
                    </button>
                  </div>
                </div>
                
                {/* Arabic Text */}
                <p className="text-lg md:text-xl text-right leading-loose arabic-text">
                  {ayah.text}
                </p>
                
                {/* Translation Text */}
                {viewMode === 'translation' && getTranslation(ayah.numberInSurah) && (
                  <div className="mt-3 p-3 bg-gray-100 dark:bg-gray-800 rounded-lg">
                    <p className="text-gray-700 dark:text-gray-300" dir={
                      translationEdition.startsWith('ar') || translationEdition.startsWith('ur') ? 'rtl' : 'ltr'
                    }>
                      {getTranslation(ayah.numberInSurah)}
                    </p>
                  </div>
                )}
              </div>
            ))}
          </div>
          
          {toast && (
            <Toast 
              message={toast.message} 
              type={toast.type} 
              onClose={clearToast} 
            />
          )}
        </div>
      );
    };

    // Ø¢Ø®Ø± Ù‚Ø±Ø§Ø¡Ø© - Ù…Ø­Ø³Ù†Ø© Ù…Ø¹ Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠØ©
    const LastReading = () => {
      const [bookmark, setBookmark] = useState(null);
      const [loading, setLoading] = useState(true);
      const [error, setError] = useState(null);

      useEffect(() => {
        // Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø¢Ø®Ø± Ù‚Ø±Ø§Ø¡Ø© Ù…Ù† Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ
        try {
          setLoading(true);
          const bookmarks = JSON.parse(localStorage.getItem('quran-bookmarks')) || {};
          const surahNumbers = Object.keys(bookmarks);
          
          if (surahNumbers.length > 0) {
            // Ø¢Ø®Ø± Ø³ÙˆØ±Ø© ØªÙ…Øª Ù‚Ø±Ø§Ø¡ØªÙ‡Ø§
            const lastSurah = surahNumbers[surahNumbers.length - 1];
            const ayahNumber = bookmarks[lastSurah];
            
            // Ø¬Ù„Ø¨ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø³ÙˆØ±Ø© Ù…Ù† API
            fetch(`${APP_CONFIG.quranAPI}surah/${lastSurah}`)
              .then(response => {
                if (!response.ok) {
                  throw new Error(`ÙØ´Ù„ Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù…: ${response.status}`);
                }
                return response.json();
              })
              .then(data => {
                if (data.code === 200 && data.data) {
                  setBookmark({
                    surah: data.data,
                    ayahNumber: ayahNumber,
                    // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø¢ÙŠØ©
                    ayahText: data.data.ayahs.find(a => a.numberInSurah === ayahNumber)?.text || 'Ø¨ÙØ³Ù’Ù…Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ø§Ù„Ø±ÙÙ‘Ø­Ù’Ù…ÙÙ†Ù Ø§Ù„Ø±ÙÙ‘Ø­ÙÙŠÙ…Ù'
                  });
                }
                setLoading(false);
              })
              .catch(error => {
                console.error("Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø³ÙˆØ±Ø©:", error);
                setError("ØªØ¹Ø°Ø± Ø¬Ù„Ø¨ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø³ÙˆØ±Ø© Ø§Ù„Ø£Ø®ÙŠØ±Ø©");
                setLoading(false);
              });
          } else {
            setLoading(false);
          }
        } catch (error) {
          console.error("Ø®Ø·Ø£ ÙÙŠ Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø¢Ø®Ø± Ù‚Ø±Ø§Ø¡Ø©:", error);
          setError("ØªØ¹Ø°Ø± Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø¢Ø®Ø± Ù‚Ø±Ø§Ø¡Ø©");
          setLoading(false);
        }
      }, []);

      if (loading) {
        return (
          <div className="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 mb-10">
            <h2 className="text-xl font-bold text-emerald-800 dark:text-emerald-500 mb-4">Ø¢Ø®Ø± Ù‚Ø±Ø§Ø¡Ø©</h2>
            <div className="flex justify-center">
              <div className="w-8 h-8 border-4 border-emerald-200 border-t-emerald-600 rounded-full animate-spin"></div>
            </div>
          </div>
        );
      }

      if (error) {
        return (
          <div className="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 mb-10">
            <h2 className="text-xl font-bold text-emerald-800 dark:text-emerald-500 mb-2">Ø¢Ø®Ø± Ù‚Ø±Ø§Ø¡Ø©</h2>
            <div className="p-4 text-center text-red-600 dark:text-red-400">
              <lucide-alert-triangle className="w-6 h-6 inline ml-1" />
              {error}
            </div>
          </div>
        );
      }

      if (!bookmark) {
        return (
          <div className="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 mb-10">
            <h2 className="text-xl font-bold text-emerald-800 dark:text-emerald-500">Ø¢Ø®Ø± Ù‚Ø±Ø§Ø¡Ø©</h2>
            <div className="p-4 text-center text-gray-600 dark:text-gray-400">
              Ù„Ø§ ØªÙˆØ¬Ø¯ Ù‚Ø±Ø§Ø¡Ø© Ø³Ø§Ø¨Ù‚Ø©. Ø§Ø¨Ø¯Ø£ Ø¨Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ… Ø§Ù„Ø¢Ù†.
            </div>
          </div>
        );
      }

      return (
        <div className="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 mb-10">
          <div className="flex justify-between items-center mb-4">
            <h2 className="text-xl font-bold text-emerald-800 dark:text-emerald-500">Ø¢Ø®Ø± Ù‚Ø±Ø§Ø¡Ø©</h2>
            <button className="text-emerald-600 dark:text-emerald-400 hover:underline flex items-center">
              Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© 
              <span className="mr-1">â†</span>
            </button>
          </div>
          
          <div className="p-4 mb-3 bg-emerald-50 dark:bg-emerald-900 border border-emerald-200 dark:border-emerald-800 rounded-lg text-center">
            <p className="text-xl arabic-text">
              {bookmark.ayahText}
            </p>
          </div>
          
          <div className="flex justify-between items-center text-sm text-gray-500 dark:text-gray-400">
            <span>Ø³ÙˆØ±Ø© {bookmark.surah.name} - Ø§Ù„Ø¢ÙŠØ© {bookmark.ayahNumber}</span>
            <span>Ø¢Ø®Ø± Ù‚Ø±Ø§Ø¡Ø©: Ø§Ù„ÙŠÙˆÙ… {new Date().getHours()}:{String(new Date().getMinutes()).padStart(2, '0')}</span>
          </div>
        </div>
      );
    };

    // Ù…ÙƒÙˆÙ† ØªÙØ³ÙŠØ± Ø§Ù„Ø£Ø­Ù„Ø§Ù… - Ù…ØªÙƒØ§Ù…Ù„ Ù…Ø¹ Poe API
    const DreamInterpretationSection = () => {
      const [dreamText, setDreamText] = useState('');
      const [interpretation, setInterpretation] = useState('');
      const [isLoading, setIsLoading] = useState(false);
      const [error, setError] = useState(null);
      const [showHistory, setShowHistory] = useState(false);
      const [history, setHistory] = useState([]);
      const [toast, setToast] = useState(null);
      
      useEffect(() => {
        // Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø³Ø¬Ù„ Ø§Ù„ØªÙØ³ÙŠØ±Ø§Øª Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© Ù…Ù† Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ
        try {
          const savedHistory = JSON.parse(localStorage.getItem('dream-interpretations')) || [];
          setHistory(savedHistory);
        } catch (error) {
          console.error("Ø®Ø·Ø£ ÙÙŠ Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø³Ø¬Ù„ Ø§Ù„ØªÙØ³ÙŠØ±Ø§Øª:", error);
        }
      }, []);
      
      const saveDreamHistory = (dream, result) => {
        try {
          const newItem = {
            id: Date.now(),
            date: new Date().toISOString(),
            dream,
            result
          };
          
          const updatedHistory = [newItem, ...history].slice(0, 10); // Ø§Ù„Ø§Ø­ØªÙØ§Ø¸ Ø¨Ø¢Ø®Ø± 10 ØªÙØ³ÙŠØ±Ø§Øª ÙÙ‚Ø·
          setHistory(updatedHistory);
          localStorage.setItem('dream-interpretations', JSON.stringify(updatedHistory));
        } catch (error) {
          console.error("Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø³Ø¬Ù„ Ø§Ù„ØªÙØ³ÙŠØ±Ø§Øª:", error);
        }
      };
      
      const interpretDream = async () => {
        if (!dreamText.trim()) {
          setToast({
            message: "Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ù†Øµ Ø§Ù„Ø­Ù„Ù… Ø£ÙˆÙ„Ø§Ù‹",
            type: 'warning'
          });
          return;
        }
        
        setIsLoading(true);
        setError(null);
        
        try {
          // ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Poe API
          if (!window.Poe) {
            // Ø§Ø³ØªØ®Ø¯Ø§Ù… fallback ÙÙŠ Ø­Ø§Ù„Ø© Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Poe API
            setTimeout(() => {
              const dummyResponse = generateDummyInterpretation(dreamText);
              setInterpretation(dummyResponse);
              setIsLoading(false);
              saveDreamHistory(dreamText, dummyResponse);
            }, 2000);
            return;
          }
          
          // Use Poe Embed API to send a message to Claude
          // This will interact with the claude-3.7-sonnet bot
          await window.Poe.registerHandler("dream-handler", (result, context) => {
            const msg = result.responses[0];
            
            if (msg.status === "error") {
              setError("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªÙØ³ÙŠØ± Ø§Ù„Ø­Ù„Ù…: " + (msg.statusText || "Ø®Ø·Ø£ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ"));
              setIsLoading(false);
            } else if (msg.status === "incomplete") {
              // Update with partial content while streaming
              setInterpretation(msg.content);
            } else if (msg.status === "complete") {
              // Final content
              setInterpretation(msg.content);
              setIsLoading(false);
              // Save to history
              saveDreamHistory(dreamText, msg.content);
            }
          });
          
          // Send the dream to Claude for interpretation
          await window.Poe.sendUserMessage(
            "@Claude-3.7-Sonnet Ø£Ù†Øª Ù…ÙØ³Ø± Ø£Ø­Ù„Ø§Ù… Ø®Ø¨ÙŠØ± ÙŠØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Ø§Ù„ØªØ±Ø§Ø« Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ÙŠ ÙˆÙƒØªØ¨ ØªÙØ³ÙŠØ± Ø§Ù„Ø£Ø­Ù„Ø§Ù… Ù„Ø§Ø¨Ù† Ø³ÙŠØ±ÙŠÙ† ÙˆØ§Ù„Ù†Ø§Ø¨Ù„Ø³ÙŠ. Ø£Ø±Ø¬Ùˆ Ø£Ù† ØªÙØ³Ø± Ù‡Ø°Ø§ Ø§Ù„Ø­Ù„Ù…: " + dreamText,
            {
              handler: "dream-handler",
              stream: true,
              openChat: false
            }
          );
        } catch (error) {
          console.error("Ø®Ø·Ø£ ÙÙŠ ØªÙØ³ÙŠØ± Ø§Ù„Ø­Ù„Ù…:", error);
          setError("ØªØ¹Ø°Ø± ØªÙØ³ÙŠØ± Ø§Ù„Ø­Ù„Ù…. ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§ØªØµØ§Ù„Ùƒ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª ÙˆØ§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.");
          setIsLoading(false);
          
          // Ø§Ø³ØªØ®Ø¯Ø§Ù… fallback ÙÙŠ Ø­Ø§Ù„Ø© Ø§Ù„Ø®Ø·Ø£
          setTimeout(() => {
            const dummyResponse = generateDummyInterpretation(dreamText);
            setInterpretation(dummyResponse);
            setIsLoading(false);
            saveDreamHistory(dreamText, dummyResponse);
          }, 1000);
        }
      };
      
      // ØªÙˆÙ„ÙŠØ¯ ØªÙØ³ÙŠØ± Ø§ÙØªØ±Ø§Ø¶ÙŠ Ø¹Ù†Ø¯Ù…Ø§ ØªÙƒÙˆÙ† Poe API ØºÙŠØ± Ù…ØªØ§Ø­Ø©
      const generateDummyInterpretation = (dream) => {
        // Ù…Ø¬Ù…ÙˆØ¹Ø© Ù…Ù† Ø§Ù„ØªÙØ³ÙŠØ±Ø§Øª Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ø§Ù„ØªÙŠ ØªØªÙ†Ø§Ø³Ø¨ Ù…Ø¹ Ù…Ø®ØªÙ„Ù Ø§Ù„Ø£Ø­Ù„Ø§Ù…
        const interpretations = [
          "## ØªÙØ³ÙŠØ± Ø§Ù„Ø­Ù„Ù…\n\nÙŠØ´ÙŠØ± Ø­Ù„Ù…Ùƒ Ø¥Ù„Ù‰ ØªØºÙŠÙŠØ±Ø§Øª Ø¥ÙŠØ¬Ø§Ø¨ÙŠØ© Ù‚Ø§Ø¯Ù…Ø© ÙÙŠ Ø­ÙŠØ§ØªÙƒ. ÙˆÙÙ‚Ù‹Ø§ Ù„Ø§Ø¨Ù† Ø³ÙŠØ±ÙŠÙ†ØŒ ÙØ¥Ù† Ù‡Ø°Ù‡ Ø§Ù„Ø±Ø¤ÙŠØ§ ØªØ¯Ù„ Ø¹Ù„Ù‰ Ø§Ù„Ø±Ø²Ù‚ ÙˆØ§Ù„Ø¨Ø±ÙƒØ©ØŒ Ø®Ø§ØµØ© Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ù…Ø´Ø§Ø¹Ø± ÙÙŠ Ø§Ù„Ø­Ù„Ù… Ø¥ÙŠØ¬Ø§Ø¨ÙŠØ©.\n\n### Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© ÙÙŠ Ø§Ù„Ø­Ù„Ù…:\n\n1. **Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ù†ÙØ³ÙŠØ©**: ØªØ¹ÙƒØ³ Ø­Ø§Ù„ØªÙƒ Ø§Ù„Ù†ÙØ³ÙŠØ© ÙÙŠ Ø§Ù„Ø­Ù„Ù… Ø¬Ø§Ù†Ø¨Ù‹Ø§ Ù…Ù‡Ù…Ù‹Ø§ Ù…Ù† ØªÙØ³ÙŠØ±Ù‡\n2. **Ø§Ù„Ø³ÙŠØ§Ù‚**: Ø±Ø¨Ù…Ø§ ÙŠÙƒÙˆÙ† Ù‡Ù†Ø§Ùƒ Ø¹Ù„Ø§Ù‚Ø© Ø¨ÙŠÙ† Ø§Ù„Ø­Ù„Ù… ÙˆØ£Ø­Ø¯Ø§Ø« Ø­ÙŠØ§ØªÙƒ Ø§Ù„Ø­Ø§Ù„ÙŠØ©\n\n### Ø§Ù„Ù†ØµÙŠØ­Ø©:\nÙŠÙÙ†ØµØ­ Ø¨Ø§Ù„ØµØ¨Ø± ÙˆØ§Ù„ØªÙØ§Ø¤Ù„ØŒ ÙØ§Ù„Ø£Ù…ÙˆØ± ØªØ³ÙŠØ± Ù†Ø­Ùˆ Ø§Ù„Ø£ÙØ¶Ù„ Ø¨Ø¥Ø°Ù† Ø§Ù„Ù„Ù‡.",
          "## ØªÙØ³ÙŠØ± Ø§Ù„Ø­Ù„Ù…\n\nØ­Ø³Ø¨ ÙƒØªØ§Ø¨ ØªÙØ³ÙŠØ± Ø§Ù„Ø£Ø­Ù„Ø§Ù… Ù„Ù„Ù†Ø§Ø¨Ù„Ø³ÙŠØŒ ÙØ¥Ù† Ù‡Ø°Ø§ Ø§Ù„Ø­Ù„Ù… ÙŠØ­Ù…Ù„ Ø¯Ù„Ø§Ù„Ø§Øª Ù…ØªØ¹Ø¯Ø¯Ø©. Ù‚Ø¯ ÙŠØ´ÙŠØ± Ø¥Ù„Ù‰ ÙˆØ¬ÙˆØ¯ ØªØ­Ø¯ÙŠØ§Øª ØªÙˆØ§Ø¬Ù‡Ùƒ Ø­Ø§Ù„ÙŠÙ‹Ø§ØŒ Ù„ÙƒÙ†Ùƒ Ø³ØªØªÙ…ÙƒÙ† Ù…Ù† ØªØ¬Ø§ÙˆØ²Ù‡Ø§ Ø¨Ø¥Ø°Ù† Ø§Ù„Ù„Ù‡.\n\n### Ø±Ù…ÙˆØ² Ø§Ù„Ø­Ù„Ù…:\n\n- **Ø§Ù„Ù…Ø´Ø§Ø¹Ø±**: Ø§Ù„Ù…Ø´Ø§Ø¹Ø± Ø§Ù„ØªÙŠ Ø±Ø§ÙÙ‚Øª Ø§Ù„Ø­Ù„Ù… Ù…Ù‡Ù…Ø© Ø¬Ø¯Ù‹Ø§ ÙÙŠ ØªØ­Ø¯ÙŠØ¯ Ù…Ø¹Ù†Ø§Ù‡\n- **Ø§Ù„Ø£Ø´Ø®Ø§Øµ**: Ø§Ù„Ø£Ø´Ø®Ø§Øµ ÙÙŠ Ø§Ù„Ø­Ù„Ù… Ù‚Ø¯ ÙŠÙ…Ø«Ù„ÙˆÙ† Ø¬ÙˆØ§Ù†Ø¨ Ù…Ù† Ø´Ø®ØµÙŠØªÙƒ\n\n### Ø§Ù„Ù†ØµÙŠØ­Ø©:\nØ§Ù„Ø§Ø³ØªØºÙØ§Ø± ÙˆØ§Ù„Ø¯Ø¹Ø§Ø¡ ÙŠØ³Ø§Ø¹Ø¯Ø§Ù† Ø¹Ù„Ù‰ ØªØ­Ù‚ÙŠÙ‚ Ø§Ù„Ø®ÙŠØ± ÙˆØ¯ÙØ¹ Ø§Ù„Ù…ÙƒØ±ÙˆÙ‡.",
          "## ØªÙØ³ÙŠØ± Ø§Ù„Ø­Ù„Ù…\n\nØ°ÙƒØ± Ø§Ø¨Ù† Ø³ÙŠØ±ÙŠÙ† ÙÙŠ ÙƒØªØ§Ø¨Ù‡ Ø£Ù† Ù…Ø«Ù„ Ù‡Ø°Ø§ Ø§Ù„Ø­Ù„Ù… ÙŠÙØ¨Ø´Ø± Ø¨Ø§Ù„Ø®ÙŠØ± ÙˆØ§Ù„ÙØ±Ø¬ Ø¨Ø¹Ø¯ Ø§Ù„Ø´Ø¯Ø©. Ø§Ù„Ø±Ù…ÙˆØ² Ø§Ù„ØªÙŠ Ø¸Ù‡Ø±Øª ÙÙŠ Ø­Ù„Ù…Ùƒ ØªØ­Ù…Ù„ Ø¯Ù„Ø§Ù„Ø§Øª Ø¥ÙŠØ¬Ø§Ø¨ÙŠØ© ÙÙŠ Ø§Ù„Ù…Ø¬Ù…Ù„.\n\n### Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©:\n\n1. **Ø§Ù„Ø±Ù…Ø²ÙŠØ©**: ÙƒÙ„ Ø¹Ù†ØµØ± ÙÙŠ Ø§Ù„Ø­Ù„Ù… Ù„Ù‡ Ø¯Ù„Ø§Ù„ØªÙ‡ Ø§Ù„Ø®Ø§ØµØ©\n2. **Ø§Ù„ØªÙˆÙ‚ÙŠØª**: ØªÙˆÙ‚ÙŠØª Ø§Ù„Ø­Ù„Ù… Ù‚Ø¯ ÙŠÙƒÙˆÙ† Ù„Ù‡ Ø¹Ù„Ø§Ù‚Ø© Ø¨Ø£Ø­Ø¯Ø§Ø« Ù‚Ø±ÙŠØ¨Ø© ÙÙŠ Ø­ÙŠØ§ØªÙƒ\n\n### Ø§Ù„Ù†ØµÙŠØ­Ø©:\nØ§Ù„Ù…Ø¯Ø§ÙˆÙ…Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø¹Ù…Ø§Ù„ Ø§Ù„ØµØ§Ù„Ø­Ø© ÙˆØªÙ‚ÙˆÙŠØ© Ø§Ù„Ø¹Ù„Ø§Ù‚Ø© Ø¨Ø§Ù„Ù„Ù‡ ØªÙØªØ­ Ø£Ø¨ÙˆØ§Ø¨ Ø§Ù„Ø®ÙŠØ±.",
        ];
        
        // Ø§Ø®ØªÙŠØ§Ø± ØªÙØ³ÙŠØ± Ø¹Ø´ÙˆØ§Ø¦ÙŠ
        const randomIndex = Math.floor(Math.random() * interpretations.length);
        return interpretations[randomIndex];
      };
      
      const loadHistoryItem = (item) => {
        setDreamText(item.dream);
        setInterpretation(item.result);
        setShowHistory(false);
      };
      
      const clearHistory = () => {
        try {
          localStorage.removeItem('dream-interpretations');
          setHistory([]);
          setToast({
            message: "ØªÙ… Ù…Ø³Ø­ Ø³Ø¬Ù„ Ø§Ù„ØªÙØ³ÙŠØ±Ø§Øª Ø¨Ù†Ø¬Ø§Ø­",
            type: 'success'
          });
        } catch (error) {
          console.error("Ø®Ø·Ø£ ÙÙŠ Ù…Ø³Ø­ Ø³Ø¬Ù„ Ø§Ù„ØªÙØ³ÙŠØ±Ø§Øª:", error);
          setToast({
            message: "ØªØ¹Ø°Ø± Ù…Ø³Ø­ Ø³Ø¬Ù„ Ø§Ù„ØªÙØ³ÙŠØ±Ø§Øª",
            type: 'error'
          });
        }
      };
      
      const clearToast = () => {
        setToast(null);
      };
      
      const formatDate = (dateString) => {
        const date = new Date(dateString);
        return `${date.toLocaleDateString('ar-SA')} - ${date.toLocaleTimeString('ar-SA', { hour: '2-digit', minute: '2-digit' })}`;
      };
      
      return (
        <div className="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4">
          <div className="border-b border-gray-300 dark:border-gray-700 pb-3 mb-4">
            <h2 className="text-2xl font-bold text-center text-emerald-800 dark:text-emerald-500">
              ØªÙØ³ÙŠØ± Ø§Ù„Ø£Ø­Ù„Ø§Ù…
            </h2>
            <p className="text-center text-gray-600 dark:text-gray-400">
              Ø§ÙƒØªØ¨ Ø­Ù„Ù…Ùƒ ÙˆØ³Ù†Ù‚ÙˆÙ… Ø¨ØªÙØ³ÙŠØ±Ù‡ ÙˆÙÙ‚Ù‹Ø§ Ù„Ù„ØªØ±Ø§Ø« Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ÙŠ ÙˆÙƒØªØ¨ Ø§Ø¨Ù† Ø³ÙŠØ±ÙŠÙ† ÙˆØ§Ù„Ù†Ø§Ø¨Ù„Ø³ÙŠ
            </p>
          </div>
          
          <div className="mb-6">
            <label htmlFor="dream-text" className="block text-gray-700 dark:text-gray-300 font-medium mb-2">
              ÙˆØµÙ Ø§Ù„Ø­Ù„Ù…:
            </label>
            <textarea 
              id="dream-text"
              value={dreamText}
              onChange={(e) => setDreamText(e.target.value)}
              placeholder="Ø§ÙƒØªØ¨ ÙˆØµÙÙ‹Ø§ ØªÙØµÙŠÙ„ÙŠÙ‹Ø§ Ù„Ø­Ù„Ù…Ùƒ Ù‡Ù†Ø§..."
              className="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg dream-input focus:outline-none focus:ring-2 focus:ring-emerald-500 dark:bg-gray-700 dark:text-white text-base"
              rows={5}
              dir="rtl"
            ></textarea>
          </div>
          
          <div className="flex flex-wrap justify-between gap-2 mb-6">
            <button 
              onClick={interpretDream}
              disabled={isLoading || !dreamText.trim()}
              className={`px-4 py-2 rounded-lg ${
                isLoading || !dreamText.trim() ? 
                'bg-gray-400 dark:bg-gray-700 cursor-not-allowed' : 
                'bg-emerald-600 hover:bg-emerald-700 text-white'
              }`}
            >
              {isLoading ? 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙØ³ÙŠØ±...' : 'ØªÙØ³ÙŠØ± Ø§Ù„Ø­Ù„Ù…'}
            </button>
            
            <div className="flex gap-2">
              <button 
                onClick={() => setShowHistory(!showHistory)}
                className="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg"
              >
                {showHistory ? 'Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø³Ø¬Ù„' : 'Ø§Ù„Ø³Ø¬Ù„ Ø§Ù„Ø³Ø§Ø¨Ù‚'}
                <span className="inline-flex justify-center items-center ml-1 w-5 h-5 text-xs bg-white text-blue-700 rounded-full">{history.length}</span>
              </button>
              
              <button 
                onClick={() => {
                  setDreamText('');
                  setInterpretation('');
                }}
                className="px-4 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded-lg"
              >
                Ù…Ø³Ø­ Ø§Ù„Ù†Øµ
              </button>
            </div>
          </div>
          
          {error && (
            <div className="mb-6 p-4 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded-lg">
              <lucide-alert-triangle className="w-5 h-5 inline ml-2" />
              {error}
            </div>
          )}
          
          {showHistory ? (
            <div className="mb-6">
              <div className="flex justify-between items-center mb-4">
                <h3 className="text-lg font-bold text-emerald-700 dark:text-emerald-400">Ø³Ø¬Ù„ Ø§Ù„ØªÙØ³ÙŠØ±Ø§Øª Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©</h3>
                {history.length > 0 && (
                  <button 
                    onClick={clearHistory}
                    className="text-red-600 dark:text-red-400 hover:underline text-sm"
                  >
                    Ù…Ø³Ø­ Ø§Ù„Ø³Ø¬Ù„
                  </button>
                )}
              </div>
              
              {history.length > 0 ? (
                <div className="space-y-3">
                  {history.map(item => (
                    <div 
                      key={item.id}
                      className="p-3 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer"
                      onClick={() => loadHistoryItem(item)}
                    >
                      <div className="flex justify-between mb-2">
                        <div className="font-medium text-emerald-700 dark:text-emerald-400 truncate max-w-[70%]">
                          {item.dream.length > 60 ? item.dream.substring(0, 60) + '...' : item.dream}
                        </div>
                        <div className="text-sm text-gray-500 dark:text-gray-400">
                          {formatDate(item.date)}
                        </div>
                      </div>
                      <div className="text-sm text-gray-600 dark:text-gray-300 line-clamp-2">
                        {item.result.substring(0, 100)}...
                      </div>
                    </div>
                  ))}
                </div>
              ) : (
                <div className="text-center p-4 bg-gray-50 dark:bg-gray-700 rounded-lg">
                  <p className="text-gray-600 dark:text-gray-400">
                    Ù„Ø§ ØªÙˆØ¬Ø¯ ØªÙØ³ÙŠØ±Ø§Øª Ø³Ø§Ø¨Ù‚Ø©
                  </p>
                </div>
              )}
            </div>
          ) : interpretation ? (
            <div className="mb-6">
              <h3 className="text-lg font-bold text-emerald-700 dark:text-emerald-400 mb-3">ØªÙØ³ÙŠØ± Ø§Ù„Ø­Ù„Ù…:</h3>
              <div 
                className="p-4 bg-amber-50 dark:bg-amber-900 rounded-lg text-gray-800 dark:text-gray-200 border border-amber-200 dark:border-amber-800" 
                dangerouslySetInnerHTML={{ __html: marked.parse(interpretation) }}
              ></div>
              
              <div className="mt-4 p-3 bg-blue-50 dark:bg-blue-900 text-blue-700 dark:text-blue-300 rounded-lg text-sm">
                <lucide-info className="w-5 h-5 inline ml-2" />
                Ù‡Ø°Ø§ Ø§Ù„ØªÙØ³ÙŠØ± Ø§Ø³ØªÙ†Ø§Ø¯Ù‹Ø§ Ø¥Ù„Ù‰ Ø§Ù„ØªØ±Ø§Ø« Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ÙŠ ÙˆÙƒØªØ¨ ØªÙØ³ÙŠØ± Ø§Ù„Ø£Ø­Ù„Ø§Ù…. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø¹Ù„Ù… Ø£Ù† Ø§Ù„ØªÙØ³ÙŠØ± Ù‚Ø¯ ÙŠØ®ØªÙ„Ù ÙˆÙÙ‚Ù‹Ø§ Ù„Ù„Ø¸Ø±ÙˆÙ Ø§Ù„Ø´Ø®ØµÙŠØ© ÙˆØ§Ù„Ø³ÙŠØ§Ù‚.
              </div>
            </div>
          ) : isLoading ? (
            <div className="mb-6 p-6 bg-gray-50 dark:bg-gray-700 rounded-lg">
              <div className="flex flex-col items-center justify-center">
                <div className="w-10 h-10 border-4 border-emerald-200 border-t-emerald-600 rounded-full animate-spin mb-4"></div>
                <div className="text-gray-600 dark:text-gray-400">Ø¬Ø§Ø±ÙŠ ØªÙØ³ÙŠØ± Ø§Ù„Ø­Ù„Ù…...</div>
              </div>
            </div>
          ) : (
            <div className="mb-6 p-6 bg-gray-50 dark:bg-gray-700 rounded-lg text-center">
              <lucide-moon className="w-12 h-12 mx-auto mb-3 text-emerald-600 dark:text-emerald-400" />
              <h3 className="text-lg font-medium text-gray-700 dark:text-gray-300 mb-2">Ø§ÙƒØªØ¨ Ø­Ù„Ù…Ùƒ Ù„ÙŠØªÙ… ØªÙØ³ÙŠØ±Ù‡</h3>
              <p className="text-gray-600 dark:text-gray-400">
                ÙƒÙ„Ù…Ø§ ÙƒØ§Ù† ÙˆØµÙ Ø§Ù„Ø­Ù„Ù… Ø£ÙƒØ«Ø± ØªÙØµÙŠÙ„Ø§Ù‹ØŒ ÙƒØ§Ù† Ø§Ù„ØªÙØ³ÙŠØ± Ø£ÙƒØ«Ø± Ø¯Ù‚Ø©
              </p>
            </div>
          )}
          
          <div className="bg-emerald-50 dark:bg-emerald-900 p-4 rounded-lg">
            <h3 className="font-bold text-emerald-800 dark:text-emerald-400 mb-2">Ù†ØµØ§Ø¦Ø­ Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ØªÙØ³ÙŠØ± Ø£ÙØ¶Ù„:</h3>
            <ul className="list-disc list-inside text-gray-700 dark:text-gray-300 space-y-1">
              <li>Ø§Ø°ÙƒØ± ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø­Ù„Ù… Ø¨ÙˆØ¶ÙˆØ­ ÙˆØ¯Ù‚Ø©</li>
              <li>Ø­Ø¯Ø¯ Ù…Ø´Ø§Ø¹Ø±Ùƒ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø­Ù„Ù… ÙˆØ¨Ø¹Ø¯Ù‡</li>
              <li>Ø§Ø°ÙƒØ± Ø£ÙŠ Ø±Ù…ÙˆØ² Ø£Ùˆ Ø£Ø´Ø®Ø§Øµ Ø¸Ù‡Ø±ÙˆØ§ ÙÙŠ Ø§Ù„Ø­Ù„Ù…</li>
              <li>Ø­Ø¯Ø¯ Ø¥Ø°Ø§ ÙƒØ§Ù† Ù‡Ù†Ø§Ùƒ Ø£Ø­Ø¯Ø§Ø« Ù…ØªÙƒØ±Ø±Ø© ÙÙŠ Ø­ÙŠØ§ØªÙƒ Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ø§Ù„Ø­Ù„Ù…</li>
              <li>Ø°ÙƒÙ‘Ø± Ù†ÙØ³Ùƒ Ø£Ù† Ø§Ù„ØªÙØ³ÙŠØ± Ù‚Ø¯ ÙŠØ®ØªÙ„Ù ÙˆÙÙ‚Ù‹Ø§ Ù„Ù„Ø¸Ø±ÙˆÙ Ø§Ù„Ø´Ø®ØµÙŠØ©</li>
            </ul>
          </div>
          
          {toast && (
            <Toast 
              message={toast.message} 
              type={toast.type} 
              onClose={clearToast} 
            />
          )}
        </div>
      );
    };

    // Ù…ÙƒÙˆÙ† Ù‚Ø³Ù… Ø§Ù„Ø­Ø¬ ÙˆØ§Ù„Ø¹Ù…Ø±Ø© - Ù…Ø¹ Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„ÙˆØ§Ø¬Ù‡Ø§Øª Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠØ©
    const HajjUmrahSection = () => {
      const [activeTab, setActiveTab] = useState('overview');
      const [showMap, setShowMap] = useState(false);
      const [hajjData, setHajjData] = useState(null);
      const [loading, setLoading] = useState(false);
      const [error, setError] = useState(null);
      const [toast, setToast] = useState(null);
      
      // Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø¬ Ù…Ù† API (ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙˆØ³Ù… Ø§Ù„Ù‚Ø§Ø¯Ù…ØŒ Ø£Ø®Ø¨Ø§Ø±ØŒ Ø¥Ù„Ø®)
      useEffect(() => {
        fetchHajjData();
      }, []);
      
      const fetchHajjData = async () => {
        setLoading(true);
        setError(null);
        
        try {
          // ÙÙŠ Ø§Ù„ÙˆØ§Ù‚Ø¹ Ø§Ù„ÙØ¹Ù„ÙŠØŒ Ø³ØªÙƒÙˆÙ† Ù‡Ø°Ù‡ Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ù€ API Ø®Ø§Ø±Ø¬ÙŠ. Ù†Ø³ØªØ®Ø¯Ù… Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø¶Ù…Ù†Ø© Ù„Ù‡Ø°Ø§ Ø§Ù„Ù…Ø«Ø§Ù„
          // Ù‡Ø°Ù‡ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø³ØªÙƒÙˆÙ† Ù…ØªØµÙ„Ø© Ø¨Ù€ API Ø®Ø§Ø±Ø¬ÙŠ ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ
          setTimeout(() => {
            setHajjData({
              nextHajjDate: "14 ÙŠÙˆÙ†ÙŠÙˆ 2025",
              registrationDate: "1 ÙŠÙ†Ø§ÙŠØ± 2025",
              umrahAvailability: "Ù…ØªØ§Ø­Ø© Ø·ÙˆØ§Ù„ Ø§Ù„Ø¹Ø§Ù…",
              packageProviders: 15,
              lastUpdate: new Date().toISOString(),
              news: [
                "Ø¨Ø¯Ø¡ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ù„Ù„Ø­Ø¬ Ù„Ù„Ø¹Ø§Ù… 1446Ù‡Ù€ ÙÙŠ ÙŠÙ†Ø§ÙŠØ± 2025",
                "Ø¥Ø·Ù„Ø§Ù‚ ØªØ·Ø¨ÙŠÙ‚ Ø¬Ø¯ÙŠØ¯ Ù„Ø®Ø¯Ù…Ø© Ø§Ù„Ø­Ø¬Ø§Ø¬ ÙˆØ§Ù„Ù…Ø¹ØªÙ…Ø±ÙŠÙ†",
                "Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø¬Ø¯ÙŠØ¯Ø© Ù„ØªØ³Ù‡ÙŠÙ„ ØªÙ†Ù‚Ù„ Ø§Ù„Ø­Ø¬Ø§Ø¬ Ø¨ÙŠÙ† Ø§Ù„Ù…Ø´Ø§Ø¹Ø± Ø§Ù„Ù…Ù‚Ø¯Ø³Ø©"
              ]
            });
            setLoading(false);
          }, 1000);
        } catch (error) {
          console.error("Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø¬:", error);
          setError("ØªØ¹Ø°Ø± Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø¬ ÙˆØ§Ù„Ø¹Ù…Ø±Ø©. ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§ØªØµØ§Ù„Ùƒ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª ÙˆØ§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.");
          setLoading(false);
        }
      };
      
      const clearToast = () => {
        setToast(null);
      };
      
      // Ù‡Ø°Ù‡ Ù†Ø³Ø®Ø© Ù…Ù† Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ù…Ø¹ Ø¯Ø¹Ù… Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­ÙŠØ©
      const getHajjContent = () => {
        if (loading) {
          return <LoadingSpinner text="Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø¬ ÙˆØ§Ù„Ø¹Ù…Ø±Ø©..." />;
        }
        
        if (error) {
          return (
            <ErrorDisplay 
              error={error} 
              onRetry={fetchHajjData} 
              retryText="Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª"
            />
          );
        }
        
        return (
          <div>
            <h3 className="text-xl font-bold text-emerald-700 dark:text-emerald-400 mb-4">Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©</h3>
            
            <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
              <div className="bg-white dark:bg-gray-700 p-4 rounded-lg shadow">
                <h4 className="text-lg font-bold text-emerald-600 dark:text-emerald-400 mb-3">Ø§Ù„Ø­Ø¬</h4>
                <p className="text-gray-700 dark:text-gray-300 mb-4">
                  Ø§Ù„Ø­Ø¬ Ù‡Ùˆ Ø§Ù„Ø±ÙƒÙ† Ø§Ù„Ø®Ø§Ù…Ø³ Ù…Ù† Ø£Ø±ÙƒØ§Ù† Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ØŒ ÙˆÙ‡Ùˆ ÙØ±ÙŠØ¶Ø© Ø¹Ù„Ù‰ ÙƒÙ„ Ù…Ø³Ù„Ù… Ø¨Ø§Ù„Øº Ø¹Ø§Ù‚Ù„ Ù‚Ø§Ø¯Ø± Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø© ÙÙŠ Ø§Ù„Ø¹Ù…Ø±. ÙŠØ¤Ø¯Ù‰ ÙÙŠ Ø´Ù‡Ø± Ø°ÙŠ Ø§Ù„Ø­Ø¬Ø© Ù…Ù† ÙƒÙ„ Ø¹Ø§Ù… Ù‡Ø¬Ø±ÙŠ.
                </p>
                <div className="flex justify-between items-center">
                  <span className="text-gray-600 dark:text-gray-400">Ù…ÙˆØ³Ù… Ø§Ù„Ø­Ø¬ Ø§Ù„Ù‚Ø§Ø¯Ù…:</span>
                  <span className="bg-emerald-100 dark:bg-emerald-900 text-emerald-800 dark:text-emerald-200 px-3 py-1 rounded-full font-bold">
                    {hajjData?.nextHajjDate || "ØºÙŠØ± Ù…ØªÙˆÙØ±"}
                  </span>
                </div>
                {hajjData?.registrationDate && (
                  <div className="flex justify-between items-center mt-2">
                    <span className="text-gray-600 dark:text-gray-400">Ø¨Ø¯Ø¡ Ø§Ù„ØªØ³Ø¬ÙŠÙ„:</span>
                    <span className="bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 px-3 py-1 rounded-full font-bold">
                      {hajjData.registrationDate}
                    </span>
                  </div>
                )}
              </div>
              
              <div className="bg-white dark:bg-gray-700 p-4 rounded-lg shadow">
                <h4 className="text-lg font-bold text-emerald-600 dark:text-emerald-400 mb-3">Ø§Ù„Ø¹Ù…Ø±Ø©</h4>
                <p className="text-gray-700 dark:text-gray-300 mb-4">
                  Ø§Ù„Ø¹Ù…Ø±Ø© Ù‡ÙŠ Ø²ÙŠØ§Ø±Ø© Ø¨ÙŠØª Ø§Ù„Ù„Ù‡ Ø§Ù„Ø­Ø±Ø§Ù… ÙˆØ£Ø¯Ø§Ø¡ Ù…Ù†Ø§Ø³Ùƒ Ù…Ø¹ÙŠÙ†Ø©. ÙˆÙ‡ÙŠ Ø³Ù†Ø© Ù…Ø¤ÙƒØ¯Ø© ÙŠÙ…ÙƒÙ† Ø£Ø¯Ø§Ø¤Ù‡Ø§ ÙÙŠ Ø£ÙŠ ÙˆÙ‚Øª Ù…Ù† Ø§Ù„Ø¹Ø§Ù…ØŒ Ø¹Ø¯Ø§ Ø£ÙŠØ§Ù… Ø§Ù„Ø­Ø¬ Ù„Ù„Ø­Ø§Ø¬ Ù†ÙØ³Ù‡.
                </p>
                <div className="flex justify-between items-center">
                  <span className="text-gray-600 dark:text-gray-400">Ù…ØªØ§Ø­Ø©:</span>
                  <span className="bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 px-3 py-1 rounded-full font-bold">
                    {hajjData?.umrahAvailability || "Ø·ÙˆØ§Ù„ Ø§Ù„Ø¹Ø§Ù…"}
                  </span>
                </div>
                {hajjData?.packageProviders && (
                  <div className="flex justify-between items-center mt-2">
                    <span className="text-gray-600 dark:text-gray-400">Ù…Ù‚Ø¯Ù…ÙŠ Ø§Ù„Ø®Ø¯Ù…Ø©:</span>
                    <span className="bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 px-3 py-1 rounded-full font-bold">
                      {hajjData.packageProviders} Ø´Ø±ÙƒØ© Ù…Ø¹ØªÙ…Ø¯Ø©
                    </span>
                  </div>
                )}
              </div>
            </div>
            
            {/* Ø¢Ø®Ø± Ø§Ù„Ø£Ø®Ø¨Ø§Ø± */}
            {hajjData?.news && hajjData.news.length > 0 && (
              <div className="mb-6 bg-blue-50 dark:bg-blue-900 p-4 rounded-lg">
                <h4 className="text-lg font-bold text-blue-700 dark:text-blue-300 mb-3">Ø¢Ø®Ø± Ø§Ù„Ø£Ø®Ø¨Ø§Ø±</h4>
                <ul className="space-y-2">
                  {hajjData.news.map((item, index) => (
                    <li key={index} className="flex items-start">
                      <lucide-info className="w-5 h-5 mt-0.5 ml-2 text-blue-600 dark:text-blue-400" />
                      <span className="text-gray-800 dark:text-gray-200">{item}</span>
                    </li>
                  ))}
                </ul>
                {hajjData.lastUpdate && (
                  <div className="mt-3 text-xs text-gray-500 dark:text-gray-400 text-left">
                    Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«: {new Date(hajjData.lastUpdate).toLocaleDateString('ar-SA', { year: 'numeric', month: 'long', day: 'numeric' })}
                  </div>
                )}
              </div>
            )}
            
            <div className="flex justify-center mb-6">
              <button 
                onClick={() => setShowMap(!showMap)}
                className="bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-lg flex items-center"
              >
                <lucide-map className="w-5 h-5 ml-2" />
                {showMap ? 'Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø®Ø±ÙŠØ·Ø©' : 'Ø¹Ø±Ø¶ Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ù…Ø´Ø§Ø¹Ø± Ø§Ù„Ù…Ù‚Ø¯Ø³Ø©'}
              </button>
            </div>
            
            {showMap && (
              <div className="mb-8">
                <div className="hajj-map-container relative">
                  <div className="absolute inset-0 flex flex-col items-center justify-center">
                    <div className="mushaf-frame p-2 rounded-lg w-3/4">
                      <div className="relative bg-white dark:bg-gray-800 p-1 flex flex-col items-center justify-center rounded">
                        <div className="text-center p-4">
                          <lucide-map className="w-12 h-12 mx-auto mb-2 text-emerald-600" />
                          <h3 className="text-lg font-bold mb-2">Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ù…Ø´Ø§Ø¹Ø± Ø§Ù„Ù…Ù‚Ø¯Ø³Ø©</h3>
                          <p className="text-sm text-gray-600 dark:text-gray-400">
                            Ù…Ø­Ø§ÙƒØ§Ø© Ù„Ù„Ø®Ø±ÙŠØ·Ø© - Ù‡Ù†Ø§ Ø³ÙŠØªÙ… Ø¹Ø±Ø¶ Ø®Ø±ÙŠØ·Ø© ØªÙØ§Ø¹Ù„ÙŠØ© Ù„Ù„Ù…Ø´Ø§Ø¹Ø± Ø§Ù„Ù…Ù‚Ø¯Ø³Ø©
                          </p>
                        </div>
                        
                        <div className="grid grid-cols-3 gap-2 p-3 w-full text-center">
                          <div className="bg-amber-100 dark:bg-amber-900 p-2 rounded">
                            <strong className="text-amber-800 dark:text-amber-200">Ø§Ù„ÙƒØ¹Ø¨Ø©</strong>
                          </div>
                          <div className="bg-emerald-100 dark:bg-emerald-900 p-2 rounded">
                            <strong className="text-emerald-800 dark:text-emerald-200">Ù…Ù†Ù‰</strong>
                          </div>
                          <div className="bg-blue-100 dark:bg-blue-900 p-2 rounded">
                            <strong className="text-blue-800 dark:text-blue-200">Ø¹Ø±ÙØ§Øª</strong>
                          </div>
                          <div className="bg-purple-100 dark:bg-purple-900 p-2 rounded">
                            <strong className="text-purple-800 dark:text-purple-200">Ù…Ø²Ø¯Ù„ÙØ©</strong>
                          </div>
                          <div className="bg-red-100 dark:bg-red-900 p-2 rounded">
                            <strong className="text-red-800 dark:text-red-200">Ø§Ù„ØµÙØ§ ÙˆØ§Ù„Ù…Ø±ÙˆØ©</strong>
                          </div>
                          <div className="bg-gray-100 dark:bg-gray-600 p-2 rounded">
                            <strong className="text-gray-800 dark:text-gray-200">Ø§Ù„Ø¬Ù…Ø±Ø§Øª</strong>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                
                <div className="mt-4 p-3 bg-blue-50 dark:bg-blue-900 text-blue-700 dark:text-blue-300 rounded-lg text-sm">
                  <lucide-info className="w-5 h-5 inline ml-2" />
                  ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙƒØ§Ù…Ù„ØŒ Ø³ØªÙƒÙˆÙ† Ù‡Ø°Ù‡ Ø®Ø±ÙŠØ·Ø© ØªÙØ§Ø¹Ù„ÙŠØ© Ù„Ù„Ù…Ø´Ø§Ø¹Ø± Ø§Ù„Ù…Ù‚Ø¯Ø³Ø© Ù…Ø¹ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª ØªÙØµÙŠÙ„ÙŠØ© Ø¹Ù† ÙƒÙ„ Ù…ÙˆÙ‚Ø¹.
                </div>
              </div>
            )}
            
            <div className="bg-gradient-to-r from-emerald-700 to-emerald-900 p-6 rounded-lg text-white mb-6">
              <h3 className="text-xl font-bold mb-3">Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø­Ø¬ ÙˆØ§Ù„Ø¹Ù…Ø±Ø© Ø§Ù„Ù…Ù‚Ø¯Ù…Ø©:</h3>
              <ul className="grid grid-cols-1 md:grid-cols-2 gap-3">
                <li className="flex items-center">
                  <lucide-check-circle className="w-5 h-5 ml-2 text-emerald-300" />
                  Ø¯Ù„ÙŠÙ„ ØªÙØµÙŠÙ„ÙŠ Ù„Ù…Ù†Ø§Ø³Ùƒ Ø§Ù„Ø­Ø¬ ÙˆØ§Ù„Ø¹Ù…Ø±Ø©
                </li>
                <li className="flex items-center">
                  <lucide-check-circle className="w-5 h-5 ml-2 text-emerald-300" />
                  Ø§Ù„Ø£Ø¯Ø¹ÙŠØ© Ø§Ù„Ù…Ø£Ø«ÙˆØ±Ø© Ù„ÙƒÙ„ Ù…ÙˆÙ‚Ù
                </li>
                <li className="flex items-center">
                  <lucide-check-circle className="w-5 h-5 ml-2 text-emerald-300" />
                  Ø®Ø±Ø§Ø¦Ø· ØªÙØ§Ø¹Ù„ÙŠØ© Ù„Ù„Ù…Ø´Ø§Ø¹Ø± Ø§Ù„Ù…Ù‚Ø¯Ø³Ø©
                </li>
                <li className="flex items-center">
                  <lucide-check-circle className="w-5 h-5 ml-2 text-emerald-300" />
                  Ù‚Ø§Ø¦Ù…Ø© Ø¨Ø´Ø±ÙƒØ§Øª Ø§Ù„Ø­Ø¬ ÙˆØ§Ù„Ø¹Ù…Ø±Ø© Ø§Ù„Ù…Ø¹ØªÙ…Ø¯Ø©
                </li>
                <li className="flex items-center">
                  <lucide-check-circle className="w-5 h-5 ml-2 text-emerald-300" />
                  Ù†ØµØ§Ø¦Ø­ ØµØ­ÙŠØ© Ù„Ù„Ø­Ø¬Ø§Ø¬ ÙˆØ§Ù„Ù…Ø¹ØªÙ…Ø±ÙŠÙ†
                </li>
                <li className="flex items-center">
                  <lucide-check-circle className="w-5 h-5 ml-2 text-emerald-300" />
                  Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø¨Ù…ÙˆØ§Ø¹ÙŠØ¯ ÙØªØ­ Ø§Ù„ØªØ³Ø¬ÙŠÙ„
                </li>
              </ul>
            </div>
            
            <div className="text-center">
              <button 
                onClick={() => setActiveTab('hajj')}
                className="bg-emerald-600 hover:bg-emerald-700 text-white px-6 py-3 rounded-lg mx-2"
              >
                Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø­Ø¬
              </button>
              <button 
                onClick={() => setActiveTab('umrah')}
                className="bg-emerald-600 hover:bg-emerald-700 text-white px-6 py-3 rounded-lg mx-2"
              >
                Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø¹Ù…Ø±Ø©
              </button>
            </div>
          </div>
        );
      };
      
      // Ù…Ø­ØªÙˆÙŠØ§Øª Ø¹Ù„Ø§Ù…Ø§Øª Ø§Ù„ØªØ¨ÙˆÙŠØ¨
      const tabContents = {
        overview: getHajjContent(),
        
        hajj: (
          <div>
            <h3 className="text-xl font-bold text-emerald-700 dark:text-emerald-400 mb-4">Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø­Ø¬</h3>
            
            <div className="space-y-6 mb-8">
              <div className="bg-white dark:bg-gray-700 p-4 rounded-lg shadow">
                <h4 className="text-lg font-bold text-emerald-600 dark:text-emerald-400 mb-2 flex items-center">
                  <span className="inline-flex justify-center items-center mr-2 w-6 h-6 bg-emerald-600 text-white rounded-full">1</span>
                  Ø§Ù„Ø¥Ø­Ø±Ø§Ù…
                </h4>
                <p className="text-gray-700 dark:text-gray-300 mb-2">
                  ÙŠØ¨Ø¯Ø£ Ø§Ù„Ø­Ø¬ Ø¨Ø§Ù„Ø¥Ø­Ø±Ø§Ù… Ù…Ù† Ø§Ù„Ù…ÙŠÙ‚Ø§Øª. ÙŠØºØªØ³Ù„ Ø§Ù„Ø­Ø§Ø¬ ÙˆÙŠÙ„Ø¨Ø³ Ø«ÙŠØ§Ø¨ Ø§Ù„Ø¥Ø­Ø±Ø§Ù… (Ø¥Ø²Ø§Ø±Ù‹Ø§ ÙˆØ±Ø¯Ø§Ø¡Ù‹) Ù„Ù„Ø±Ø¬Ø§Ù„ØŒ ÙˆØªØ±ØªØ¯ÙŠ Ø§Ù„Ù…Ø±Ø£Ø© Ø«ÙŠØ§Ø¨Ù‹Ø§ Ø³Ø§ØªØ±Ø©. ÙŠÙÙ†ÙˆÙŠ Ø§Ù„Ø­Ø¬ Ù‚Ø§Ø¦Ù„Ù‹Ø§: "Ù„Ø¨ÙŠÙƒ Ø§Ù„Ù„Ù‡Ù… Ø­Ø¬Ù‹Ø§".
                </p>
                <div className="p-3 bg-emerald-50 dark:bg-emerald-900 text-emerald-800 dark:text-emerald-200 rounded">
                  <strong>Ø§Ù„ØªÙ„Ø¨ÙŠØ©:</strong> Ù„Ø¨ÙŠÙƒ Ø§Ù„Ù„Ù‡Ù… Ù„Ø¨ÙŠÙƒØŒ Ù„Ø¨ÙŠÙƒ Ù„Ø§ Ø´Ø±ÙŠÙƒ Ù„Ùƒ Ù„Ø¨ÙŠÙƒØŒ Ø¥Ù† Ø§Ù„Ø­Ù…Ø¯ ÙˆØ§Ù„Ù†Ø¹Ù…Ø© Ù„Ùƒ ÙˆØ§Ù„Ù…Ù„ÙƒØŒ Ù„Ø§ Ø´Ø±ÙŠÙƒ Ù„Ùƒ.
                </div>
              </div>
              
              <div className="bg-white dark:bg-gray-700 p-4 rounded-lg shadow">
                <h4 className="text-lg font-bold text-emerald-600 dark:text-emerald-400 mb-2 flex items-center">
                  <span className="inline-flex justify-center items-center mr-2 w-6 h-6 bg-emerald-600 text-white rounded-full">2</span>
                  Ø§Ù„Ø·ÙˆØ§Ù
                </h4>
                <p className="text-gray-700 dark:text-gray-300 mb-4">
                  ÙŠØ·ÙˆÙ Ø§Ù„Ø­Ø§Ø¬ Ø­ÙˆÙ„ Ø§Ù„ÙƒØ¹Ø¨Ø© Ø³Ø¨Ø¹Ø© Ø£Ø´ÙˆØ§Ø· Ø¨Ø§Ø¯Ø¦Ù‹Ø§ Ù…Ù† Ø§Ù„Ø­Ø¬Ø± Ø§Ù„Ø£Ø³ÙˆØ¯ØŒ Ù…ÙƒØ¨Ø±Ù‹Ø§ ÙˆÙ…ÙÙ‡Ù„Ù„Ù‹Ø§ØŒ Ø«Ù… ÙŠØµÙ„ÙŠ Ø±ÙƒØ¹ØªÙŠÙ† Ø®Ù„Ù Ù…Ù‚Ø§Ù… Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ….
                </p>
              </div>
              
              <div className="bg-white dark:bg-gray-700 p-4 rounded-lg shadow">
                <h4 className="text-lg font-bold text-emerald-600 dark:text-emerald-400 mb-2 flex items-center">
                  <span className="inline-flex justify-center items-center mr-2 w-6 h-6 bg-emerald-600 text-white rounded-full">3</span>
                  Ø§Ù„Ø³Ø¹ÙŠ
                </h4>
                <p className="text-gray-700 dark:text-gray-300 mb-4">
                  ÙŠØ³Ø¹Ù‰ Ø§Ù„Ø­Ø§Ø¬ Ø¨ÙŠÙ† Ø§Ù„ØµÙØ§ ÙˆØ§Ù„Ù…Ø±ÙˆØ© Ø³Ø¨Ø¹Ø© Ø£Ø´ÙˆØ§Ø·ØŒ Ø¨Ø§Ø¯Ø¦Ù‹Ø§ Ù…Ù† Ø§Ù„ØµÙØ§ØŒ ÙŠØ¯Ø¹Ùˆ ÙˆÙŠÙƒØ¨ÙÙ‘Ø± Ø¹Ù„Ù‰ ÙƒÙ„ Ù…Ù† Ø§Ù„ØµÙØ§ ÙˆØ§Ù„Ù…Ø±ÙˆØ©.
                </p>
              </div>
              
              <div className="bg-white dark:bg-gray-700 p-4 rounded-lg shadow">
                <h4 className="text-lg font-bold text-emerald-600 dark:text-emerald-400 mb-2 flex items-center">
                  <span className="inline-flex justify-center items-center mr-2 w-6 h-6 bg-emerald-600 text-white rounded-full">4</span>
                  Ø§Ù„ÙˆÙ‚ÙˆÙ Ø¨Ø¹Ø±ÙØ©
                </h4>
                <p className="text-gray-700 dark:text-gray-300 mb-4">
                  ÙÙŠ Ø§Ù„ÙŠÙˆÙ… Ø§Ù„ØªØ§Ø³Ø¹ Ù…Ù† Ø°ÙŠ Ø§Ù„Ø­Ø¬Ø©ØŒ ÙŠÙ‚Ù Ø§Ù„Ø­Ø§Ø¬ Ø¨Ø¹Ø±ÙØ© Ù…Ù† Ø²ÙˆØ§Ù„ Ø§Ù„Ø´Ù…Ø³ Ø¥Ù„Ù‰ ØºØ±ÙˆØ¨Ù‡Ø§. ÙˆÙ‡Ùˆ Ø±ÙƒÙ† Ø§Ù„Ø­Ø¬ Ø§Ù„Ø£Ø¹Ø¸Ù…ØŒ ÙŠÙƒØ«Ø± ÙÙŠÙ‡ Ù…Ù† Ø§Ù„Ø¯Ø¹Ø§Ø¡ ÙˆØ§Ù„ØªØ¶Ø±Ø¹.
                </p>
              </div>
              
              <div className="bg-white dark:bg-gray-700 p-4 rounded-lg shadow">
                <h4 className="text-lg font-bold text-emerald-600 dark:text-emerald-400 mb-2 flex items-center">
                  <span className="inline-flex justify-center items-center mr-2 w-6 h-6 bg-emerald-600 text-white rounded-full">5</span>
                  Ø§Ù„Ù…Ø¨ÙŠØª Ø¨Ù…Ø²Ø¯Ù„ÙØ©
                </h4>
                <p className="text-gray-700 dark:text-gray-300 mb-4">
                  Ø¨Ø¹Ø¯ ØºØ±ÙˆØ¨ Ø´Ù…Ø³ ÙŠÙˆÙ… Ø¹Ø±ÙØ©ØŒ ÙŠØªÙˆØ¬Ù‡ Ø§Ù„Ø­Ø§Ø¬ Ø¥Ù„Ù‰ Ù…Ø²Ø¯Ù„ÙØ©ØŒ ÙŠØµÙ„ÙŠ Ø¨Ù‡Ø§ Ø§Ù„Ù…ØºØ±Ø¨ ÙˆØ§Ù„Ø¹Ø´Ø§Ø¡ Ø¬Ù…Ø¹Ù‹Ø§ ÙˆÙ‚ØµØ±Ù‹Ø§ØŒ ÙˆÙŠØ¨ÙŠØª Ø¨Ù‡Ø§ Ø¥Ù„Ù‰ Ø§Ù„ÙØ¬Ø±.
                </p>
              </div>
              
              <div className="bg-white dark:bg-gray-700 p-4 rounded-lg shadow">
                <h4 className="text-lg font-bold text-emerald-600 dark:text-emerald-400 mb-2 flex items-center">
                  <span className="inline-flex justify-center items-center mr-2 w-6 h-6 bg-emerald-600 text-white rounded-full">6</span>
                  Ø±Ù…ÙŠ Ø§Ù„Ø¬Ù…Ø±Ø§Øª
                </h4>
                <p className="text-gray-700 dark:text-gray-300 mb-4">
                  ÙÙŠ ÙŠÙˆÙ… Ø§Ù„Ø¹ÙŠØ¯ ÙŠØ±Ù…ÙŠ Ø§Ù„Ø­Ø§Ø¬ Ø¬Ù…Ø±Ø© Ø§Ù„Ø¹Ù‚Ø¨Ø© Ø¨Ø³Ø¨Ø¹ Ø­ØµÙŠØ§ØªØŒ Ø«Ù… ÙŠØ±Ù…ÙŠ ÙÙŠ Ø£ÙŠØ§Ù… Ø§Ù„ØªØ´Ø±ÙŠÙ‚ Ø§Ù„Ø¬Ù…Ø±Ø§Øª Ø§Ù„Ø«Ù„Ø§Ø«.
                </p>
              </div>
              
              <div className="bg-white dark:bg-gray-700 p-4 rounded-lg shadow">
                <h4 className="text-lg font-bold text-emerald-600 dark:text-emerald-400 mb-2 flex items-center">
                  <span className="inline-flex justify-center items-center mr-2 w-6 h-6 bg-emerald-600 text-white rounded-full">7</span>
                  Ø·ÙˆØ§Ù Ø§Ù„Ø¥ÙØ§Ø¶Ø© ÙˆØ§Ù„ÙˆØ¯Ø§Ø¹
                </h4>
                <p className="text-gray-700 dark:text-gray-300 mb-4">
                  ÙŠØ·ÙˆÙ Ø§Ù„Ø­Ø§Ø¬ Ø·ÙˆØ§Ù Ø§Ù„Ø¥ÙØ§Ø¶Ø© (ÙˆÙ‡Ùˆ Ø±ÙƒÙ† Ù…Ù† Ø£Ø±ÙƒØ§Ù† Ø§Ù„Ø­Ø¬)ØŒ Ø«Ù… Ù‚Ø¨Ù„ Ù…ØºØ§Ø¯Ø±Ø© Ù…ÙƒØ© ÙŠØ·ÙˆÙ Ø·ÙˆØ§Ù Ø§Ù„ÙˆØ¯Ø§Ø¹.
                </p>
              </div>
            </div>
            
            <div className="flex justify-center space-x-4 rtl:space-x-reverse">
              <button 
                onClick={() => setActiveTab('overview')}
                className="px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg"
              >
                Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù†Ø¸Ø±Ø© Ø§Ù„Ø¹Ø§Ù…Ø©
              </button>
              <button 
                onClick={() => setActiveTab('umrah')}
                className="px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg"
              >
                Ø¥Ù„Ù‰ Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø¹Ù…Ø±Ø©
              </button>
            </div>
          </div>
        ),
        
        umrah: (
          <div>
            <h3 className="text-xl font-bold text-emerald-700 dark:text-emerald-400 mb-4">Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø¹Ù…Ø±Ø©</h3>
            
            <div className="space-y-6 mb-8">
              <div className="bg-white dark:bg-gray-700 p-4 rounded-lg shadow">
                <h4 className="text-lg font-bold text-emerald-600 dark:text-emerald-400 mb-2 flex items-center">
                  <span className="inline-flex justify-center items-center mr-2 w-6 h-6 bg-emerald-600 text-white rounded-full">1</span>
                  Ø§Ù„Ø¥Ø­Ø±Ø§Ù…
                </h4>
                <p className="text-gray-700 dark:text-gray-300 mb-2">
                  ÙŠØ¨Ø¯Ø£ Ø§Ù„Ù…Ø¹ØªÙ…Ø± Ø¨Ø§Ù„Ø¥Ø­Ø±Ø§Ù… Ù…Ù† Ø§Ù„Ù…ÙŠÙ‚Ø§Øª Ø§Ù„Ù…Ù†Ø§Ø³Ø¨ Ù„Ù‡ØŒ ÙŠØºØªØ³Ù„ ÙˆÙŠÙ„Ø¨Ø³ Ø«ÙŠØ§Ø¨ Ø§Ù„Ø¥Ø­Ø±Ø§Ù… Ø¥Ø°Ø§ ÙƒØ§Ù† Ø±Ø¬Ù„Ø§Ù‹ØŒ ÙˆØªÙ„Ø¨Ø³ Ø§Ù„Ù…Ø±Ø£Ø© Ù…Ø§ Ø´Ø§Ø¡Øª Ù…Ù† Ø§Ù„Ø«ÙŠØ§Ø¨ Ø§Ù„Ø³Ø§ØªØ±Ø©. ÙŠÙ†ÙˆÙŠ Ø§Ù„Ø¹Ù…Ø±Ø© Ù‚Ø§Ø¦Ù„Ù‹Ø§: "Ù„Ø¨ÙŠÙƒ Ø§Ù„Ù„Ù‡Ù… Ø¹Ù…Ø±Ø©".
                </p>
                <div className="p-3 bg-emerald-50 dark:bg-emerald-900 text-emerald-800 dark:text-emerald-200 rounded">
                  <strong>Ø§Ù„ØªÙ„Ø¨ÙŠØ©:</strong> Ù„Ø¨ÙŠÙƒ Ø§Ù„Ù„Ù‡Ù… Ù„Ø¨ÙŠÙƒØŒ Ù„Ø¨ÙŠÙƒ Ù„Ø§ Ø´Ø±ÙŠÙƒ Ù„Ùƒ Ù„Ø¨ÙŠÙƒØŒ Ø¥Ù† Ø§Ù„Ø­Ù…Ø¯ ÙˆØ§Ù„Ù†Ø¹Ù…Ø© Ù„Ùƒ ÙˆØ§Ù„Ù…Ù„ÙƒØŒ Ù„Ø§ Ø´Ø±ÙŠÙƒ Ù„Ùƒ.
                </div>
              </div>
              
              <div className="bg-white dark:bg-gray-700 p-4 rounded-lg shadow">
                <h4 className="text-lg font-bold text-emerald-600 dark:text-emerald-400 mb-2 flex items-center">
                  <span className="inline-flex justify-center items-center mr-2 w-6 h-6 bg-emerald-600 text-white rounded-full">2</span>
                  Ø§Ù„Ø·ÙˆØ§Ù
                </h4>
                <p className="text-gray-700 dark:text-gray-300 mb-4">
                  ÙŠØ·ÙˆÙ Ø§Ù„Ù…Ø¹ØªÙ…Ø± Ø­ÙˆÙ„ Ø§Ù„ÙƒØ¹Ø¨Ø© Ø³Ø¨Ø¹Ø© Ø£Ø´ÙˆØ§Ø·ØŒ Ù…Ø¨ØªØ¯Ø¦Ù‹Ø§ Ù…Ù† Ø§Ù„Ø­Ø¬Ø± Ø§Ù„Ø£Ø³ÙˆØ¯ ÙˆÙ…Ù†ØªÙ‡ÙŠÙ‹Ø§ Ø¨Ù‡. ÙŠÙƒØ¨Ø± Ø¹Ù†Ø¯ Ù…Ø­Ø§Ø°Ø§Ø© Ø§Ù„Ø­Ø¬Ø± Ø§Ù„Ø£Ø³ÙˆØ¯ ÙÙŠ ÙƒÙ„ Ø´ÙˆØ·ØŒ Ø«Ù… ÙŠØµÙ„ÙŠ Ø±ÙƒØ¹ØªÙŠÙ† Ø®Ù„Ù Ù…Ù‚Ø§Ù… Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ….
                </p>
              </div>
              
              <div className="bg-white dark:bg-gray-700 p-4 rounded-lg shadow">
                <h4 className="text-lg font-bold text-emerald-600 dark:text-emerald-400 mb-2 flex items-center">
                  <span className="inline-flex justify-center items-center mr-2 w-6 h-6 bg-emerald-600 text-white rounded-full">3</span>
                  Ø§Ù„Ø³Ø¹ÙŠ
                </h4>
                <p className="text-gray-700 dark:text-gray-300 mb-4">
                  ÙŠØ³Ø¹Ù‰ Ø§Ù„Ù…Ø¹ØªÙ…Ø± Ø¨ÙŠÙ† Ø§Ù„ØµÙØ§ ÙˆØ§Ù„Ù…Ø±ÙˆØ© Ø³Ø¨Ø¹Ø© Ø£Ø´ÙˆØ§Ø·ØŒ Ø¨Ø§Ø¯Ø¦Ù‹Ø§ Ù…Ù† Ø§Ù„ØµÙØ§ ÙˆÙ…Ù†ØªÙ‡ÙŠÙ‹Ø§ Ø¨Ø§Ù„Ù…Ø±ÙˆØ©. ÙŠÙƒØ¨ÙÙ‘Ø± ÙˆÙŠØ¯Ø¹Ùˆ Ø¹Ù„Ù‰ Ø§Ù„ØµÙØ§ ÙˆØ§Ù„Ù…Ø±ÙˆØ© ÙÙŠ ÙƒÙ„ Ø´ÙˆØ·.
                </p>
              </div>
              
              <div className="bg-white dark:bg-gray-700 p-4 rounded-lg shadow">
                <h4 className="text-lg font-bold text-emerald-600 dark:text-emerald-400 mb-2 flex items-center">
                  <span className="inline-flex justify-center items-center mr-2 w-6 h-6 bg-emerald-600 text-white rounded-full">4</span>
                  Ø§Ù„Ø­Ù„Ù‚ Ø£Ùˆ Ø§Ù„ØªÙ‚ØµÙŠØ±
                </h4>
                <p className="text-gray-700 dark:text-gray-300 mb-4">
                  Ø¨Ø¹Ø¯ Ø§Ù„Ø³Ø¹ÙŠØŒ ÙŠÙ‚ØµØ± Ø§Ù„Ù…Ø¹ØªÙ…Ø± Ù…Ù† Ø´Ø¹Ø±Ù‡ (Ø£Ùˆ ÙŠØ­Ù„Ù‚Ù‡ Ø¥Ù† ÙƒØ§Ù† Ø±Ø¬Ù„Ø§Ù‹)ØŒ ÙˆØ¨Ø°Ù„Ùƒ ØªÙ†ØªÙ‡ÙŠ Ø§Ù„Ø¹Ù…Ø±Ø©ØŒ ÙˆÙŠØªØ­Ù„Ù„ Ù…Ù† Ø¥Ø­Ø±Ø§Ù…Ù‡.
                </p>
              </div>
            </div>
            
            <div className="p-4 bg-amber-50 dark:bg-amber-900 text-amber-800 dark:text-amber-200 mb-6 rounded-lg">
              <h4 className="font-bold mb-2">Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ù‡Ø§Ù…Ø©:</h4>
              <ul className="list-disc list-inside space-y-1">
                <li>ÙŠØ¬Ø¨ Ø§Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ Ù…Ø­Ø¸ÙˆØ±Ø§Øª Ø§Ù„Ø¥Ø­Ø±Ø§Ù… Ø­ØªÙ‰ Ø§Ù„ØªØ­Ù„Ù„</li>
                <li>ÙŠØ³ØªØ­Ø¨ Ø§Ù„Ø¥ÙƒØ«Ø§Ø± Ù…Ù† Ø§Ù„Ø¯Ø¹Ø§Ø¡ ÙˆØ§Ù„Ø°ÙƒØ± ÙˆÙ‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù‚Ø±Ø¢Ù†</li>
                <li>Ø§Ù„Ø·ÙˆØ§Ù ÙˆØ§Ù„Ø³Ø¹ÙŠ ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ†Ø§ Ù…ØªØªØ§Ù„ÙŠÙŠÙ† Ø¯ÙˆÙ† Ø§Ù†Ù‚Ø·Ø§Ø¹</li>
                <li>Ø§Ù„Ø·Ù‡Ø§Ø±Ø© ÙˆØ§Ø¬Ø¨Ø© Ù„Ù„Ø·ÙˆØ§ÙØŒ ÙˆÙ…Ø³ØªØ­Ø¨Ø© Ù„Ù„Ø³Ø¹ÙŠ</li>
              </ul>
            </div>
            
            <div className="flex justify-center space-x-4 rtl:space-x-reverse">
              <button 
                onClick={() => setActiveTab('overview')}
                className="px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg"
              >
                Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù†Ø¸Ø±Ø© Ø§Ù„Ø¹Ø§Ù…Ø©
              </button>
              <button 
                onClick={() => setActiveTab('hajj')}
                className="px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg"
              >
                Ø¥Ù„Ù‰ Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø­Ø¬
              </button>
            </div>
          </div>
        ),
        
        hajj_calendar: (
          <div>
            <h3 className="text-xl font-bold text-emerald-700 dark:text-emerald-400 mb-4">ØªÙ‚ÙˆÙŠÙ… Ø§Ù„Ø­Ø¬</h3>
            <div className="p-6 bg-gray-50 dark:bg-gray-700 rounded-lg text-center">
              <div className="w-16 h-16 mx-auto bg-emerald-100 dark:bg-emerald-900 rounded-full flex items-center justify-center mb-4">
                <lucide-calendar className="w-8 h-8 text-emerald-600 dark:text-emerald-400" />
              </div>
              <h4 className="text-lg font-bold mb-2">Ù‚Ø±ÙŠØ¨Ø§Ù‹</h4>
              <p className="text-gray-600 dark:text-gray-400 mb-4">Ø³ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ© ØªÙ‚ÙˆÙŠÙ… ØªÙØµÙŠÙ„ÙŠ Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„Ø­Ø¬ ÙˆÙ…Ù†Ø§Ø³ÙƒÙ‡ Ù‚Ø±ÙŠØ¨Ø§Ù‹</p>
              <button 
                onClick={() => setActiveTab('overview')}
                className="bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-lg"
              >
                Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù†Ø¸Ø±Ø© Ø§Ù„Ø¹Ø§Ù…Ø©
              </button>
            </div>
          </div>
        ),
        
        approved_companies: (
          <div>
            <h3 className="text-xl font-bold text-emerald-700 dark:text-emerald-400 mb-4">Ø´Ø±ÙƒØ§Øª Ø§Ù„Ø­Ø¬ ÙˆØ§Ù„Ø¹Ù…Ø±Ø© Ø§Ù„Ù…Ø¹ØªÙ…Ø¯Ø©</h3>
            <div className="p-6 bg-gray-50 dark:bg-gray-700 rounded-lg text-center">
              <div className="w-16 h-16 mx-auto bg-emerald-100 dark:bg-emerald-900 rounded-full flex items-center justify-center mb-4">
                <lucide-building className="w-8 h-8 text-emerald-600 dark:text-emerald-400" />
              </div>
              <h4 className="text-lg font-bold mb-2">Ù‚Ø±ÙŠØ¨Ø§Ù‹</h4>
              <p className="text-gray-600 dark:text-gray-400 mb-4">Ø³ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ© Ù‚Ø§Ø¦Ù…Ø© Ø¨Ø§Ù„Ø´Ø±ÙƒØ§Øª Ø§Ù„Ù…Ø¹ØªÙ…Ø¯Ø© Ù„Ù„Ø­Ø¬ ÙˆØ§Ù„Ø¹Ù…Ø±Ø© Ù‚Ø±ÙŠØ¨Ø§Ù‹</p>
              <button 
                onClick={() => setActiveTab('overview')}
                className="bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-lg"
              >
                Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù†Ø¸Ø±Ø© Ø§Ù„Ø¹Ø§Ù…Ø©
              </button>
            </div>
          </div>
        ),
        
        faq: (
          <div>
            <h3 className="text-xl font-bold text-emerald-700 dark:text-emerald-400 mb-4">Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©</h3>
            <div className="p-6 bg-gray-50 dark:bg-gray-700 rounded-lg text-center">
              <div className="w-16 h-16 mx-auto bg-emerald-100 dark:bg-emerald-900 rounded-full flex items-center justify-center mb-4">
                <lucide-help-circle className="w-8 h-8 text-emerald-600 dark:text-emerald-400" />
              </div>
              <h4 className="text-lg font-bold mb-2">Ù‚Ø±ÙŠØ¨Ø§Ù‹</h4>
              <p className="text-gray-600 dark:text-gray-400 mb-4">Ø³ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ© Ù‚Ø§Ø¦Ù…Ø© Ø¨Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø´Ø§Ø¦Ø¹Ø© Ø­ÙˆÙ„ Ø§Ù„Ø­Ø¬ ÙˆØ§Ù„Ø¹Ù…Ø±Ø© Ù‚Ø±ÙŠØ¨Ø§Ù‹</p>
              <button 
                onClick={() => setActiveTab('overview')}
                className="bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-lg"
              >
                Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù†Ø¸Ø±Ø© Ø§Ù„Ø¹Ø§Ù…Ø©
              </button>
            </div>
          </div>
        ),
        
        health_tips: (
          <div>
            <h3 className="text-xl font-bold text-emerald-700 dark:text-emerald-400 mb-4">Ù†ØµØ§Ø¦Ø­ ØµØ­ÙŠØ© Ù„Ù„Ø­Ø¬Ø§Ø¬ ÙˆØ§Ù„Ù…Ø¹ØªÙ…Ø±ÙŠÙ†</h3>
            <div className="p-6 bg-gray-50 dark:bg-gray-700 rounded-lg text-center">
              <div className="w-16 h-16 mx-auto bg-emerald-100 dark:bg-emerald-900 rounded-full flex items-center justify-center mb-4">
                <lucide-heart-pulse className="w-8 h-8 text-emerald-600 dark:text-emerald-400" />
              </div>
              <h4 className="text-lg font-bold mb-2">Ù‚Ø±ÙŠØ¨Ø§Ù‹</h4>
              <p className="text-gray-600 dark:text-gray-400 mb-4">Ø³ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ© Ù‚Ø§Ø¦Ù…Ø© Ø¨Ø§Ù„Ù†ØµØ§Ø¦Ø­ Ø§Ù„ØµØ­ÙŠØ© Ù„Ù„Ø­Ø¬Ø§Ø¬ ÙˆØ§Ù„Ù…Ø¹ØªÙ…Ø±ÙŠÙ† Ù‚Ø±ÙŠØ¨Ø§Ù‹</p>
              <button 
                onClick={() => setActiveTab('overview')}
                className="bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-lg"
              >
                Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù†Ø¸Ø±Ø© Ø§Ù„Ø¹Ø§Ù…Ø©
              </button>
            </div>
          </div>
        ),
      };
      
      return (
        <div className="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4">
          <div className="border-b border-gray-300 dark:border-gray-700 pb-3 mb-4">
            <h2 className="text-2xl font-bold text-center text-emerald-800 dark:text-emerald-500">
              Ø§Ù„Ø­Ø¬ ÙˆØ§Ù„Ø¹Ù…Ø±Ø©
            </h2>
            <p className="text-center text-gray-600 dark:text-gray-400">
              Ø¯Ù„ÙŠÙ„ Ø´Ø§Ù…Ù„ Ù„Ù…Ù†Ø§Ø³Ùƒ Ø§Ù„Ø­Ø¬ ÙˆØ§Ù„Ø¹Ù…Ø±Ø© ÙˆÙƒÙ„ Ù…Ø§ ØªØ­ØªØ§Ø¬ Ù…Ø¹Ø±ÙØªÙ‡
            </p>
          </div>
          
          <div className="flex flex-wrap justify-center gap-2 mb-6">
            <button 
              onClick={() => setActiveTab('overview')}
              className={`px-3 py-2 rounded-lg text-sm ${activeTab === 'overview' ? 'bg-emerald-600 text-white' : 'bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200'}`}
            >
              Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©
            </button>
            <button 
              onClick={() => setActiveTab('hajj')}
              className={`px-3 py-2 rounded-lg text-sm ${activeTab === 'hajj' ? 'bg-emerald-600 text-white' : 'bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200'}`}
            >
              Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø­Ø¬
            </button>
            <button 
              onClick={() => setActiveTab('umrah')}
              className={`px-3 py-2 rounded-lg text-sm ${activeTab === 'umrah' ? 'bg-emerald-600 text-white' : 'bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200'}`}
            >
              Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø¹Ù…Ø±Ø©
            </button>
            <button 
              onClick={() => setActiveTab('hajj_calendar')}
              className={`px-3 py-2 rounded-lg text-sm ${activeTab === 'hajj_calendar' ? 'bg-emerald-600 text-white' : 'bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200'}`}
            >
              ØªÙ‚ÙˆÙŠÙ… Ø§Ù„Ø­Ø¬
            </button>
            <button 
              onClick={() => setActiveTab('approved_companies')}
              className={`px-3 py-2 rounded-lg text-sm ${activeTab === 'approved_companies' ? 'bg-emerald-600 text-white' : 'bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200'}`}
            >
              Ø§Ù„Ø´Ø±ÙƒØ§Øª Ø§Ù„Ù…Ø¹ØªÙ…Ø¯Ø©
            </button>
            <button 
              onClick={() => setActiveTab('health_tips')}
              className={`px-3 py-2 rounded-lg text-sm ${activeTab === 'health_tips' ? 'bg-emerald-600 text-white' : 'bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200'}`}
            >
              Ù†ØµØ§Ø¦Ø­ ØµØ­ÙŠØ©
            </button>
          </div>
          
          {tabContents[activeTab]}
          
          {toast && (
            <Toast 
              message={toast.message} 
              type={toast.type} 
              onClose={clearToast} 
            />
          )}
        </div>
      );
    };

    // Ù‚Ø³Ù… Ø­Ù„Ù‚Ø§Øª Ø§Ù„ØªØ­ÙÙŠØ¸ - Ø±Ø¨Ø· Ù…Ø¹ API
    const MemorizationCircles = () => {
      const [circles, setCircles] = useState([]);
      const [loading, setLoading] = useState(true);
      const [error, setError] = useState(null);
      const [showJoinForm, setShowJoinForm] = useState(false);
      const [selectedCircle, setSelectedCircle] = useState(null);
      const [toast, setToast] = useState(null);
      const [formData, setFormData] = useState({
        name: '',
        email: '',
        phone: '',
        level: 'Ù…Ø¨ØªØ¯Ø¦',
        message: '',
      });
      
      // Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ù„Ù‚Ø§Øª Ø§Ù„ØªØ­ÙÙŠØ¸
      useEffect(() => {
        fetchCircles();
      }, []);
      
      const fetchCircles = async () => {
        setLoading(true);
        setError(null);
        
        try {
          // Ù…Ø­Ø§ÙƒØ§Ø© Ù„Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ API - Ø³ÙŠØªÙ… Ø±Ø¨Ø·Ù‡ Ø¨Ù€ API Ø­Ù‚ÙŠÙ‚ÙŠ ÙÙŠ Ø§Ù„Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ
          setTimeout(() => {
            const mockCircles = [
              { id: 1, name: 'Ø­Ù„Ù‚Ø© Ø§Ù„Ø¥Ù…Ø§Ù… Ù†Ø§ÙØ¹', teacher: 'Ø§Ù„Ø´ÙŠØ® Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯', level: 'Ù…ØªÙ‚Ø¯Ù…', members: 12, schedule: 'Ø§Ù„Ø³Ø¨Øª ÙˆØ§Ù„Ø§Ø«Ù†ÙŠÙ† 8 Ù…Ø³Ø§Ø¡Ù‹', availableSeats: 3, imgUrl: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iODAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJncmFkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIxMDAlIiB5Mj0iMTAwJSI+PHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzEwQjk4MSIgLz48c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiMwNTlkYzciIC8+PC9saW5lYXJHcmFkaWVudD48L2RlZnM+PGNpcmNsZSBjeD0iNDAiIGN5PSI0MCIgcj0iMzUiIGZpbGw9InVybCgjZ3JhZCkiLz48dGV4dCB4PSI1MCUiIHk9IjUwJSIgZm9udC1zaXplPSIyMCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgYWxpZ25tZW50LWJhc2VsaW5lPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmaWxsPSJ3aGl0ZSI+PN+EPC90ZXh0Pjwvc3ZnPg==' },
              { id: 2, name: 'Ø­Ù„Ù‚Ø© ØªØ¹Ù„ÙŠÙ… Ø§Ù„Ù…Ø¨ØªØ¯Ø¦ÙŠÙ†', teacher: 'Ø§Ù„Ø´ÙŠØ® Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ù…Ø­Ù…ÙˆØ¯', level: 'Ù…Ø¨ØªØ¯Ø¦', members: 20, schedule: 'Ø§Ù„Ø£Ø­Ø¯ ÙˆØ§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡ 7 Ù…Ø³Ø§Ø¡Ù‹', availableSeats: 5, imgUrl: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iODAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJncmFkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIxMDAlIiB5Mj0iMTAwJSI+PHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzVENUNERSIgLz48c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiM4ODc0RjQiIC8+PC9saW5lYXJHcmFkaWVudD48L2RlZnM+PGNpcmNsZSBjeD0iNDAiIGN5PSI0MCIgcj0iMzUiIGZpbGw9InVybCgjZ3JhZCkiLz48dGV4dCB4PSI1MCUiIHk9IjUwJSIgZm9udC1zaXplPSIyMCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgYWxpZ25tZW50LWJhc2VsaW5lPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmaWxsPSJ3aGl0ZSI+2KjYrTwvdGV4dD48L3N2Zz4=' },
              { id: 3, name: 'Ø­Ù„Ù‚Ø© Ø¬Ø²Ø¡ Ø¹Ù…', teacher: 'Ø§Ù„Ø´ÙŠØ®Ø© Ù†ÙˆØ±Ø© Ø§Ù„Ø£Ø­Ù…Ø¯', level: 'Ù…ØªÙˆØ³Ø·', members: 15, schedule: 'ÙŠÙˆÙ…ÙŠÙ‹Ø§ 9 ØµØ¨Ø§Ø­Ù‹Ø§', availableSeats: 0, imgUrl: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iODAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJncmFkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIxMDAlIiB5Mj0iMTAwJSI+PHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI0Y5NzMxNiIgLz48c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNGQkE5NEQiIC8+PC9saW5lYXJHcmFkaWVudD48L2RlZnM+PGNpcmNsZSBjeD0iNDAiIGN5PSI0MCIgcj0iMzUiIGZpbGw9InVybCgjZ3JhZCkiLz48dGV4dCB4PSI1MCUiIHk9IjUwJSIgZm9udC1zaXplPSIyMCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgYWxpZ25tZW50LWJhc2VsaW5lPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmaWxsPSJ3aGl0ZSI+2LnZhTwvdGV4dD48L3N2Zz4=' },
              { id: 4, name: 'Ø­Ù„Ù‚Ø© Ø§Ù„Ø¥ØªÙ‚Ø§Ù† ÙˆØ§Ù„ØªØ¬ÙˆÙŠØ¯', teacher: 'Ø§Ù„Ø´ÙŠØ® Ø³Ø¹Ø¯ Ø§Ù„Ø¹Ù…Ø±ÙŠ', level: 'Ù…ØªÙ‚Ø¯Ù…', members: 8, schedule: 'Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡ ÙˆØ§Ù„Ø®Ù…ÙŠØ³ 6 Ù…Ø³Ø§Ø¡Ù‹', availableSeats: 7, imgUrl: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iODAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJncmFkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIxMDAlIiB5Mj0iMTAwJSI+PHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzNBQTk3NyIgLz48c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiM2MEJCODkiIC8+PC9saW5lYXJHcmFkaWVudD48L2RlZnM+PGNpcmNsZSBjeD0iNDAiIGN5PSI0MCIgcj0iMzUiIGZpbGw9InVybCgjZ3JhZCkiLz48dGV4dCB4PSI1MCUiIHk9IjUwJSIgZm9udC1zaXplPSIyMCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgYWxpZ25tZW50LWJhc2VsaW5lPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmaWxsPSJ3aGl0ZSI+2KrYrDwvdGV4dD48L3N2Zz4=' },
              { id: 5, name: 'Ø­Ù„Ù‚Ø© Ø³ÙˆØ±Ø© Ø§Ù„Ø¨Ù‚Ø±Ø©', teacher: 'Ø§Ù„Ø´ÙŠØ® Ù…Ø­Ù…Ø¯ Ø§Ù„Ø¹ØªÙŠØ¨ÙŠ', level: 'Ù…ØªÙˆØ³Ø·', members: 18, schedule: 'Ø§Ù„Ø³Ø¨Øª ÙˆØ§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡ 10 ØµØ¨Ø§Ø­Ù‹Ø§', availableSeats: 2, imgUrl: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iODAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJncmFkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIxMDAlIiB5Mj0iMTAwJSI+PHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzIxNzREOSIgLz48c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiM0N0EzRkYiIC8+PC9saW5lYXJHcmFkaWVudD48L2RlZnM+PGNpcmNsZSBjeD0iNDAiIGN5PSI0MCIgcj0iMzUiIGZpbGw9InVybCgjZ3JhZCkiLz48dGV4dCB4PSI1MCUiIHk9IjUwJSIgZm9udC1zaXplPSIyMCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgYWxpZ25tZW50LWJhc2VsaW5lPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmaWxsPSJ3aGl0ZSI+2KjZgtwvdGV4dD48L3N2Zz4=' },
              { id: 6, name: 'Ø­Ù„Ù‚Ø© ØªØ¹Ù„ÙŠÙ… Ø§Ù„Ø£Ø·ÙØ§Ù„', teacher: 'Ø§Ù„Ø£Ø³ØªØ§Ø°Ø© Ø³Ø§Ø±Ø© Ø§Ù„ÙÙ‡Ø¯', level: 'Ù…Ø¨ØªØ¯Ø¦', members: 25, schedule: 'Ø§Ù„Ø§Ø«Ù†ÙŠÙ† ÙˆØ§Ù„Ø®Ù…ÙŠØ³ 4 Ø¹ØµØ±Ù‹Ø§', availableSeats: 5, imgUrl: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iODAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJncmFkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIxMDAlIiB5Mj0iMTAwJSI+PHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI0QzMzY3RSIgLz48c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNFODU4OTgiIC8+PC9saW5lYXJHcmFkaWVudD48L2RlZnM+PGNpcmNsZSBjeD0iNDAiIGN5PSI0MCIgcj0iMzUiIGZpbGw9InVybCgjZ3JhZCkiLz48dGV4dCB4PSI1MCUiIHk9IjUwJSIgZm9udC1zaXplPSIyMCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgYWxpZ25tZW50LWJhc2VsaW5lPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmaWxsPSJ3aGl0ZSI+2KfYt9mB2KfZhDwvdGV4dD48L3N2Zz4=' },
            ];
            
            setCircles(mockCircles);
            setLoading(false);
          }, 1200);
        } catch (error) {
          console.error("Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ù„Ù‚Ø§Øª Ø§Ù„ØªØ­ÙÙŠØ¸:", error);
          setError("ØªØ¹Ø°Ø± Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ù„Ù‚Ø§Øª Ø§Ù„ØªØ­ÙÙŠØ¸. ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§ØªØµØ§Ù„Ùƒ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª.");
          setLoading(false);
        }
      };
      
      const handleJoinCircle = (circleId) => {
        const circle = circles.find(c => c.id === circleId);
        if (circle) {
          if (circle.availableSeats > 0) {
            setSelectedCircle(circle);
            setShowJoinForm(true);
          } else {
            setToast({
              message: 'Ø¹Ø°Ø±Ø§Ù‹ØŒ Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù‚Ø§Ø¹Ø¯ Ù…ØªØ§Ø­Ø© ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„Ø­Ù„Ù‚Ø© Ø­Ø§Ù„ÙŠØ§Ù‹.',
              type: 'warning'
            });
          }
        }
      };
      
      const handleFormSubmit = (e) => {
        e.preventDefault();
        
        // ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        if (!formData.name || !formData.email || !formData.phone) {
          setToast({
            message: 'ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©',
            type: 'error'
          });
          return;
        }
        
        // Ù…Ø­Ø§ÙƒØ§Ø© Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø¥Ù„Ù‰ API
        setLoading(true);
        
        setTimeout(() => {
          setLoading(false);
          setShowJoinForm(false);
          
          // ØªØ­Ø¯ÙŠØ« Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù‚Ø§Ø¹Ø¯ Ø§Ù„Ù…ØªØ§Ø­Ø©
          const updatedCircles = circles.map(circle => {
            if (circle.id === selectedCircle.id) {
              return {
                ...circle,
                availableSeats: circle.availableSeats - 1,
                members: circle.members + 1
              };
            }
            return circle;
          });
          
          setCircles(updatedCircles);
          
          // Ø¥Ø¸Ù‡Ø§Ø± Ø±Ø³Ø§Ù„Ø© Ù†Ø¬Ø§Ø­
          setToast({
            message: `ØªÙ… ØªØ³Ø¬ÙŠÙ„Ùƒ Ø¨Ù†Ø¬Ø§Ø­ ÙÙŠ Ø­Ù„Ù‚Ø© ${selectedCircle.name}. Ø³ÙŠØªÙ… Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ Ù‚Ø±ÙŠØ¨Ø§Ù‹.`,
            type: 'success'
          });
          
          // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
          setFormData({
            name: '',
            email: '',
            phone: '',
            level: 'Ù…Ø¨ØªØ¯Ø¦',
            message: '',
          });
        }, 1500);
      };
      
      const handleInputChange = (e) => {
        const { name, value } = e.target;
        setFormData({
          ...formData,
          [name]: value
        });
      };

      const clearToast = () => {
        setToast(null);
      };
      
      if (loading && circles.length === 0) {
        return <LoadingSpinner text="Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø­Ù„Ù‚Ø§Øª Ø§Ù„ØªØ­ÙÙŠØ¸..." />;
      }
      
      if (error && circles.length === 0) {
        return <ErrorDisplay error={error} onRetry={fetchCircles} />;
      }
      
      return (
        <div className="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4">
          <div className="border-b border-gray-300 dark:border-gray-700 pb-3 mb-4">
            <h2 className="text-2xl font-bold text-center text-emerald-800 dark:text-emerald-500">
              Ø­Ù„Ù‚Ø§Øª Ø§Ù„ØªØ­ÙÙŠØ¸ Ø§Ù„Ù…ØªØ§Ø­Ø©
            </h2>
            <p className="text-center text-gray-600 dark:text-gray-400">
              Ø§Ù†Ø¶Ù… Ø¥Ù„Ù‰ Ø¥Ø­Ø¯Ù‰ Ø­Ù„Ù‚Ø§Øª Ø§Ù„ØªØ­ÙÙŠØ¸ ÙˆØ§Ø¨Ø¯Ø£ Ø±Ø­Ù„Ø© Ø§Ù„ØªØ¹Ù„Ù… ÙˆØ§Ù„ØªØ­ÙÙŠØ¸ Ù…Ø¹ Ù…Ø¯Ø±Ø³ÙŠÙ† Ù…ØªØ®ØµØµÙŠÙ†
            </p>
          </div>
          
          {showJoinForm && selectedCircle ? (
            <div className="max-w-2xl mx-auto bg-white dark:bg-gray-800 rounded-lg p-6 mb-6 border border-gray-200 dark:border-gray-700">
              <div className="flex justify-between items-center mb-4">
                <h3 className="text-xl font-bold text-emerald-700 dark:text-emerald-400">Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù… Ø¥Ù„Ù‰ Ø­Ù„Ù‚Ø© {selectedCircle.name}</h3>
                <button 
                  onClick={() => setShowJoinForm(false)}
                  className="p-1 rounded-full bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600"
                >
                  <lucide-x className="w-5 h-5" />
                </button>
              </div>
              
              {loading ? (
                <LoadingSpinner text="Ø¬Ø§Ø±ÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨Ùƒ..." />
              ) : (
                <form onSubmit={handleFormSubmit}>
                  <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                    <div>
                      <label htmlFor="name" className="block text-gray-700 dark:text-gray-300 mb-1">Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„ <span className="text-red-500">*</span></label>
                      <input 
                        type="text" 
                        id="name"
                        name="name"
                        value={formData.name}
                        onChange={handleInputChange}
                        required
                        className="w-full p-2 border border-gray-300 dark:border-gray-600 rounded focus:outline-none focus:ring-2 focus:ring-emerald-500 dark:bg-gray-700 dark:text-white"
                      />
                    </div>
                    <div>
                      <label htmlFor="email" className="block text-gray-700 dark:text-gray-300 mb-1">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ <span className="text-red-500">*</span></label>
                      <input 
                        type="email" 
                        id="email"
                        name="email"
                        value={formData.email}
                        onChange={handleInputChange}
                        required
                        className="w-full p-2 border border-gray-300 dark:border-gray-600 rounded focus:outline-none focus:ring-2 focus:ring-emerald-500 dark:bg-gray-700 dark:text-white"
                      />
                    </div>
                    <div>
                      <label htmlFor="phone" className="block text-gray-700 dark:text-gray-300 mb-1">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ <span className="text-red-500">*</span></label>
                      <input 
                        type="tel" 
                        id="phone"
                        name="phone"
                        value={formData.phone}
                        onChange={handleInputChange}
                        required
                        className="w-full p-2 border border-gray-300 dark:border-gray-600 rounded focus:outline-none focus:ring-2 focus:ring-emerald-500 dark:bg-gray-700 dark:text-white"
                      />
                    </div>
                    <div>
                      <label htmlFor="level" className="block text-gray-700 dark:text-gray-300 mb-1">Ù…Ø³ØªÙˆØ§Ùƒ ÙÙŠ Ø§Ù„Ø­ÙØ¸</label>
                      <select 
                        id="level"
                        name="level"
                        value={formData.level}
                        onChange={handleInputChange}
                        className="w-full p-2 border border-gray-300 dark:border-gray-600 rounded focus:outline-none focus:ring-2 focus:ring-emerald-500 dark:bg-gray-700 dark:text-white"
                      >
                        <option value="Ù…Ø¨ØªØ¯Ø¦">Ù…Ø¨ØªØ¯Ø¦</option>
                        <option value="Ù…ØªÙˆØ³Ø·">Ù…ØªÙˆØ³Ø·</option>
                        <option value="Ù…ØªÙ‚Ø¯Ù…">Ù…ØªÙ‚Ø¯Ù…</option>
                      </select>
                    </div>
                  </div>
                  
                  <div className="mb-4">
                    <label htmlFor="message" className="block text-gray-700 dark:text-gray-300 mb-1">Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©</label>
                    <textarea 
                      id="message"
                      name="message"
                      value={formData.message}
                      onChange={handleInputChange}
                      rows="3"
                      className="w-full p-2 border border-gray-300 dark:border-gray-600 rounded focus:outline-none focus:ring-2 focus:ring-emerald-500 dark:bg-gray-700 dark:text-white"
                    ></textarea>
                  </div>
                  
                  <div className="flex justify-end gap-2">
                    <button 
                      type="button"
                      onClick={() => setShowJoinForm(false)}
                      className="px-4 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded"
                    >
                      Ø¥Ù„ØºØ§Ø¡
                    </button>
                    <button 
                      type="submit"
                      className="px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded"
                    >
                      ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù…
                    </button>
                  </div>
                </form>
              )}
            </div>
          ) : (
            <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
              {circles.map(circle => (
                <div key={circle.id} className="memory-circle border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden shadow-md">
                  <div className="bg-gradient-to-r from-emerald-700 to-emerald-900 text-white p-3">
                    <h3 className="font-bold text-lg">{circle.name}</h3>
                  </div>
                  <div className="p-4">
                    <div className="flex items-center mb-3">
                      <img 
                        src={circle.imgUrl} 
                        alt={circle.teacher} 
                        className="w-12 h-12 rounded-full ml-3"
                      />
                      <div>
                        <div className="font-bold">{circle.teacher}</div>
                        <div className="text-sm text-gray-600 dark:text-gray-400">{circle.level}</div>
                      </div>
                    </div>
                    
                    <div className="mb-2">
                      <span className="font-bold ml-2">Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯:</span>
                      <span>{circle.schedule}</span>
                    </div>
                    <div className="mb-2">
                      <span className="font-bold ml-2">Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡:</span>
                      <span>{circle.members}</span>
                    </div>
                    <div className="mb-2">
                      <span className="font-bold ml-2">Ø§Ù„Ù…Ù‚Ø§Ø¹Ø¯ Ø§Ù„Ù…ØªØ§Ø­Ø©:</span>
                      <span className={circle.availableSeats > 0 ? 'text-emerald-600 dark:text-emerald-400' : 'text-red-600 dark:text-red-400'}>
                        {circle.availableSeats > 0 ? circle.availableSeats : 'Ù…ÙƒØªÙ…Ù„Ø©'}
                      </span>
                    </div>
                    <div className="flex justify-center">
                      <button 
                        className={`${
                          circle.availableSeats > 0 
                            ? 'bg-emerald-600 hover:bg-emerald-700' 
                            : 'bg-gray-400 cursor-not-allowed'
                        } text-white px-4 py-2 rounded-lg`}
                        onClick={() => handleJoinCircle(circle.id)}
                        disabled={circle.availableSeats === 0}
                      >
                        {circle.availableSeats > 0 ? 'Ø§Ù†Ø¶Ù…Ø§Ù… Ù„Ù„Ø­Ù„Ù‚Ø©' : 'Ø§Ù„Ø­Ù„Ù‚Ø© Ù…ÙƒØªÙ…Ù„Ø©'}
                      </button>
                    </div>
                  </div>
                </div>
              ))}
            </div>
          )}
          
          <div className="text-center mt-6">
            <button 
              className="bg-amber-600 hover:bg-amber-700 text-white px-6 py-3 rounded-lg"
              onClick={() => setToast({
                message: 'Ø³ÙŠØªÙ… Ø¥ØªØ§Ø­Ø© Ø¥Ù†Ø´Ø§Ø¡ Ø­Ù„Ù‚Ø§Øª ØªØ­ÙÙŠØ¸ Ø¬Ø¯ÙŠØ¯Ø© Ù‚Ø±ÙŠØ¨Ù‹Ø§',
                type: 'info'
              })}
            >
              Ø¥Ù†Ø´Ø§Ø¡ Ø­Ù„Ù‚Ø© ØªØ­ÙÙŠØ¸ Ø¬Ø¯ÙŠØ¯Ø©
            </button>
          </div>
          
          {toast && (
            <Toast 
              message={toast.message} 
              type={toast.type} 
              onClose={clearToast} 
            />
          )}
        </div>
      );
    };

    // Ø§Ù„ØªØ°ÙŠÙŠÙ„
    const Footer = ({ config }) => {
      return (
        <footer className="mt-auto py-4 border-t border-gray-200 dark:border-gray-700 text-center">
          <div className="container mx-auto px-4">
            <div className="flex flex-col items-center justify-center">
              <p className="text-gray-700 dark:text-gray-300 font-bold">
                {config.copyright.owner}
              </p>
              <div className="flex flex-wrap justify-center gap-x-4 text-sm text-gray-600 dark:text-gray-400 mt-1">
                <a href={`tel:${config.copyright.phone}`} className="hover:text-emerald-600 dark:hover:text-emerald-400">
                  <span className="ml-1">ğŸ“</span>
                  {config.copyright.phone}
                </a>
                <a href={`mailto:${config.copyright.email}`} className="hover:text-emerald-600 dark:hover:text-emerald-400">
                  <span className="ml-1">âœ‰ï¸</span>
                  {config.copyright.email}
                </a>
              </div>
              <p className="text-sm text-gray-600 dark:text-gray-400 mt-1">
                {config.copyright.location}
              </p>
              <p className="text-xs text-gray-500 dark:text-gray-500 mt-3">
                {config.copyright.rights} &copy; {config.copyright.year} | Ø§Ù„Ø¥ØµØ¯Ø§Ø± {config.version}
              </p>
            </div>
          </div>
        </footer>
      );
    };
    
    // Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
    const QuranApp = () => {
      const [darkMode, setDarkMode] = useState(false);
      const [language, setLanguage] = useState('ar');
      const [currentSection, setCurrentSection] = useState('home');
      const [loading, setLoading] = useState(true);
      const [toast, setToast] = useState(null);
      
      useEffect(() => {
        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØªÙØ¶ÙŠÙ„Ø§Øª ÙˆØ¶Ø¹ Ø§Ù„Ø¸Ù„Ø§Ù… Ø¨Ø§Ù„Ù†Ø¸Ø§Ù…
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
          setDarkMode(true);
          document.documentElement.classList.add('dark');
        }
        
        // Ù…Ø­Ø§ÙƒØ§Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        const timer = setTimeout(() => {
          setLoading(false);
        }, 2000);
        
        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Poe API
        if (!window.Poe) {
          console.warn("Poe API is not available. Some features might be limited.");
        }
        
        return () => clearTimeout(timer);
      }, []);
      
      // ØªØ¨Ø¯ÙŠÙ„ ÙˆØ¶Ø¹ Ø§Ù„Ø¸Ù„Ø§Ù…
      const toggleDarkMode = () => {
        setDarkMode(!darkMode);
        if (darkMode) {
          document.documentElement.classList.remove('dark');
        } else {
          document.documentElement.classList.add('dark');
        }
      };
      
      // ØªØºÙŠÙŠØ± Ø§Ù„Ù„ØºØ©
      const handleLanguageChange = (code) => {
        setLanguage(code);
      };
      
      const clearToast = () => {
        setToast(null);
      };
      
      // Ø¹Ø±Ø¶ Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ
      const renderCurrentSection = () => {
        switch (currentSection) {
          case 'quran':
            return <QuranSection />;
          case 'dream-interpretation':
            return <DreamInterpretationSection />;
          case 'hajj-umrah':
            return <HajjUmrahSection />;
          case 'memorization':
            return <MemorizationCircles />;
          // Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ø§Ù„Ø£Ø®Ø±Ù‰ Ø³ÙŠØªÙ… Ø¥Ø¶Ø§ÙØªÙ‡Ø§ Ù„Ø§Ø­Ù‚Ø§Ù‹
          case 'learn-reading':
          case 'virtual-classes':
          case 'educational':
          case 'ask-scholars':
            return (
              <div className="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 text-center">
                <lucide-construction className="w-16 h-16 mx-auto mb-4 text-amber-500" />
                <h2 className="text-xl font-bold text-emerald-700 dark:text-emerald-400 mb-4">
                  Ù‚Ø³Ù… {
                    currentSection === 'learn-reading' ? 'ØªØ¹Ù„Ù… Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©' :
                    currentSection === 'virtual-classes' ? 'Ø§Ù„ÙØµÙˆÙ„ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©' :
                    currentSection === 'educational' ? 'Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ©' :
                    'Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø¹Ù„Ù…Ø§Ø¡'
                  }
                </h2>
                <p className="text-gray-600 dark:text-gray-400 mb-6">
                  Ù‡Ø°Ø§ Ø§Ù„Ù‚Ø³Ù… Ù‚ÙŠØ¯ Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡ ÙˆØ³ÙŠØªÙ… Ø¥Ø¶Ø§ÙØªÙ‡ Ù‚Ø±ÙŠØ¨Ù‹Ø§ Ø¨Ø¥Ø°Ù† Ø§Ù„Ù„Ù‡.
                </p>
                <button 
                  onClick={() => setCurrentSection('home')}
                  className="bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-lg"
                >
                  Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
                </button>
              </div>
            );
          default:
            return (
              <>
                <PrayerTimes />
                <MainSections onSectionSelect={setCurrentSection} />
                <LastReading />
              </>
            );
        }
      };
      
      if (loading) {
        return (
          <div className="fixed inset-0 flex flex-col items-center justify-center bg-gradient-to-b from-emerald-900 to-emerald-700 z-50">
            <div className="text-center">
              <div className="mb-8">
                <div className="w-24 h-24 mx-auto mb-4 rounded-full bg-white bg-opacity-20 flex items-center justify-center animate-pulse">
                  <span className="text-5xl">ğŸ“–</span>
                </div>
                <h1 className="text-4xl font-bold text-white">ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ… Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠ</h1>
                <p className="text-xl text-white mt-2">Ø§Ù„Ù…Ù†ØµØ© Ø§Ù„Ø´Ø§Ù…Ù„Ø© Ù„Ù„ØªØ¹Ù„ÙŠÙ… ÙˆØ§Ù„ØªØ­ÙÙŠØ¸</p>
              </div>
              
              <div className="w-64 h-2 bg-white bg-opacity-30 rounded-full mx-auto overflow-hidden relative">
                <div className="h-full bg-white rounded-full absolute left-0 top-0 animate-pulse" style={{ width: '60%' }}></div>
              </div>
              
              <div className="mt-8 text-white">
                <p className="text-lg font-bold">{APP_CONFIG.developer}</p>
                <p className="text-sm mt-1">
                  <span className="ml-1">ğŸ“</span> {APP_CONFIG.copyright.phone} |
                  <span className="ml-1">âœ‰ï¸</span> {APP_CONFIG.copyright.email}
                </p>
                <p className="text-sm mt-1">{APP_CONFIG.copyright.location}</p>
                <p className="text-xs mt-3">{APP_CONFIG.copyright.rights} &copy; {APP_CONFIG.copyright.year}</p>
              </div>
            </div>
          </div>
        );
      }
      
      return (
        <div className={`min-h-screen flex flex-col ${darkMode ? 'dark bg-gray-900 text-white' : 'bg-gray-100 text-gray-900'}`} dir={LANGUAGES.find(lang => lang.code === language)?.direction || 'rtl'}>
          {/* Ø±Ø£Ø³ Ø§Ù„ØµÙØ­Ø© */}
          <header className="bg-emerald-700 dark:bg-emerald-900 text-white py-2 px-4 shadow-md sticky top-0 z-10">
            <div className="container mx-auto flex flex-wrap justify-between items-center">
              <div className="flex items-center space-x-4 rtl:space-x-reverse">
                <div className="flex items-center cursor-pointer" onClick={() => setCurrentSection('home')}>
                  <span className="text-2xl ml-2">ğŸ“–</span>
                  <span className="font-bold hidden md:block">{APP_CONFIG.name}</span>
                </div>
                
                <div className="flex items-center">
                  <label htmlFor="language" className="text-sm font-medium text-white ml-2">Ø§Ù„Ù„ØºØ©:</label>
                  <select 
                    id="language" 
                    value={language}
                    onChange={(e) => handleLanguageChange(e.target.value)}
                    className="bg-emerald-800 text-white rounded border border-emerald-900 text-sm py-1"
                  >
                    {LANGUAGES.map(lang => (
                      <option key={lang.code} value={lang.code}>{lang.name}</option>
                    ))}
                  </select>
                </div>
              </div>
              
              <div className="flex items-center">
                <button
                  onClick={toggleDarkMode}
                  className="p-2 rounded-full bg-emerald-800 hover:bg-emerald-900"
                  aria-label={darkMode ? "ØªØ¨Ø¯ÙŠÙ„ Ø¥Ù„Ù‰ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù†Ù‡Ø§Ø±ÙŠ" : "ØªØ¨Ø¯ÙŠÙ„ Ø¥Ù„Ù‰ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ"}
                >
                  {darkMode ? <lucide-sun className="w-5 h-5" /> : <lucide-moon className="w-5 h-5" />}
                </button>
              </div>
            </div>
          </header>
          
          {/* Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ */}
          <main className="container mx-auto px-4 py-6 flex-grow">
            {currentSection !== 'home' && (
              <div className="mb-4">
                <button 
                  onClick={() => setCurrentSection('home')}
                  className="flex items-center text-emerald-600 dark:text-emerald-400 hover:underline"
                >
                  <span className="mr-1 rtl:order-1">â†’</span>
                  Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
                </button>
              </div>
            )}
            
            {renderCurrentSection()}
          </main>
          
          {/* Ø§Ù„ØªØ°ÙŠÙŠÙ„ */}
          <Footer config={APP_CONFIG} />
          
          {toast && (
            <Toast 
              message={toast.message} 
              type={toast.type} 
              onClose={clearToast} 
            />
          )}
        </div>
      );
    };

    // Render the app
    ReactDOM.render(<QuranApp />, document.getElementById('app'));
  </script>


</body></html>